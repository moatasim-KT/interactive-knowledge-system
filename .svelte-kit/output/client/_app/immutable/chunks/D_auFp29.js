import{p as ut,a as Le,J as Lt,k as i,s as H,f as v,i as r,j as h,h as s,g as e,w as t,K as Xt,t as b,n as Ve,L as Qt,r as l,v as _t,E as Pe,B as _e,A as Ue,e as Be,M as Ge,a8 as $t,y as ue,m as _,d as Me,c as Ht,D as xe,N as qa,x as Xe,C as kt,_ as Bt,V as la,X as ia,l as Ye,W as Wt,z as ua,b as dt,u as Ut,a9 as Ea,o as jt,a7 as Gt,F as _a,q as Nt,G as oa,R as na,I as Aa}from"./D9dWO0Sc.js";import{a as St,b as Dt}from"./BdGMWZf_.js";import{v as Pa,o as Da,h as Ia,i as Ra,s as Ft,j as At,d as fa}from"./DvEoYHKW.js";import{m as La,c as va,s as Ct,p as Ot,a as Zt,b as Mt,e as Ua}from"./COEqP30R.js";import{a as Oa}from"./B_es5EVb.js";import{I as It,C as Pt,B as je,c as nt,R as Ba,T as Na,b as Fa,P as Ma,L as Rt}from"./BAURvd7r.js";import{getContentStats as pa,webContentActions as Ae,webContentState as We,getFilteredSources as ha}from"./hAlw3l8v.js";import"./Dob3nYDb.js";var Wa=v('<div class="error-placeholder svelte-1gkh4cv"><span class="error-icon svelte-1gkh4cv">‚ö†Ô∏è</span> <span class="error-text svelte-1gkh4cv">Failed to load image</span></div>'),ja=v("<img/>"),Qa=v('<div class="error-placeholder svelte-1gkh4cv"><span class="error-icon svelte-1gkh4cv">‚ö†Ô∏è</span> <span class="error-text svelte-1gkh4cv">Failed to load video</span></div>'),Ha=v('<video><track kind="captions" src="" srclang="en" label="English captions" class="svelte-1gkh4cv"/> Your browser does not support the video tag.</video>',2),Ja=v('<img alt="Video thumbnail" class="video-poster svelte-1gkh4cv"/>'),Va=v('<div class="video-placeholder svelte-1gkh4cv"><!> <div class="play-button svelte-1gkh4cv"><svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1gkh4cv"><circle cx="30" cy="30" r="30" fill="rgba(0,0,0,0.7)" class="svelte-1gkh4cv"></circle><path d="M23 20L40 30L23 40V20Z" fill="white" class="svelte-1gkh4cv"></path></svg></div></div>'),Ka=v('<div class="loading-indicator svelte-1gkh4cv"><div class="spinner svelte-1gkh4cv"></div></div>'),Ya=v("<div><!> <!></div>");function ma(w,a){ut(a,!0);let n=Le(a,"alt",3,""),A=Le(a,"placeholder",3,""),J=Le(a,"options",19,()=>({})),p=Le(a,"class",3,""),W=Le(a,"style",3,""),z=Le(a,"controls",3,!0),j=Le(a,"autoplay",3,!1),S=Le(a,"muted",3,!1),me=Le(a,"loop",3,!1);const{rootMargin:ne="50px",threshold:ye=.1,fadeIn:Se=!0}=J();let te=H(!1),K=H(!1),T=H(!1),I,ve;const N=a.type==="image"?`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${a.width||400}' height='${a.height||300}'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999'%3ELoading...%3C/text%3E%3C/svg%3E`:"",Y=A()||N;Lt(()=>(ve=new IntersectionObserver(U=>{U.forEach(E=>{E.isIntersecting&&(i(K,!0),ve.unobserve(E.target))})},{rootMargin:ne,threshold:ye}),I&&ve.observe(I),()=>{ve&&ve.disconnect()}));function fe(){i(te,!0)}function ze(){i(T,!0)}let Te=Be(()=>e(K)?a.src:Y),ce=Be(()=>e(K)&&!e(T));var u=Ya();let x;var m=r(u);{var P=U=>{var E=Pe(),D=_e(E);{var R=f=>{var g=Wa();l(f,g)},d=f=>{var g=ja();let k;b(C=>{Ue(g,"src",e(Te)),Ue(g,"alt",n()),Ue(g,"width",a.width),Ue(g,"height",a.height),k=Ve(g,1,"lazy-image svelte-1gkh4cv",null,k,C)},[()=>({loaded:e(te)&&e(K)})]),Ge("load",g,fe),Ge("error",g,ze),$t(g),l(f,g)};h(D,f=>{e(T)?f(R):f(d,!1)})}l(U,E)},L=U=>{var E=Pe(),D=_e(E);{var R=d=>{var f=Pe(),g=_e(f);{var k=F=>{var ae=Qa();l(F,ae)},C=F=>{var ae=Pe(),$=_e(ae);{var q=c=>{var o=Ha();let y;b(O=>{Ue(o,"src",e(Te)),o.controls=z(),o.autoplay=j(),o.muted=S(),o.loop=me(),Ue(o,"poster",a.poster),Ue(o,"width",a.width),Ue(o,"height",a.height),y=Ve(o,1,"lazy-video svelte-1gkh4cv",null,y,O)},[()=>({loaded:e(te)})]),Ge("loadeddata",o,fe),Ge("error",o,ze),l(c,o)},B=c=>{var o=Va(),y=r(o);{var O=M=>{var V=Ja();b(()=>Ue(V,"src",a.poster)),l(M,V)};h(y,M=>{a.poster&&M(O)})}ue(2),t(o),l(c,o)};h($,c=>{e(ce)?c(q):c(B,!1)},!0)}l(F,ae)};h(g,F=>{e(T)?F(k):F(C,!1)})}l(d,f)};h(D,d=>{a.type==="video"&&d(R)},!0)}l(U,E)};h(m,U=>{a.type==="image"?U(P):U(L,!1)})}var G=s(m,2);{var re=U=>{var E=Ka();l(U,E)};h(G,U=>{!e(K)&&!e(T)&&U(re)})}t(u),Xt(u,U=>I=U,()=>I),b(U=>{x=Ve(u,1,`lazy-media ${p()??""}`,"svelte-1gkh4cv",x,U),Qt(u,W())},[()=>({loaded:e(te),"fade-in":Se})]),l(w,u),_t()}var Ga=v('<source type="image/avif"/>'),Za=v('<source type="image/webp"/>'),Xa=v('<picture class="responsive-picture svelte-16oiart"><!> <!> <img class="responsive-image svelte-16oiart" loading="lazy"/></picture>'),$a=v('<figcaption class="image-caption svelte-16oiart"> </figcaption>'),er=v("<figure><!> <!></figure>");function tr(w,a){ut(a,!0);let n=Le(a,"lazyLoad",3,!0),A=Le(a,"lazyOptions",19,()=>({})),J=Le(a,"class",3,""),p=Le(a,"style",3,""),W=Be(()=>a.sizes?Object.entries(a.sizes).map(([I,ve])=>`${ve} ${{small:"480w",medium:"768w",large:"1200w",xlarge:"1920w"}[I]||"1x"}`).join(", "):""),z=Be(()=>a.sizes?"(max-width: 480px) 100vw, (max-width: 768px) 100vw, (max-width: 1200px) 100vw, 1920px":"100vw"),j=Be(()=>a.avifSrc&&me()?a.avifSrc:a.webpSrc&&S()?a.webpSrc:a.src);function S(){if(typeof window>"u")return!1;const I=document.createElement("canvas");return I.width=1,I.height=1,I.toDataURL("image/webp").indexOf("data:image/webp")===0}function me(){if(typeof window>"u")return!1;const I=document.createElement("canvas");return I.width=1,I.height=1,I.toDataURL("image/avif").indexOf("data:image/avif")===0}var ne=er(),ye=r(ne);{var Se=I=>{ma(I,{get src(){return e(j)},get alt(){return a.alt},type:"image",get placeholder(){return a.placeholder},get options(){return A()},get width(){return a.width},get height(){return a.height},class:"responsive-image"})},te=I=>{var ve=Xa(),N=r(ve);{var Y=ce=>{var u=Ga();b(()=>Ue(u,"srcset",a.avifSrc)),l(ce,u)};h(N,ce=>{a.avifSrc&&ce(Y)})}var fe=s(N,2);{var ze=ce=>{var u=Za();b(()=>Ue(u,"srcset",a.webpSrc)),l(ce,u)};h(fe,ce=>{a.webpSrc&&ce(ze)})}var Te=s(fe,2);t(ve),b(()=>{Ue(Te,"src",a.src),Ue(Te,"srcset",e(W)),Ue(Te,"sizes",e(z)),Ue(Te,"alt",a.alt),Ue(Te,"width",a.width),Ue(Te,"height",a.height)}),l(I,ve)};h(ye,I=>{n()?I(Se):I(te,!1)})}var K=s(ye,2);{var T=I=>{var ve=$a(),N=r(ve,!0);t(ve),b(()=>_(N,a.caption)),l(I,ve)};h(K,I=>{a.caption&&I(T)})}t(ne),b(()=>{Ve(ne,1,`responsive-image-container ${J()??""}`,"svelte-16oiart"),Qt(ne,p())}),l(w,ne),_t()}function ar(w,a){const n=w.target;n.files&&n.files.length>0&&a(n.files)}var rr=(w,a)=>w.key==="Enter"&&a(),sr=v('<div class="upload-progress svelte-1qerwez"><div class="progress-bar svelte-1qerwez"><div class="progress-fill svelte-1qerwez"></div></div> <div class="progress-text svelte-1qerwez"> </div></div>'),lr=v("<strong>Drop files here</strong>"),ir=v("<strong>Click to upload</strong> or drag and drop",1),or=v('<div class="upload-content svelte-1qerwez"><div class="upload-icon svelte-1qerwez"><!></div> <div class="upload-text svelte-1qerwez"><!></div> <div class="upload-hint svelte-1qerwez"> </div></div>'),nr=v('<div role="button" tabindex="0"><input type="file" class="file-input svelte-1qerwez"/> <!></div>');function ca(w,a){ut(a,!0);const n=Ht();let A=Le(a,"accept",3,"image/*,video/*"),J=Le(a,"multiple",3,!1),p=Le(a,"options",19,()=>({})),W=Le(a,"class",3,""),z=Le(a,"disabled",3,!1),j=H(!1),S=H(!1),me=H(0),ne=H(void 0);const ye={maxSize:10*1024*1024,allowedTypes:["image/*","video/*"],quality:.8,maxWidth:1920,maxHeight:1080,generateThumbnail:!0,generateWebP:!0,...p()};async function Se(u){if(!(z()||e(S))){i(S,!0),i(me,0);try{const x=Array.from(u),m=x.length;for(let P=0;P<x.length;P++){const L=x[P],G=Pa(L,ye);if(!G.valid){n("error",G.error||"Invalid file");continue}await te(L),i(me,(P+1)/m*100),n("progress",{loaded:P+1,total:m})}}catch(x){n("error",x instanceof Error?x.message:"Upload failed")}finally{i(S,!1),i(me,0)}}}async function te(u){const x={id:crypto.randomUUID(),name:u.name,type:u.type.startsWith("image/")?"image":u.type.startsWith("video/")?"video":"audio",mimeType:u.type,size:u.size,url:"",thumbnailUrl:void 0,metadata:{created:new Date,modified:new Date,width:void 0,height:void 0,duration:void 0},optimized:void 0};let m;if(u.type.startsWith("image/")){const P=await Da(u,ye);m=P.original,(P.webp||P.thumbnail)&&(x.optimized={},P.webp&&(x.optimized.webp=P.webp),P.thumbnail&&(x.thumbnailUrl=P.thumbnail));const L=new Image;L.onload=()=>{x.metadata.width=L.width,x.metadata.height=L.height},L.src=m}else if(u.type.startsWith("video/")){const P=await Ia(u,ye);m=P.original,P.thumbnail&&(x.thumbnailUrl=P.thumbnail);const L=document.createElement("video");L.onloadedmetadata=()=>{x.metadata.width=L.videoWidth,x.metadata.height=L.videoHeight,x.metadata.duration=L.duration},L.src=URL.createObjectURL(u)}m!==void 0?await La.storeMedia(x,m):n("error","Processed data is undefined, cannot store media."),x.url=`media://${x.id}`,n("upload",x)}function K(u){u.preventDefault(),i(j,!1),u.dataTransfer?.files&&Se(u.dataTransfer.files)}function T(u){u.preventDefault(),i(j,!0)}function I(){i(j,!1)}function ve(){!z()&&!e(S)&&e(ne)&&e(ne).click()}var N=nr();let Y;N.__click=ve,N.__keydown=[rr,ve];var fe=r(N);fe.__change=[ar,Se],Xt(fe,u=>i(ne,u),()=>e(ne));var ze=s(fe,2);{var Te=u=>{var x=sr(),m=r(x),P=r(m);t(m);var L=s(m,2),G=r(L);t(L),t(x),b(re=>{Qt(P,`width: ${e(me)??""}%`),_(G,`Uploading... ${re??""}%`)},[()=>Math.round(e(me))]),l(u,x)},ce=u=>{var x=or(),m=r(x),P=r(m);{var L=f=>{var g=xe("üìÅ");l(f,g)},G=f=>{var g=xe("üìé");l(f,g)};h(P,f=>{e(j)?f(L):f(G,!1)})}t(m);var re=s(m,2),U=r(re);{var E=f=>{var g=lr();l(f,g)},D=f=>{var g=ir();ue(),l(f,g)};h(U,f=>{e(j)?f(E):f(D,!1)})}t(re);var R=s(re,2),d=r(R);t(R),t(x),b((f,g)=>_(d,`${f??""}
				up to ${g??""}`),[()=>A().includes("image")&&A().includes("video")?"Images and videos":A().includes("image")?"Images only":A().includes("video")?"Videos only":"Media files",()=>Ra(ye.maxSize||10485760)]),l(u,x)};h(ze,u=>{e(S)?u(Te):u(ce,!1)})}t(N),b(u=>{Y=Ve(N,1,`media-upload ${W()??""}`,"svelte-1qerwez",Y,u),Ue(fe,"accept",A()),fe.multiple=J(),fe.disabled=z()},[()=>({"drag-over":e(j),uploading:e(S),disabled:z()})]),Ge("drop",N,K),Ge("dragover",N,T),Ge("dragleave",N,I),l(w,N),_t()}Me(["click","keydown","change"]);function vr(w,a,n){if(a.block.type==="quiz"){const A=[...a.block.content.options||[],"New option"];n({...a.block.content,options:A})}}var cr=v('<div class="text-editor svelte-kv1zaw" contenteditable="true"><!></div>'),dr=v('<div class="image-placeholder svelte-kv1zaw"><span>üì∑ No image selected</span></div>'),ur=(w,a,n)=>a({...n.block.content,alt:w.currentTarget.value}),_r=(w,a,n)=>a({...n.block.content,caption:w.currentTarget.value}),fr=v('<div class="image-controls svelte-kv1zaw"><input type="text" placeholder="Alt text" class="text-input svelte-kv1zaw"/> <input type="text" placeholder="Caption" class="text-input svelte-kv1zaw"/></div>'),pr=v('<div class="image-block svelte-kv1zaw"><!> <!></div>'),hr=v('<div class="video-placeholder svelte-kv1zaw"><span>üé• No video selected</span></div>'),mr=(w,a,n)=>a({...n.block.content,title:w.currentTarget.value}),gr=(w,a,n)=>a({...n.block.content,description:w.currentTarget.value}),br=v('<div class="video-info"> <!></div>'),xr=v('<div class="video-controls svelte-kv1zaw"><input type="text" placeholder="Video title" class="text-input svelte-kv1zaw"/> <textarea placeholder="Video description" class="textarea-input svelte-kv1zaw" rows="3"></textarea> <!></div>'),yr=v('<div class="video-block"><!> <!></div>'),wr=(w,a,n)=>a({...n.block.content,language:w.currentTarget.value}),kr=v('<div class="code-controls svelte-kv1zaw"><select class="language-select svelte-kv1zaw"><option>JavaScript</option><option>TypeScript</option><option>Python</option><option>HTML</option><option>CSS</option><option>JSON</option><option>Markdown</option></select></div>'),Sr=(w,a,n)=>a({...n.block.content,code:w.currentTarget.value}),zr=v('<div class="code-block"><div class="code-fallback"><!> <textarea class="code-textarea svelte-kv1zaw" placeholder="Enter your code here..." spellcheck="false"></textarea></div></div>'),Tr=(w,a,n)=>a({...n.block.content,question:w.currentTarget.value}),Cr=(w,a,n)=>a({...n.block.content,type:w.currentTarget.value}),qr=v('<div class="quiz-option svelte-kv1zaw"><input type="radio"/> <input type="text" class="option-input svelte-kv1zaw"/> <button class="remove-option-btn svelte-kv1zaw" type="button">‚ùå</button></div>'),Er=v('<div class="quiz-options svelte-kv1zaw"><!> <button class="add-option-btn svelte-kv1zaw" type="button">‚ûï Add Option</button></div>'),Ar=(w,a,n)=>a({...n.block.content,correctAnswer:!0}),Pr=(w,a,n)=>a({...n.block.content,correctAnswer:!1}),Dr=v('<div class="true-false-options svelte-kv1zaw"><label class="svelte-kv1zaw"><input type="radio" value="true"/> True</label> <label class="svelte-kv1zaw"><input type="radio" value="false"/> False</label></div>'),Ir=(w,a,n)=>a({...n.block.content,correctAnswer:w.currentTarget.value}),Rr=v('<div class="fill-blank-controls svelte-kv1zaw"><input type="text" placeholder="Correct answer" class="answer-input svelte-kv1zaw"/></div>'),Lr=v('<div class="quiz-controls svelte-kv1zaw"><input type="text" placeholder="Enter your question" class="question-input svelte-kv1zaw"/> <select class="quiz-type-select svelte-kv1zaw"><option>Multiple Choice</option><option>True/False</option><option>Fill in the Blank</option></select></div> <!>',1),Ur=v('<div class="quiz-preview svelte-kv1zaw"><h4 class="svelte-kv1zaw"> </h4> <p class="quiz-type svelte-kv1zaw"> </p></div>'),Or=v('<div class="quiz-block"><!></div>'),Br=(w,a,n)=>a({...n.block.content,front:w.currentTarget.value}),Nr=(w,a,n)=>a({...n.block.content,back:w.currentTarget.value}),Fr=v('<div class="flashcard-editor"><div class="flashcard-side svelte-kv1zaw"><label class="svelte-kv1zaw">Front:</label> <textarea class="flashcard-textarea svelte-kv1zaw" placeholder="Front of the card"></textarea></div> <div class="flashcard-side svelte-kv1zaw"><label class="svelte-kv1zaw">Back:</label> <textarea class="flashcard-textarea svelte-kv1zaw" placeholder="Back of the card"></textarea></div></div>'),Mr=v('<div class="flashcard-preview svelte-kv1zaw"><div class="flashcard-front svelte-kv1zaw"><strong>Front:</strong> </div> <div class="flashcard-back svelte-kv1zaw"><strong>Back:</strong> </div></div>'),Wr=v('<div class="flashcard-block svelte-kv1zaw"><!></div>'),jr=v('<div class="diagram-block"><div class="diagram-placeholder svelte-kv1zaw"><span>üìä Diagram support coming soon</span> <p>This will support flowcharts, mind maps, and other visual diagrams.</p></div></div>'),Qr=v("<div><!></div>");function Hr(w,a){ut(a,!0);const n=Ht();function A(K){n("update",{content:K,metadata:{...a.block.metadata,modified:new Date,version:a.block.metadata.version+1}})}let J=H(void 0);function p(){e(J)&&a.block.type==="text"&&A({html:e(J).innerHTML})}function W(K){const T=K.detail;A({...a.block.content,src:T.url,title:T.name,mediaId:T.id,thumbnailUrl:T.thumbnailUrl,optimized:T.optimized,metadata:{width:T.metadata.width,height:T.metadata.height,duration:T.metadata.duration}})}function z(K){const T=K.detail;console.error("Media upload error:",T)}function j(K,T){if(a.block.type==="quiz"){const I=[...a.block.content.options||[]];I[K]=T,A({...a.block.content,options:I})}}function S(K){if(a.block.type==="quiz"){const T=[...a.block.content.options||[]];T.splice(K,1),A({...a.block.content,options:T})}}var me=Qr();let ne;var ye=r(me);{var Se=K=>{var T=cr();T.__input=p;var I=r(T);qa(I,()=>a.block.content.html||"<p>Enter your text here...</p>"),t(T),Xt(T,ve=>i(J,ve),()=>e(J)),Ge("blur",T,p),l(K,T)},te=K=>{var T=Pe(),I=_e(T);{var ve=Y=>{var fe=pr(),ze=r(fe);{var Te=m=>{{let P=Be(()=>a.block.content.alt||""),L=Be(()=>a.block.content.optimized?.webp),G=Be(()=>a.block.content.optimized?.sizes),re=Be(()=>a.block.content.metadata?.width),U=Be(()=>a.block.content.metadata?.height);tr(m,{get src(){return a.block.content.src},get alt(){return e(P)},get webpSrc(){return e(L)},get sizes(){return e(G)},get caption(){return a.block.content.caption},lazyLoad:!0,get width(){return e(re)},get height(){return e(U)},class:"block-image"})}},ce=m=>{var P=Pe(),L=_e(P);{var G=U=>{ca(U,{accept:"image/*",onupload:W,onerror:z,class:"image-upload"})},re=U=>{var E=dr();l(U,E)};h(L,U=>{a.isSelected?U(G):U(re,!1)},!0)}l(m,P)};h(ze,m=>{a.block.content.src?m(Te):m(ce,!1)})}var u=s(ze,2);{var x=m=>{var P=fr(),L=r(P);Xe(L),L.__input=[ur,A,a];var G=s(L,2);Xe(G),G.__input=[_r,A,a],t(P),b(()=>{kt(L,a.block.content.alt||""),kt(G,a.block.content.caption||"")}),l(m,P)};h(u,m=>{a.isSelected&&a.block.content.src&&m(x)})}t(fe),l(Y,fe)},N=Y=>{var fe=Pe(),ze=_e(fe);{var Te=u=>{var x=yr(),m=r(x);{var P=U=>{{let E=Be(()=>a.block.content.metadata?.width),D=Be(()=>a.block.content.metadata?.height);ma(U,{get src(){return a.block.content.src},type:"video",controls:!0,get poster(){return a.block.content.thumbnailUrl},get width(){return e(E)},get height(){return e(D)},class:"block-video"})}},L=U=>{var E=Pe(),D=_e(E);{var R=f=>{ca(f,{accept:"video/*",onupload:W,onerror:z,class:"video-upload"})},d=f=>{var g=hr();l(f,g)};h(D,f=>{a.isSelected?f(R):f(d,!1)},!0)}l(U,E)};h(m,U=>{a.block.content.src?U(P):U(L,!1)})}var G=s(m,2);{var re=U=>{var E=xr(),D=r(E);Xe(D),D.__input=[mr,A,a];var R=s(D,2);Bt(R),R.__input=[gr,A,a];var d=s(R,2);{var f=g=>{var k=br(),C=r(k),F=s(C);{var ae=$=>{var q=xe();b(()=>_(q,`‚Ä¢ ${a.block.content.metadata.width??""}√ó${a.block.content.metadata.height??""}`)),l($,q)};h(F,$=>{a.block.content.metadata.width&&a.block.content.metadata.height&&$(ae)})}t(k),b($=>_(C,`Duration: ${$??""}s `),[()=>Math.round(a.block.content.metadata.duration)]),l(g,k)};h(d,g=>{a.block.content.metadata?.duration&&g(f)})}t(E),b(()=>{kt(D,a.block.content.title||""),kt(R,a.block.content.description||"")}),l(U,E)};h(G,U=>{a.isSelected&&a.block.content.src&&U(re)})}t(x),l(u,x)},ce=u=>{var x=Pe(),m=_e(x);{var P=G=>{var re=zr(),U=r(re),E=r(U);{var D=d=>{var f=kr(),g=r(f);g.__change=[wr,A,a];var k=r(g);k.value=k.__value="javascript";var C=s(k);C.value=C.__value="typescript";var F=s(C);F.value=F.__value="python";var ae=s(F);ae.value=ae.__value="html";var $=s(ae);$.value=$.__value="css";var q=s($);q.value=q.__value="json";var B=s(q);B.value=B.__value="markdown",t(g);var c;la(g),t(f),b(()=>{c!==(c=a.block.content.language||"javascript")&&(g.value=(g.__value=a.block.content.language||"javascript")??"",ia(g,a.block.content.language||"javascript"))}),l(d,f)};h(E,d=>{a.isSelected&&d(D)})}var R=s(E,2);Bt(R),R.__input=[Sr,A,a],t(U),t(re),b(()=>kt(R,a.block.content.code||"")),l(G,re)},L=G=>{var re=Pe(),U=_e(re);{var E=R=>{var d=Or(),f=r(d);{var g=C=>{var F=Lr(),ae=_e(F),$=r(ae);Xe($),$.__input=[Tr,A,a];var q=s($,2);q.__change=[Cr,A,a];var B=r(q);B.value=B.__value="multiple-choice";var c=s(B);c.value=c.__value="true-false";var o=s(c);o.value=o.__value="fill-blank",t(q);var y;la(q),t(ae);var O=s(ae,2);{var M=Z=>{var ee=Er(),se=r(ee);Ye(se,17,()=>a.block.content.options||[],ua,(de,ie,ge)=>{var pe=qr(),he=r(pe);Xe(he),he.__change=()=>A({...a.block.content,correctAnswer:ge});var oe=s(he,2);Xe(oe),oe.__input=le=>j(ge,le.currentTarget.value);var Ie=s(oe,2);Ie.__click=()=>S(ge),t(pe),b(()=>{Ue(he,"name",`correct-${a.block.id??""}`),Wt(he,a.block.content.correctAnswer===ge),kt(oe,e(ie))}),l(de,pe)});var X=s(se,2);X.__click=[vr,a,A],t(ee),l(Z,ee)},V=Z=>{var ee=Pe(),se=_e(ee);{var X=ie=>{var ge=Dr(),pe=r(ge),he=r(pe);Xe(he),he.__change=[Ar,A,a],ue(),t(pe);var oe=s(pe,2),Ie=r(oe);Xe(Ie),Ie.__change=[Pr,A,a],ue(),t(oe),t(ge),b(()=>{Ue(he,"name",`tf-${a.block.id??""}`),Wt(he,a.block.content.correctAnswer===!0),Ue(Ie,"name",`tf-${a.block.id??""}`),Wt(Ie,a.block.content.correctAnswer===!1)}),l(ie,ge)},de=ie=>{var ge=Pe(),pe=_e(ge);{var he=oe=>{var Ie=Rr(),le=r(Ie);Xe(le),le.__input=[Ir,A,a],t(Ie),b(()=>kt(le,a.block.content.correctAnswer||"")),l(oe,Ie)};h(pe,oe=>{a.block.content.type==="fill-blank"&&oe(he)},!0)}l(ie,ge)};h(se,ie=>{a.block.content.type==="true-false"?ie(X):ie(de,!1)},!0)}l(Z,ee)};h(O,Z=>{a.block.content.type==="multiple-choice"?Z(M):Z(V,!1)})}b(()=>{kt($,a.block.content.question||""),y!==(y=a.block.content.type||"multiple-choice")&&(q.value=(q.__value=a.block.content.type||"multiple-choice")??"",ia(q,a.block.content.type||"multiple-choice"))}),l(C,F)},k=C=>{var F=Ur(),ae=r(F),$=r(ae,!0);t(ae);var q=s(ae,2),B=r(q);t(q),t(F),b(()=>{_($,a.block.content.question||"Quiz Question"),_(B,`Type: ${a.block.content.type||"multiple-choice"}`)}),l(C,F)};h(f,C=>{a.isSelected?C(g):C(k,!1)})}t(d),l(R,d)},D=R=>{var d=Pe(),f=_e(d);{var g=C=>{var F=Wr(),ae=r(F);{var $=B=>{var c=Fr(),o=r(c),y=r(o),O=s(y,2);Bt(O),O.__input=[Br,A,a],t(o);var M=s(o,2),V=r(M),Z=s(V,2);Bt(Z),Z.__input=[Nr,A,a],t(M),t(c),b(()=>{Ue(y,"for",`flashcard-front-${a.block.id??""}`),Ue(O,"id",`flashcard-front-${a.block.id??""}`),kt(O,a.block.content.front||""),Ue(V,"for",`flashcard-back-${a.block.id??""}`),Ue(Z,"id",`flashcard-back-${a.block.id??""}`),kt(Z,a.block.content.back||"")}),l(B,c)},q=B=>{var c=Mr(),o=r(c),y=s(r(o));t(o);var O=s(o,2),M=s(r(O));t(O),t(c),b(()=>{_(y,` ${a.block.content.front||"Front of card"}`),_(M,` ${a.block.content.back||"Back of card"}`)}),l(B,c)};h(ae,B=>{a.isSelected?B($):B(q,!1)})}t(F),l(C,F)},k=C=>{var F=Pe(),ae=_e(F);{var $=q=>{var B=jr();l(q,B)};h(ae,q=>{a.block.type==="diagram"&&q($)},!0)}l(C,F)};h(f,C=>{a.block.type==="flashcard"?C(g):C(k,!1)},!0)}l(R,d)};h(U,R=>{a.block.type==="quiz"?R(E):R(D,!1)},!0)}l(G,re)};h(m,G=>{a.block.type==="code"?G(P):G(L,!1)},!0)}l(u,x)};h(ze,u=>{a.block.type==="video"?u(Te):u(ce,!1)},!0)}l(Y,fe)};h(I,Y=>{a.block.type==="image"?Y(ve):Y(N,!1)},!0)}l(K,T)};h(ye,K=>{a.block.type==="text"?K(Se):K(te,!1)})}t(me),b(K=>ne=Ve(me,1,"content-block svelte-kv1zaw",null,ne,K),[()=>({selected:a.isSelected})]),l(w,me),_t()}Me(["input","change","click"]);var Jr=(w,a)=>a("text"),Vr=(w,a)=>a("image"),Kr=(w,a)=>a("video"),Yr=(w,a)=>a("code"),Gr=(w,a)=>a("quiz"),Zr=(w,a)=>a("flashcard"),Xr=v('<div class="empty-state svelte-1sq24xf"><h4 class="svelte-1sq24xf">Start creating your content</h4> <p>Add your first content block using the toolbar above.</p></div>'),$r=(w,a,n)=>a(e(n).id),es=(w,a,n)=>w.key==="Enter"&&a(e(n).id),ts=(w,a,n)=>{w.stopPropagation(),a(e(n).id)},as=v('<div draggable="true" role="button" tabindex="0"><div class="block-header svelte-1sq24xf"><span class="block-type svelte-1sq24xf"> </span> <div class="block-actions svelte-1sq24xf"><button class="block-action-btn svelte-1sq24xf" title="Add block below">‚ûï</button> <button class="block-action-btn danger svelte-1sq24xf" title="Remove block">üóëÔ∏è</button></div></div> <!></div>'),rs=v('<span class="status-item svelte-1sq24xf">Auto-save enabled</span>'),ss=v('<span class="status-item svelte-1sq24xf"> </span>'),ls=v('<div class="content-editor svelte-1sq24xf"><div class="toolbar svelte-1sq24xf"><div class="toolbar-section svelte-1sq24xf"><h3 class="svelte-1sq24xf">Content Editor</h3></div> <div class="toolbar-section svelte-1sq24xf"><button class="toolbar-btn svelte-1sq24xf" title="Add Text Block">üìù Text</button> <button class="toolbar-btn svelte-1sq24xf" title="Add Image Block">üñºÔ∏è Image</button> <button class="toolbar-btn svelte-1sq24xf" title="Add Video Block">üé• Video</button> <button class="toolbar-btn svelte-1sq24xf" title="Add Code Block">üíª Code</button> <button class="toolbar-btn svelte-1sq24xf" title="Add Quiz Block">‚ùì Quiz</button> <button class="toolbar-btn svelte-1sq24xf" title="Add Flashcard Block">üÉè Flashcard</button></div> <div class="toolbar-section svelte-1sq24xf"><button class="toolbar-btn svelte-1sq24xf" title="Undo (Ctrl+Z)">‚Ü∂ Undo</button> <button class="toolbar-btn primary svelte-1sq24xf" title="Save (Ctrl+S)">üíæ Save</button></div></div> <div class="editor-content svelte-1sq24xf"><!></div> <div class="status-bar svelte-1sq24xf"><span class="status-item svelte-1sq24xf"> </span> <!> <!></div></div>');function pi(w,a){ut(a,!0);let n=Le(a,"initialBlocks",19,()=>[]),A=Le(a,"autoSave",3,!0),J=Le(a,"autoSaveDelay",3,1e3),p=dt({blocks:[...n()],selectedBlock:null,isEditing:!1,history:[structuredClone(n())]}),W=null;Ut(()=>{A()&&p.blocks.length>0&&(W&&clearTimeout(W),W=setTimeout(()=>{Y()},J()))});let z=H(null),j=H(null);function S(c){return{id:crypto.randomUUID(),type:c,content:me(c),metadata:{created:new Date,modified:new Date,version:1}}}function me(c){switch(c){case"text":return{html:"<p>Enter your text here...</p>"};case"image":return{src:"",alt:"",caption:""};case"video":return{src:"",title:"",description:""};case"code":return{code:"// Enter your code here",language:"javascript",title:"",description:"",executable:!0,version:1,history:[]};case"quiz":return{question:"Enter your question",type:"multiple-choice",options:["Option 1","Option 2"],correctAnswer:0};case"flashcard":return{front:"Front of card",back:"Back of card"};case"diagram":return{type:"flowchart",data:{}};default:return{}}}function ne(c,o){const y=S(c),O=o!==void 0?o:p.blocks.length;ve(),p.blocks.splice(O,0,y),p.selectedBlock=y.id,p.isEditing=!0,St.addNotification({type:"success",message:`Added new ${c} block`})}function ye(c){const o=p.blocks.findIndex(y=>y.id===c);o>-1&&(ve(),p.blocks.splice(o,1),p.selectedBlock===c&&(p.selectedBlock=null),St.addNotification({type:"info",message:"Block removed"}))}function Se(c,o){const y=p.blocks.find(O=>O.id===c);y&&(Object.assign(y,o),y.metadata.modified=new Date,y.metadata.version+=1)}function te(c,o){if(!c.dataTransfer)return;i(z,o,!0),c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("text/plain",o.toString());const y=c.target;y.style.opacity="0.5"}function K(c){const o=c.target;o.style.opacity="1",i(z,null),i(j,null)}function T(c,o){c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move",i(j,o,!0))}function I(c,o){if(c.preventDefault(),e(z)===null||e(z)===o)return;ve();const y=p.blocks[e(z)];p.blocks.splice(e(z),1);const O=e(z)<o?o-1:o;p.blocks.splice(O,0,y),St.addNotification({type:"success",message:"Block reordered"})}function ve(){const c=structuredClone(p.blocks);p.history.push(c),p.history.length>50&&p.history.shift()}function N(){if(p.history.length>1){p.history.pop();const c=p.history[p.history.length-1];p.blocks=structuredClone(c),St.addNotification({type:"info",message:"Undid last action"})}}function Y(){a.onsave&&a.onsave(p.blocks),St.addNotification({type:"success",message:"Content saved"})}function fe(c){p.selectedBlock=c,p.isEditing=c!==null}function ze(c){if(c.ctrlKey||c.metaKey)switch(c.key){case"z":c.preventDefault(),N();break;case"s":c.preventDefault(),Y();break}}var Te=ls();Ge("keydown",Ea,ze);var ce=r(Te),u=s(r(ce),2),x=r(u);x.__click=[Jr,ne];var m=s(x,2);m.__click=[Vr,ne];var P=s(m,2);P.__click=[Kr,ne];var L=s(P,2);L.__click=[Yr,ne];var G=s(L,2);G.__click=[Gr,ne];var re=s(G,2);re.__click=[Zr,ne],t(u);var U=s(u,2),E=r(U);E.__click=N;var D=s(E,2);D.__click=Y,t(U),t(ce);var R=s(ce,2),d=r(R);{var f=c=>{var o=Xr();l(c,o)},g=c=>{var o=Pe(),y=_e(o);Ye(y,19,()=>p.blocks,O=>O.id,(O,M,V)=>{var Z=as();let ee;Z.__click=[$r,fe,M],Z.__keydown=[es,fe,M];var se=r(Z),X=r(se),de=r(X,!0);t(X);var ie=s(X,2),ge=r(ie);ge.__click=oe=>{oe.stopPropagation(),ne("text",e(V)+1)};var pe=s(ge,2);pe.__click=[ts,ye,M],t(ie),t(se);var he=s(se,2);{let oe=Be(()=>p.selectedBlock===e(M).id);Hr(he,{get block(){return e(M)},get isSelected(){return e(oe)},onupdate:Ie=>Se(e(M).id,Ie.detail)})}t(Z),b(oe=>{ee=Ve(Z,1,"block-container svelte-1sq24xf",null,ee,oe),_(de,e(M).type)},[()=>({selected:p.selectedBlock===e(M).id,"drop-target":e(j)===e(V)})]),Ge("dragstart",Z,oe=>te(oe,e(V))),Ge("dragend",Z,K),Ge("dragover",Z,oe=>T(oe,e(V))),Ge("drop",Z,oe=>I(oe,e(V))),l(O,Z)}),l(c,o)};h(d,c=>{p.blocks.length===0?c(f):c(g,!1)})}t(R);var k=s(R,2),C=r(k),F=r(C);t(C);var ae=s(C,2);{var $=c=>{var o=rs();l(c,o)};h(ae,c=>{A()&&c($)})}var q=s(ae,2);{var B=c=>{var o=ss(),y=r(o);t(o),b(O=>_(y,`Selected: ${O??""}`),[()=>p.blocks.find(O=>O.id===p.selectedBlock)?.type]),l(c,o)};h(q,c=>{p.selectedBlock&&c(B)})}t(k),t(Te),b(()=>{E.disabled=p.history.length<=1,_(F,`${p.blocks.length??""} blocks`)}),l(w,Te),_t()}Me(["click","keydown"]);Me(["click","change"]);Me(["click"]);Me(["click","change"]);Me(["click","change"]);function is(w,a,n,A,J,p){i(a,""),i(n,[],!0),i(A,[],!0),i(J,!1),i(p,!1),St.setSearchQuery(""),St.setSearchResults([])}function os(w,a){i(a,!e(a))}function da(w,a,n){i(a,{contentTypes:[],tags:[],difficulty:[],minRelevance:0},!0),n()}var ns=v('<div class="search-spinner svelte-1oeuydi" aria-label="Searching...">‚ü≥</div>'),vs=v('<button class="clear-button svelte-1oeuydi" aria-label="Clear search">‚úï</button>'),cs=v('<button aria-label="Toggle filters">‚öô</button>'),ds=(w,a,n)=>a(n),us=v('<button class="suggestion-item svelte-1oeuydi"><span class="suggestion-icon svelte-1oeuydi">üîç</span> </button>'),_s=v('<div class="suggestions-dropdown svelte-1oeuydi"></div>'),fs=(w,a,n)=>a(e(n)),ps=v('<div class="result-snippet svelte-1oeuydi"> </div>'),hs=v('<span class="result-tag svelte-1oeuydi"> </span>'),ms=v('<span class="result-tag-more svelte-1oeuydi"> </span>'),gs=v('<div class="result-tags svelte-1oeuydi"><!> <!></div>'),bs=v('<button class="result-item svelte-1oeuydi"><div class="result-header svelte-1oeuydi"><span class="result-title svelte-1oeuydi"> </span> <span class="result-type svelte-1oeuydi"> </span></div> <!> <!> <div class="result-relevance svelte-1oeuydi"> </div></button>'),xs=v('<div class="results-dropdown svelte-1oeuydi"><div class="results-header svelte-1oeuydi"><span class="results-count"> </span></div> <!></div>'),ys=v('<div class="no-results svelte-1oeuydi"><div class="no-results-icon svelte-1oeuydi">üîç</div> <div class="no-results-text svelte-1oeuydi"> </div> <button class="clear-filters-btn svelte-1oeuydi">Clear filters</button></div>'),ws=v('<label class="filter-checkbox svelte-1oeuydi"><input type="checkbox" class="svelte-1oeuydi"/> </label>'),ks=v('<label class="filter-checkbox svelte-1oeuydi"><input type="checkbox" class="svelte-1oeuydi"/> </label>'),Ss=v('<div class="filter-group svelte-1oeuydi"><fieldset><legend class="filter-label svelte-1oeuydi">Tags</legend> <div class="filter-options svelte-1oeuydi"></div></fieldset></div>'),zs=v('<label class="filter-checkbox svelte-1oeuydi"><input type="checkbox" class="svelte-1oeuydi"/> </label>'),Ts=v('<div class="filters-panel svelte-1oeuydi"><div class="filters-header svelte-1oeuydi"><h3 class="svelte-1oeuydi">Search Filters</h3> <button class="clear-filters-btn svelte-1oeuydi">Clear All</button></div> <div class="filter-group svelte-1oeuydi"><fieldset><legend class="filter-label svelte-1oeuydi">Content Types</legend> <div class="filter-options svelte-1oeuydi"></div></fieldset></div> <!> <div class="filter-group svelte-1oeuydi"><fieldset><legend class="filter-label svelte-1oeuydi">Difficulty</legend> <div class="filter-options svelte-1oeuydi"></div></fieldset></div> <div class="filter-group svelte-1oeuydi"><label class="filter-label svelte-1oeuydi" for="min-relevance-filter"> </label> <input id="min-relevance-filter" type="range" min="0" max="100" class="relevance-slider svelte-1oeuydi"/></div></div>'),Cs=v('<div class="search-container svelte-1oeuydi"><div class="search-input-container svelte-1oeuydi"><div class="search-input-wrapper svelte-1oeuydi"><input type="text"/> <div class="search-actions svelte-1oeuydi"><!> <!></div></div> <!> <!></div> <!></div>');function hi(w,a){ut(a,!0);const n=[],A=[],J=[],p=Ht();let W=Le(a,"placeholder",3,"Search knowledge base..."),z=Le(a,"showFilters",3,!0),j=Le(a,"maxResults",3,20),S=H(""),me=H(!1),ne=H(!1),ye=H(dt([])),Se=H(dt([])),te=H(!1),K=H(!1),T=H(dt({contentTypes:[],tags:[],difficulty:[],minRelevance:0})),I=H(dt([])),ve=H(dt([])),N=dt(["module","lesson","folder"]),Y=null;async function fe(){try{const o=await va.getAllModules();for(const M of o)Ft.indexModule(M);for(const M of Dt.content.nodes.values())Ft.indexNode(M);const y=[],O=[];for(const M of o)M.metadata.tags.forEach(V=>{y.includes(V)||y.push(V)}),O.includes(M.metadata.author)||O.push(M.metadata.author);for(const M of Dt.content.nodes.values())M.metadata.tags.forEach(V=>{y.includes(V)||y.push(V)});i(I,y.sort(),!0),i(ve,O.sort(),!0)}catch{}}async function ze(){if(!e(S).trim()){i(Se,[],!0),i(te,!1);return}i(me,!0),i(ne,!1);try{const o=await va.getAllModules(),y=new Map;for(const M of o)y.set(M.id,M);const O=Ft.search(e(S),y,Dt.content.nodes,e(T),j());i(Se,O,!0),i(te,!0),St.setSearchQuery(e(S)),St.setSearchResults(O)}catch{i(Se,[],!0)}finally{i(me,!1)}}function Te(){if(e(S).length<2){i(ye,[],!0),i(ne,!1);return}i(ye,Ft.getSuggestions(e(S),5),!0),i(ne,e(ye).length>0)}function ce(){Y&&clearTimeout(Y),Te(),Y=setTimeout(()=>{ze()},300)}function u(o){i(S,o,!0),i(ne,!1),ze()}function x(o){i(te,!1),i(ne,!1),p("resultselect",o);const y=Dt.content.nodes.get(o.id);y&&St.setCurrentNode(y)}function m(){e(S).trim()&&ze()}function P(o){o.target.closest(".search-container")||(i(ne,!1),i(te,!1))}Lt(()=>(fe(),document.addEventListener("click",P),()=>{document.removeEventListener("click",P),Y&&clearTimeout(Y)})),Ut(()=>{Dt.content.searchQuery!==e(S)&&(i(S,Dt.content.searchQuery,!0),e(S)&&ze())});var L=Cs(),G=r(L),re=r(G),U=r(re);Xe(U),U.__input=ce;let E;var D=s(U,2),R=r(D);{var d=o=>{var y=ns();l(o,y)},f=o=>{var y=Pe(),O=_e(y);{var M=V=>{var Z=vs();Z.__click=[is,S,Se,ye,te,ne],l(V,Z)};h(O,V=>{e(S).length>0&&V(M)},!0)}l(o,y)};h(R,o=>{e(me)?o(d):o(f,!1)})}var g=s(R,2);{var k=o=>{var y=cs();y.__click=[os,K];let O;b(M=>O=Ve(y,1,"filter-button svelte-1oeuydi",null,O,M),[()=>({active:e(K)})]),l(o,y)};h(g,o=>{z()&&o(k)})}t(D),t(re);var C=s(re,2);{var F=o=>{var y=_s();Ye(y,20,()=>e(ye),O=>O,(O,M)=>{var V=us();V.__click=[ds,u,M];var Z=s(r(V));t(V),b(()=>_(Z,` ${M??""}`)),l(O,V)}),t(y),l(o,y)};h(C,o=>{e(ne)&&e(ye).length>0&&o(F)})}var ae=s(C,2);{var $=o=>{var y=xs(),O=r(y),M=r(O),V=r(M);t(M),t(O);var Z=s(O,2);Ye(Z,17,()=>e(Se),ee=>ee.id,(ee,se)=>{var X=bs();X.__click=[fs,x,se];var de=r(X),ie=r(de),ge=r(ie,!0);t(ie);var pe=s(ie,2),he=r(pe,!0);t(pe),t(de);var oe=s(de,2);{var Ie=ke=>{var Ce=ps(),Ee=r(Ce,!0);t(Ce),b(()=>_(Ee,e(se).snippet)),l(ke,Ce)};h(oe,ke=>{e(se).snippet&&ke(Ie)})}var le=s(oe,2);{var Q=ke=>{var Ce=gs(),Ee=r(Ce);Ye(Ee,16,()=>e(se).tags.slice(0,3),Qe=>Qe,(Qe,De)=>{var Ne=hs(),Je=r(Ne,!0);t(Ne),b(()=>_(Je,De)),l(Qe,Ne)});var Re=s(Ee,2);{var Fe=Qe=>{var De=ms(),Ne=r(De);t(De),b(()=>_(Ne,`+${e(se).tags.length-3}`)),l(Qe,De)};h(Re,Qe=>{e(se).tags.length>3&&Qe(Fe)})}t(Ce),l(ke,Ce)};h(le,ke=>{e(se).tags.length>0&&ke(Q)})}var be=s(le,2),we=r(be);t(be),t(X),b(ke=>{_(ge,e(se).title),_(he,e(se).type),_(we,`Relevance: ${ke??""}`)},[()=>Math.round(e(se).relevance)]),l(ee,X)}),t(y),b(()=>_(V,`${e(Se).length??""} result${e(Se).length!==1?"s":""}`)),l(o,y)},q=o=>{var y=Pe(),O=_e(y);{var M=V=>{var Z=ys(),ee=s(r(Z),2),se=r(ee);t(ee);var X=s(ee,2);X.__click=[da,T,m],t(Z),b(()=>_(se,`No results found for "${e(S)??""}"`)),l(V,Z)};h(O,V=>{e(te)&&e(Se).length===0&&e(S).trim()&&V(M)},!0)}l(o,y)};h(ae,o=>{e(te)&&e(Se).length>0?o($):o(q,!1)})}t(G);var B=s(G,2);{var c=o=>{var y=Ts(),O=r(y),M=s(r(O),2);M.__click=[da,T,m],t(O);var V=s(O,2),Z=r(V),ee=s(r(Z),2);Ye(ee,20,()=>N,le=>le,(le,Q)=>{var be=ws(),we=r(be);Xe(we),we.__change=m;var ke,Ce=s(we);t(be),b(()=>{ke!==(ke=Q)&&(we.value=(we.__value=Q)??""),_(Ce,` ${Q??""}`)}),Gt(n,[],we,()=>e(T).contentTypes,Ee=>e(T).contentTypes=Ee),l(le,be)}),t(ee),t(Z),t(V);var se=s(V,2);{var X=le=>{var Q=Ss(),be=r(Q),we=s(r(be),2);Ye(we,20,()=>e(I).slice(0,10),ke=>ke,(ke,Ce)=>{var Ee=ks(),Re=r(Ee);Xe(Re),Re.__change=m;var Fe,Qe=s(Re);t(Ee),b(()=>{Fe!==(Fe=Ce)&&(Re.value=(Re.__value=Ce)??""),_(Qe,` ${Ce??""}`)}),Gt(A,[],Re,()=>e(T).tags,De=>e(T).tags=De),l(ke,Ee)}),t(we),t(be),t(Q),l(le,Q)};h(se,le=>{e(I).length>0&&le(X)})}var de=s(se,2),ie=r(de),ge=s(r(ie),2);Ye(ge,20,()=>[1,2,3,4,5],le=>le,(le,Q)=>{var be=zs(),we=r(be);Xe(we),we.__change=m;var ke,Ce=s(we);t(be),b(()=>{Ue(we,"id",`difficulty-filter-${Q??""}`),ke!==(ke=Q)&&(we.value=(we.__value=Q)??""),_(Ce,` Level ${Q??""}`)}),Gt(J,[],we,()=>e(T).difficulty,Ee=>e(T).difficulty=Ee),l(le,be)}),t(ge),t(ie),t(de);var pe=s(de,2),he=r(pe),oe=r(he);t(he);var Ie=s(he,2);Xe(Ie),Ie.__change=m,t(pe),t(y),b(()=>_(oe,`Minimum Relevance: ${e(T).minRelevance??""}`)),jt(Ie,()=>e(T).minRelevance,le=>e(T).minRelevance=le),l(o,y)};h(B,o=>{z()&&e(K)&&o(c)})}t(L),b(o=>{Ue(U,"placeholder",W()),E=Ve(U,1,"search-input svelte-1oeuydi",null,E,o)},[()=>({"has-value":e(S).length>0})]),Ge("focus",U,()=>{e(S).length>=2&&Te()}),jt(U,()=>e(S),o=>i(S,o)),l(w,L),_t()}Me(["input","click","change"]);Me(["click"]);Me(["click","keydown"]);Me(["click","change"]);Me(["click"]);Me(["click","keydown"]);const qs=async(w,a)=>{await Ct.syncNow(),i(a,Ct.getSyncStatus(),!0)},Es=async(w,a,n)=>{confirm("Are you sure you want to clear all offline data? This cannot be undone.")&&(await Ct.clearOfflineData(),i(a,Ct.getSyncStatus(),!0),i(n,Ct.getOfflineStats(),!0))};var As=v('<div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Queue:</span> <span class="detail-value svelte-mu12xm"> </span></div>'),Ps=v('<div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Pending:</span> <span class="detail-value svelte-mu12xm"> </span></div>'),Ds=v('<div class="stat-item svelte-mu12xm"><span class="stat-label svelte-mu12xm"> </span> <span class="stat-value svelte-mu12xm"> </span></div>'),Is=v('<div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Oldest:</span> <span class="detail-value svelte-mu12xm"> </span></div>'),Rs=v('<div class="offline-stats svelte-mu12xm"><h4 class="svelte-mu12xm">Offline Queue</h4> <div class="stats-grid svelte-mu12xm"><div class="stat-item svelte-mu12xm"><span class="stat-label svelte-mu12xm">Total:</span> <span class="stat-value svelte-mu12xm"> </span></div> <!></div> <!> <button class="clear-button svelte-mu12xm" title="Clear offline data">üóëÔ∏è Clear Offline Data</button></div>'),Ls=v('<div class="sync-status svelte-mu12xm"><div class="sync-header svelte-mu12xm"><div class="status-indicator svelte-mu12xm"><span class="status-icon svelte-mu12xm"> </span> <span> </span></div> <div class="sync-actions svelte-mu12xm"><button class="sync-button svelte-mu12xm" title="Sync now">üîÑ Sync</button></div></div> <div class="sync-details svelte-mu12xm"><div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Network:</span> <span class="detail-value svelte-mu12xm"> <!></span></div> <div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Last sync:</span> <span class="detail-value svelte-mu12xm"> </span></div> <!> <!></div> <!></div>');function mi(w,a){ut(a,!0);let n=H(dt(Ct.getSyncStatus())),A=H(dt(Ct.getOfflineStats())),J;Ut(()=>(J=setInterval(()=>{i(n,Ct.getSyncStatus(),!0),i(A,Ct.getOfflineStats(),!0)},2e3),()=>{J&&clearInterval(J)}));function p(E){if(!E)return"Never";const R=new Date().getTime()-E.getTime(),d=Math.floor(R/6e4),f=Math.floor(d/60),g=Math.floor(f/24);return g>0?`${g}d ago`:f>0?`${f}h ago`:d>0?`${d}m ago`:"Just now"}function W(){return e(n).networkStatus.isOnline?e(n).isSyncing?"text-blue-600":e(n).queueSize>0?"text-yellow-600":"text-green-600":"text-red-600"}function z(){return e(n).networkStatus.isOnline?e(n).isSyncing?"üîÑ":e(n).queueSize>0?"‚è≥":"‚úÖ":"üî¥"}function j(){return e(n).networkStatus.isOnline?e(n).isSyncing?"Syncing...":e(n).queueSize>0?`${e(n).queueSize} pending`:"Up to date":"Offline"}var S=Ls(),me=r(S),ne=r(me),ye=r(ne),Se=r(ye,!0);t(ye);var te=s(ye,2),K=r(te,!0);t(te),t(ne);var T=s(ne,2),I=r(T);I.__click=[qs,n],t(T),t(me);var ve=s(me,2),N=r(ve),Y=s(r(N),2),fe=r(Y),ze=s(fe);{var Te=E=>{var D=xe();b(()=>_(D,`(${e(n).networkStatus.connectionType??""})`)),l(E,D)};h(ze,E=>{e(n).networkStatus.connectionType&&E(Te)})}t(Y),t(N);var ce=s(N,2),u=s(r(ce),2),x=r(u,!0);t(u),t(ce);var m=s(ce,2);{var P=E=>{var D=As(),R=s(r(D),2),d=r(R);t(R),t(D),b(()=>_(d,`${e(n).queueSize??""} operations`)),l(E,D)};h(m,E=>{e(n).queueSize>0&&E(P)})}var L=s(m,2);{var G=E=>{var D=Ps(),R=s(r(D),2),d=r(R);t(R),t(D),b(()=>_(d,`${e(n).pendingOptimisticUpdates??""} optimistic updates`)),l(E,D)};h(L,E=>{e(n).pendingOptimisticUpdates>0&&E(G)})}t(ve);var re=s(ve,2);{var U=E=>{var D=Rs(),R=s(r(D),2),d=r(R),f=s(r(d),2),g=r(f,!0);t(f),t(d);var k=s(d,2);Ye(k,17,()=>Object.entries(e(A).byType),([$,q])=>$,($,q)=>{var B=Be(()=>_a(e(q),2));let c=()=>e(B)[0],o=()=>e(B)[1];var y=Ds(),O=r(y),M=r(O);t(O);var V=s(O,2),Z=r(V,!0);t(V),t(y),b(()=>{_(M,`${c()??""}:`),_(Z,o())}),l($,y)}),t(R);var C=s(R,2);{var F=$=>{var q=Is(),B=s(r(q),2),c=r(B,!0);t(B),t(q),b(o=>_(c,o),[()=>p(e(A).oldestOperation)]),l($,q)};h(C,$=>{e(A).oldestOperation&&$(F)})}var ae=s(C,2);ae.__click=[Es,n,A],t(D),b(()=>_(g,e(A).total)),l(E,D)};h(re,E=>{e(A).total>0&&E(U)})}t(S),b((E,D,R,d)=>{_(Se,E),Ve(te,1,`status-text ${D??""}`,"svelte-mu12xm"),_(K,R),I.disabled=!e(n).canSync,_(fe,`${e(n).networkStatus.isOnline?"Online":"Offline"} `),_(x,d)},[z,W,j,()=>p(e(n).lastSync)]),l(w,S),_t()}Me(["click"]);Me(["click","keydown"]);Me(["click","change","input"]);Me(["change","click"]);Me(["click"]);var Us=(w,a)=>i(a,"import"),Os=(w,a)=>i(a,"sources"),Bs=(w,a)=>i(a,"analyze"),Ns=(w,a)=>i(a,"transform"),Fs=v('<div class="stat svelte-1wx1rut"><span class="stat-label svelte-1wx1rut">References:</span> <span class="stat-value svelte-1wx1rut"> </span></div>'),Ms=v('<div class="source-header svelte-1wx1rut"><div class="source-info svelte-1wx1rut"><img class="domain-favicon svelte-1wx1rut"/> <div><h3 class="source-title svelte-1wx1rut"> </h3> <p class="source-url svelte-1wx1rut"> </p></div></div> <div class="source-actions svelte-1wx1rut"><!> <!></div></div> <div class="source-meta svelte-1wx1rut"><!> <span class="source-domain svelte-1wx1rut"> </span> <span class="source-category svelte-1wx1rut"> </span></div> <div class="source-stats svelte-1wx1rut"><div class="stat svelte-1wx1rut"><span class="stat-label svelte-1wx1rut">Imported:</span> <span class="stat-value svelte-1wx1rut"> </span></div> <div class="stat svelte-1wx1rut"><span class="stat-label svelte-1wx1rut">Last Checked:</span> <span class="stat-value svelte-1wx1rut"> </span></div> <!></div> <div class="source-actions-bottom svelte-1wx1rut"><!></div>',1),Ws=v('<div class="empty-state svelte-1wx1rut"><span class="empty-icon svelte-1wx1rut">üìö</span> <h3 class="svelte-1wx1rut">No Sources Found</h3> <p class="svelte-1wx1rut">Import some web content to get started, or adjust your search filters.</p> <!></div>'),js=v('<div class="sources-section svelte-1wx1rut"><div class="sources-header svelte-1wx1rut"><h2 class="svelte-1wx1rut">Content Sources</h2> <div class="sources-controls svelte-1wx1rut"><!> <select class="svelte-1wx1rut"><option>All Status</option><option>Active</option><option>Updated</option><option>Error</option></select></div></div> <div class="sources-grid svelte-1wx1rut"></div> <!></div>'),Qs=v('<div class="history-item svelte-1wx1rut"><div class="history-info svelte-1wx1rut"><h4 class="svelte-1wx1rut"> </h4> <p class="svelte-1wx1rut"> </p> <span class="history-date svelte-1wx1rut"> </span></div> <!></div>'),Hs=v('<div class="transformation-history svelte-1wx1rut"><h3 class="svelte-1wx1rut">Recent Transformations</h3> <div class="history-list svelte-1wx1rut"></div></div>'),Js=v('<div class="empty-state svelte-1wx1rut"><span class="empty-icon svelte-1wx1rut">‚ú®</span> <h3 class="svelte-1wx1rut">No Transformations Yet</h3> <p class="svelte-1wx1rut">Analyze your content first to discover transformation opportunities.</p> <!></div>'),Vs=v('<div class="transform-section svelte-1wx1rut"><div class="transform-header svelte-1wx1rut"><h2 class="svelte-1wx1rut">Content Transformation</h2> <p class="svelte-1wx1rut">Transform static content into interactive learning experiences</p></div> <div class="transformer-panel svelte-1wx1rut"><!></div> <!></div>'),Ks=v('<div class="web-content-dashboard svelte-1wx1rut"><div class="dashboard-header svelte-1wx1rut"><h1 class="svelte-1wx1rut">Web Content Sourcing</h1> <div class="stats-overview svelte-1wx1rut"><div class="stat-item svelte-1wx1rut"><span class="stat-value svelte-1wx1rut"> </span> <span class="stat-label svelte-1wx1rut">Sources</span></div> <div class="stat-item svelte-1wx1rut"><span class="stat-value svelte-1wx1rut"> </span> <span class="stat-label svelte-1wx1rut">Content Items</span></div> <div class="stat-item svelte-1wx1rut"><span class="stat-value svelte-1wx1rut"> </span> <span class="stat-label svelte-1wx1rut">Opportunities</span></div> <div class="stat-item svelte-1wx1rut"><span class="stat-value svelte-1wx1rut"> </span> <span class="stat-label svelte-1wx1rut">Active Jobs</span></div></div></div> <div class="dashboard-tabs svelte-1wx1rut"><button>üì• Import</button> <button>üìö Sources</button> <button>üîç Analyze</button> <button>‚ú® Transform</button></div> <div class="dashboard-content svelte-1wx1rut"><!></div></div>');function gi(w,a){ut(a,!0);let n=H("sources"),A=H(null),J=H(null),p=ha,W=pa;function z(k){i(A,k,!0);const C=We.sources.items[k];C&&Ae.setCurrentSource(C)}function j(k){const C=typeof k=="string"?new Date(k):k;return C.toLocaleDateString()+" "+C.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function S(k){switch(k){case"active":return"success";case"updated":return"warning";case"error":return"error";case"removed":return"secondary";default:return"secondary"}}function me(k){return`https://www.google.com/s2/favicons?domain=${k}&sz=32`}function ne(k){confirm("Are you sure you want to delete this source?")&&(Ae.removeSource(k),e(A)===k&&(i(A,null),i(J,null)))}async function ye(k){const C=We.sources.items[k];if(C){Ae.setSourcesLoading(!0);try{Ae.updateSource(k,{lastChecked:new Date,status:"active"}),Ae.addNotification({type:"success",message:`Refreshed source: ${C.title}`})}catch(F){Ae.addNotification({type:"error",message:`Failed to refresh source: ${F instanceof Error?F.message:"Unknown error"}`})}finally{Ae.setSourcesLoading(!1)}}}var Se=Ks(),te=r(Se),K=s(r(te),2),T=r(K),I=r(T),ve=r(I,!0);t(I),ue(2),t(T);var N=s(T,2),Y=r(N),fe=r(Y,!0);t(Y),ue(2),t(N);var ze=s(N,2),Te=r(ze),ce=r(Te,!0);t(Te),ue(2),t(ze);var u=s(ze,2),x=r(u),m=r(x,!0);t(x),ue(2),t(u),t(K),t(te);var P=s(te,2),L=r(P);let G;L.__click=[Us,n];var re=s(L,2);let U;re.__click=[Os,n];var E=s(re,2);let D;E.__click=[Bs,n];var R=s(E,2);let d;R.__click=[Ns,n],t(P);var f=s(P,2),g=r(f);ea(g,{context:{component:"WebContentDashboard",operation:"render"},children:(k,C)=>{var F=Pe(),ae=_e(F);{var $=B=>{ga(B,{})},q=B=>{var c=Pe(),o=_e(c);{var y=M=>{var V=js(),Z=r(V),ee=s(r(Z),2),se=r(ee);It(se,{placeholder:"Search sources...",onchange:()=>Ae.setSearchQuery(We.ui.searchQuery),get value(){return We.ui.searchQuery},set value(le){We.ui.searchQuery=le}});var X=s(se,2);X.__change=()=>Ae.setFilters({status:We.ui.filters.status});var de=r(X);de.value=de.__value="all";var ie=s(de);ie.value=ie.__value="active";var ge=s(ie);ge.value=ge.__value="updated";var pe=s(ge);pe.value=pe.__value="error",t(X),t(ee),t(Z);var he=s(Z,2);Ye(he,21,p,le=>le.id,(le,Q)=>{{let be=Be(()=>`source-card ${e(A)===e(Q).id?"selected":""}`);Pt(le,{get class(){return e(be)},children:(we,ke)=>{var Ce=Ms(),Ee=_e(Ce),Re=r(Ee),Fe=r(Re),Qe=s(Fe,2),De=r(Qe),Ne=r(De,!0);t(De);var Je=s(De,2),$e=r(Je,!0);t(Je),t(Qe),t(Re);var vt=s(Re,2),ct=r(vt);je(ct,{onclick:()=>ye(e(Q).id),variant:"outline",size:"sm",children:(He,tt)=>{ue();var at=xe("üîÑ");l(He,at)},$$slots:{default:!0}});var yt=s(ct,2);je(yt,{onclick:()=>ne(e(Q).id),variant:"outline",size:"sm",children:(He,tt)=>{ue();var at=xe("üóëÔ∏è");l(He,at)},$$slots:{default:!0}}),t(vt),t(Ee);var Ze=s(Ee,2),et=r(Ze);{let He=Be(()=>S(e(Q).status));nt(et,{get variant(){return e(He)},children:(tt,at)=>{ue();var lt=xe();b(()=>_(lt,e(Q).status)),l(tt,lt)},$$slots:{default:!0}})}var Oe=s(et,2),qe=r(Oe,!0);t(Oe);var Ke=s(Oe,2),rt=r(Ke,!0);t(Ke),t(Ze);var ft=s(Ze,2),st=r(ft),pt=s(r(st),2),ht=r(pt,!0);t(pt),t(st);var it=s(st,2),mt=s(r(it),2),bt=r(mt,!0);t(mt),t(it);var zt=s(it,2);{var gt=He=>{var tt=Fs(),at=s(r(tt),2),lt=r(at,!0);t(at),t(tt),b(()=>_(lt,e(Q).usage.timesReferenced)),l(He,tt)};h(zt,He=>{e(Q).usage.timesReferenced>0&&He(gt)})}t(ft);var qt=s(ft,2),Tt=r(qt);{let He=Be(()=>e(A)===e(Q).id?"primary":"outline");je(Tt,{onclick:()=>z(e(Q).id),get variant(){return e(He)},size:"sm",children:(tt,at)=>{ue();var lt=xe();b(()=>_(lt,e(A)===e(Q).id?"Selected":"Select")),l(tt,lt)},$$slots:{default:!0}})}t(qt),b((He,tt,at)=>{Ue(Fe,"src",He),Ue(Fe,"alt",e(Q).domain),_(Ne,e(Q).title),_($e,e(Q).url),_(qe,e(Q).domain),_(rt,e(Q).metadata.category),_(ht,tt),_(bt,at)},[()=>me(e(Q).domain),()=>j(e(Q).importDate),()=>j(e(Q).lastChecked)]),Ge("error",Fe,He=>He.currentTarget.style.display="none"),$t(Fe),l(we,Ce)},$$slots:{default:!0}})}}),t(he);var oe=s(he,2);{var Ie=le=>{var Q=Ws(),be=s(r(Q),6);je(be,{onclick:()=>i(n,"import"),variant:"primary",children:(we,ke)=>{ue();var Ce=xe("Import Content");l(we,Ce)},$$slots:{default:!0}}),t(Q),l(le,Q)};h(oe,le=>{p().length===0&&le(Ie)})}t(V),Nt(X,()=>We.ui.filters.status,le=>We.ui.filters.status=le),l(M,V)},O=M=>{var V=Pe(),Z=_e(V);{var ee=X=>{ba(X,{get contentId(){return e(J)},autoAnalyze:!0})},se=X=>{var de=Pe(),ie=_e(de);{var ge=pe=>{var he=Vs(),oe=s(r(he),2),Ie=r(oe);xa(Ie,{get contentId(){return e(J)}}),t(oe);var le=s(oe,2);{var Q=we=>{var ke=Hs(),Ce=s(r(ke),2);Ye(Ce,21,()=>We.transformation.transformationHistory.slice(-5),Ee=>Ee.id||Ee.timestamp,(Ee,Re)=>{var Fe=Qs(),Qe=r(Fe),De=r(Qe),Ne=r(De,!0);t(De);var Je=s(De,2),$e=r(Je);t(Je);var vt=s(Je,2),ct=r(vt,!0);t(vt),t(Qe);var yt=s(Qe,2);nt(yt,{variant:"success",children:(Ze,et)=>{ue();var Oe=xe("Completed");l(Ze,Oe)},$$slots:{default:!0}}),t(Fe),b(Ze=>{_(Ne,e(Re).title),_($e,`Type: ${e(Re).type??""}`),_(ct,Ze)},[()=>j(e(Re).timestamp)]),l(Ee,Fe)}),t(Ce),t(ke),l(we,ke)},be=we=>{var ke=Js(),Ce=s(r(ke),6);je(Ce,{onclick:()=>i(n,"analyze"),variant:"primary",children:(Ee,Re)=>{ue();var Fe=xe("Analyze Content");l(Ee,Fe)},$$slots:{default:!0}}),t(ke),l(we,ke)};h(le,we=>{We.transformation.transformationHistory.length>0?we(Q):we(be,!1)})}t(he),l(pe,he)};h(ie,pe=>{e(n)==="transform"&&pe(ge)},!0)}l(X,de)};h(Z,X=>{e(n)==="analyze"?X(ee):X(se,!1)},!0)}l(M,V)};h(o,M=>{e(n)==="sources"?M(y):M(O,!1)},!0)}l(B,c)};h(ae,B=>{e(n)==="import"?B($):B(q,!1)})}l(k,F)},$$slots:{default:!0}}),t(f),t(Se),b((k,C,F,ae,$,q,B,c)=>{_(ve,k),_(fe,C),_(ce,F),_(m,ae),G=Ve(L,1,"tab-button svelte-1wx1rut",null,G,$),U=Ve(re,1,"tab-button svelte-1wx1rut",null,U,q),D=Ve(E,1,"tab-button svelte-1wx1rut",null,D,B),d=Ve(R,1,"tab-button svelte-1wx1rut",null,d,c)},[()=>W().totalSources,()=>W().totalContent,()=>W().transformationOpportunities,()=>W().activeJobs,()=>({active:e(n)==="import"}),()=>({active:e(n)==="sources"}),()=>({active:e(n)==="analyze"}),()=>({active:e(n)==="transform"})]),l(w,Se),_t()}Me(["click","change"]);var Ys=v('<div class="job-item svelte-hu4xb6"><div class="job-info svelte-hu4xb6"><span class="job-title svelte-hu4xb6"> </span> <!></div> <!></div>'),Gs=v('<section class="processing-status svelte-hu4xb6"><h3 class="processing-title svelte-hu4xb6">Processing Status</h3> <div class="jobs-list svelte-hu4xb6"></div></section>'),Zs=(w,a,n)=>i(a,e(n).id,!0),Xs=v('<button type="button"><span class="tab-icon svelte-hu4xb6"> </span> <span class="tab-label"> </span> <!></button>'),$s=v('<nav class="desktop-tabs svelte-hu4xb6"></nav>'),el=v('<section class="content-section svelte-hu4xb6"><!></section>'),tl=(w,a)=>i(a,"grid"),al=(w,a)=>i(a,"list"),rl=v('<div class="filters-panel svelte-hu4xb6"><div class="filter-group svelte-hu4xb6"><label for="status-filter" class="svelte-hu4xb6">Status:</label> <select id="status-filter" class="svelte-hu4xb6"><option>All Status</option><option>Active</option><option>Updated</option><option>Error</option></select></div> <div class="filter-group svelte-hu4xb6"><label for="sort-by" class="svelte-hu4xb6">Sort by:</label> <select id="sort-by" class="svelte-hu4xb6"><option>Date</option><option>Title</option><option>Domain</option><option>Status</option></select></div> <div class="filter-group svelte-hu4xb6"><label for="sort-order" class="svelte-hu4xb6">Order:</label> <select id="sort-order" class="svelte-hu4xb6"><option>Descending</option><option>Ascending</option></select></div></div>'),sl=v('<div class="stat svelte-hu4xb6"><span class="stat-label svelte-hu4xb6">References:</span> <span class="stat-value svelte-hu4xb6"> </span></div>'),ll=v('<div class="source-header svelte-hu4xb6"><div class="source-info svelte-hu4xb6"><img class="domain-favicon svelte-hu4xb6"/> <div class="source-text svelte-hu4xb6"><h3 class="source-title svelte-hu4xb6"> </h3> <p class="source-url svelte-hu4xb6"> </p></div></div> <div class="source-actions svelte-hu4xb6"><!> <!></div></div> <div class="source-meta svelte-hu4xb6"><!> <span class="source-domain svelte-hu4xb6"> </span> <span class="source-category svelte-hu4xb6"> </span></div> <div class="source-stats svelte-hu4xb6"><div class="stat svelte-hu4xb6"><span class="stat-label svelte-hu4xb6">Imported:</span> <span class="stat-value svelte-hu4xb6"> </span></div> <div class="stat svelte-hu4xb6"><span class="stat-label svelte-hu4xb6">Last Checked:</span> <span class="stat-value svelte-hu4xb6"> </span></div> <!></div> <div class="source-actions-bottom svelte-hu4xb6"><!></div>',1),il=v('<div class="empty-state svelte-hu4xb6"><span class="empty-icon svelte-hu4xb6">üìö</span> <h3 class="svelte-hu4xb6">No Sources Found</h3> <p class="svelte-hu4xb6">Import some web content to get started, or adjust your search filters.</p> <!></div>'),ol=v('<section class="content-section svelte-hu4xb6"><div class="section-header svelte-hu4xb6"><div class="section-title-group svelte-hu4xb6"><h2 class="section-title svelte-hu4xb6">Content Sources</h2> <p class="section-subtitle svelte-hu4xb6">Manage and organize your imported content</p></div> <div class="section-controls svelte-hu4xb6"><div class="search-container svelte-hu4xb6"><!></div> <div class="view-toggle svelte-hu4xb6"><button aria-label="Grid view" type="button">‚äû</button> <button aria-label="List view" type="button">‚ò∞</button></div> <!></div></div> <!> <div></div> <!></section>'),nl=v('<section class="content-section svelte-hu4xb6"><!></section>'),vl=v('<div class="history-item svelte-hu4xb6"><div class="history-info svelte-hu4xb6"><h4 class="svelte-hu4xb6"> </h4> <p class="svelte-hu4xb6"> </p> <span class="history-date svelte-hu4xb6"> </span></div> <!></div>'),cl=v('<div class="transformation-history svelte-hu4xb6"><h3 class="svelte-hu4xb6">Recent Transformations</h3> <div class="history-list svelte-hu4xb6"></div></div>'),dl=v('<div class="empty-state svelte-hu4xb6"><span class="empty-icon svelte-hu4xb6">‚ú®</span> <h3 class="svelte-hu4xb6">No Transformations Yet</h3> <p class="svelte-hu4xb6">Analyze your content first to discover transformation opportunities.</p> <!></div>'),ul=v('<section class="content-section svelte-hu4xb6"><div class="transform-header svelte-hu4xb6"><h2 class="svelte-hu4xb6">Content Transformation</h2> <p class="svelte-hu4xb6">Transform static content into interactive learning experiences</p></div> <div class="transformer-panel svelte-hu4xb6"><!></div> <!></section>'),_l=v('<div><header class="dashboard-header svelte-hu4xb6"><div class="header-content svelte-hu4xb6"><h1 class="dashboard-title svelte-hu4xb6">Interactive Content Hub</h1> <p class="dashboard-subtitle svelte-hu4xb6">Transform static content into engaging interactive experiences</p></div> <div class="stats-grid svelte-hu4xb6"><div class="stat-card svelte-hu4xb6"><div class="stat-value svelte-hu4xb6"> </div> <div class="stat-label svelte-hu4xb6">Sources</div></div> <div class="stat-card svelte-hu4xb6"><div class="stat-value svelte-hu4xb6"> </div> <div class="stat-label svelte-hu4xb6">Content Items</div></div> <div class="stat-card svelte-hu4xb6"><div class="stat-value svelte-hu4xb6"> </div> <div class="stat-label svelte-hu4xb6">Opportunities</div></div> <div class="stat-card svelte-hu4xb6"><div class="stat-value svelte-hu4xb6"> </div> <div class="stat-label svelte-hu4xb6">Active Jobs</div></div></div></header> <!> <!> <main class="dashboard-content"><!></main> <!></div>'),fl=v("<!> <!>",1);function bi(w,a){ut(a,!0);let n=H("sources"),A=H(null),J=H(null),p=H("grid"),W=H("date"),z=H("desc"),j=H(!1),S=H(!1),me=H(dt([])),ne=ha,ye=pa;const Se=Be(()=>()=>[{id:"import",label:"Import",icon:"üì•",active:e(n)==="import"},{id:"sources",label:"Sources",icon:"üìö",active:e(n)==="sources",badge:ne().length||void 0},{id:"analyze",label:"Analyze",icon:"üîç",active:e(n)==="analyze"},{id:"transform",label:"Transform",icon:"‚ú®",active:e(n)==="transform"}]);function te(){i(S,window.innerWidth<768)}Lt(()=>(te(),window.addEventListener("resize",te),i(me,[{id:"1",title:"Processing ML Research Paper",progress:75,status:"processing",type:"import"},{id:"2",title:"Transforming Web Article",progress:100,status:"completed",type:"transform"}],!0),()=>window.removeEventListener("resize",te)));function K(m){i(A,m,!0);const P=We.sources.items[m];P&&Ae.setCurrentSource(P)}function T(m){i(n,m.detail.item.id,!0)}function I(m){const P=typeof m=="string"?new Date(m):m;return P.toLocaleDateString()+" "+P.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function ve(m){switch(m){case"active":return"success";case"updated":return"warning";case"error":return"error";case"removed":return"secondary";default:return"secondary"}}function N(m){return`https://www.google.com/s2/favicons?domain=${m}&sz=32`}function Y(m){confirm("Are you sure you want to delete this source?")&&(Ae.removeSource(m),e(A)===m&&(i(A,null),i(J,null)))}async function fe(m){const P=We.sources.items[m];if(P){Ae.setSourcesLoading(!0);try{Ae.updateSource(m,{lastChecked:new Date,status:"active"}),Ae.addNotification({type:"success",message:`Refreshed source: ${P.title}`})}catch(L){Ae.addNotification({type:"error",message:`Failed to refresh source: ${L instanceof Error?L.message:"Unknown error"}`})}finally{Ae.setSourcesLoading(!1)}}}function ze(m){return[...m].sort((P,L)=>{let G=0;switch(e(W)){case"title":G=P.title.localeCompare(L.title);break;case"domain":G=P.domain.localeCompare(L.domain);break;case"status":G=P.status.localeCompare(L.status);break;case"date":default:G=new Date(P.importDate).getTime()-new Date(L.importDate).getTime();break}return e(z)==="asc"?G:-G})}const Te=Be(()=>()=>ze(ne()));var ce=fl(),u=_e(ce);Ba(u,{maxWidth:"full",padding:"md",children:(m,P)=>{var L=_l();let G;var re=r(L),U=s(r(re),2),E=r(U),D=r(E),R=r(D,!0);t(D),ue(2),t(E);var d=s(E,2),f=r(d),g=r(f,!0);t(f),ue(2),t(d);var k=s(d,2),C=r(k),F=r(C,!0);t(C),ue(2),t(k);var ae=s(k,2),$=r(ae),q=r($,!0);t($),ue(2),t(ae),t(U),t(re);var B=s(re,2);{var c=ee=>{var se=Gs(),X=s(r(se),2);Ye(X,21,()=>e(me),de=>de.id,(de,ie)=>{var ge=Ys(),pe=r(ge),he=r(pe),oe=r(he,!0);t(he);var Ie=s(he,2);{let be=Be(()=>e(ie).status==="completed"?"success":e(ie).status==="error"?"error":"warning");nt(Ie,{get variant(){return e(be)},children:(we,ke)=>{ue();var Ce=xe();b(()=>_(Ce,e(ie).status)),l(we,Ce)},$$slots:{default:!0}})}t(pe);var le=s(pe,2);{var Q=be=>{Ma(be,{get value(){return e(ie).progress},max:100,class:"job-progress"})};h(le,be=>{e(ie).status==="processing"&&be(Q)})}t(ge),b(()=>_(oe,e(ie).title)),l(de,ge)}),t(X),t(se),l(ee,se)};h(B,ee=>{e(me).length>0&&ee(c)})}var o=s(B,2);{var y=ee=>{var se=$s();Ye(se,21,()=>e(Se),X=>X.id,(X,de)=>{var ie=Xs();let ge;ie.__click=[Zs,n,de];var pe=r(ie),he=r(pe,!0);t(pe);var oe=s(pe,2),Ie=r(oe,!0);t(oe);var le=s(oe,2);{var Q=be=>{nt(be,{variant:"primary",class:"tab-badge",children:(we,ke)=>{ue();var Ce=xe();b(()=>_(Ce,e(de).badge)),l(we,Ce)},$$slots:{default:!0}})};h(le,be=>{e(de).badge&&be(Q)})}t(ie),b(be=>{ge=Ve(ie,1,"tab-button svelte-hu4xb6",null,ge,be),_(he,e(de).icon),_(Ie,e(de).label)},[()=>({active:e(n)===e(de).id})]),l(X,ie)}),t(se),l(ee,se)};h(o,ee=>{e(S)||ee(y)})}var O=s(o,2),M=r(O);ea(M,{context:{component:"EnhancedWebContentDashboard",operation:"render"},children:(ee,se)=>{var X=Pe(),de=_e(X);{var ie=pe=>{var he=el(),oe=r(he);ga(oe,{}),t(he),l(pe,he)},ge=pe=>{var he=Pe(),oe=_e(he);{var Ie=Q=>{var be=ol(),we=r(be),ke=s(r(we),2),Ce=r(ke),Ee=r(Ce);It(Ee,{placeholder:"Search sources...",onchange:()=>Ae.setSearchQuery(We.ui.searchQuery),class:"search-input",get value(){return We.ui.searchQuery},set value(Oe){We.ui.searchQuery=Oe}}),t(Ce);var Re=s(Ce,2),Fe=r(Re);let Qe;Fe.__click=[tl,p];var De=s(Fe,2);let Ne;De.__click=[al,p],t(Re);var Je=s(Re,2);je(Je,{onclick:()=>i(j,!e(j)),variant:"outline",class:"filters-toggle",children:(Oe,qe)=>{ue();var Ke=xe("üîç Filters");l(Oe,Ke)},$$slots:{default:!0}}),t(ke),t(we);var $e=s(we,2);{var vt=Oe=>{var qe=rl(),Ke=r(qe),rt=s(r(Ke),2);rt.__change=()=>Ae.setFilters({status:We.ui.filters.status});var ft=r(rt);ft.value=ft.__value="all";var st=s(ft);st.value=st.__value="active";var pt=s(st);pt.value=pt.__value="updated";var ht=s(pt);ht.value=ht.__value="error",t(rt),t(Ke);var it=s(Ke,2),mt=s(r(it),2),bt=r(mt);bt.value=bt.__value="date";var zt=s(bt);zt.value=zt.__value="title";var gt=s(zt);gt.value=gt.__value="domain";var qt=s(gt);qt.value=qt.__value="status",t(mt),t(it);var Tt=s(it,2),He=s(r(Tt),2),tt=r(He);tt.value=tt.__value="desc";var at=s(tt);at.value=at.__value="asc",t(He),t(Tt),t(qe),Nt(rt,()=>We.ui.filters.status,lt=>We.ui.filters.status=lt),Nt(mt,()=>e(W),lt=>i(W,lt)),Nt(He,()=>e(z),lt=>i(z,lt)),l(Oe,qe)};h($e,Oe=>{e(j)&&Oe(vt)})}var ct=s($e,2);let yt;Ye(ct,21,()=>e(Te),Oe=>Oe.id,(Oe,qe)=>{{let Ke=Be(()=>`source-card ${e(p)}-view ${e(A)===e(qe).id?"selected":""}`);Pt(Oe,{get class(){return e(Ke)},children:(rt,ft)=>{var st=ll(),pt=_e(st),ht=r(pt),it=r(ht),mt=s(it,2),bt=r(mt),zt=r(bt,!0);t(bt);var gt=s(bt,2),qt=r(gt,!0);t(gt),t(mt),t(ht);var Tt=s(ht,2),He=r(Tt);je(He,{onclick:()=>fe(e(qe).id),variant:"outline",size:"sm","aria-label":"Refresh source",children:(ot,xt)=>{ue();var wt=xe("üîÑ");l(ot,wt)},$$slots:{default:!0}});var tt=s(He,2);je(tt,{onclick:()=>Y(e(qe).id),variant:"outline",size:"sm","aria-label":"Delete source",children:(ot,xt)=>{ue();var wt=xe("üóëÔ∏è");l(ot,wt)},$$slots:{default:!0}}),t(Tt),t(pt);var at=s(pt,2),lt=r(at);{let ot=Be(()=>ve(e(qe).status));nt(lt,{get variant(){return e(ot)},children:(xt,wt)=>{ue();var Et=xe();b(()=>_(Et,e(qe).status)),l(xt,Et)},$$slots:{default:!0}})}var Jt=s(lt,2),ya=r(Jt,!0);t(Jt);var ta=s(Jt,2),wa=r(ta,!0);t(ta),t(at);var Vt=s(at,2),Kt=r(Vt),aa=s(r(Kt),2),ka=r(aa,!0);t(aa),t(Kt);var Yt=s(Kt,2),ra=s(r(Yt),2),Sa=r(ra,!0);t(ra),t(Yt);var za=s(Yt,2);{var Ta=ot=>{var xt=sl(),wt=s(r(xt),2),Et=r(wt,!0);t(wt),t(xt),b(()=>_(Et,e(qe).usage.timesReferenced)),l(ot,xt)};h(za,ot=>{e(qe).usage.timesReferenced>0&&ot(Ta)})}t(Vt);var sa=s(Vt,2),Ca=r(sa);{let ot=Be(()=>e(A)===e(qe).id?"primary":"outline");je(Ca,{onclick:()=>K(e(qe).id),get variant(){return e(ot)},size:"sm",children:(xt,wt)=>{ue();var Et=xe();b(()=>_(Et,e(A)===e(qe).id?"Selected":"Select")),l(xt,Et)},$$slots:{default:!0}})}t(sa),b((ot,xt,wt)=>{Ue(it,"src",ot),Ue(it,"alt",e(qe).domain),_(zt,e(qe).title),_(qt,e(qe).url),_(ya,e(qe).domain),_(wa,e(qe).metadata.category),_(ka,xt),_(Sa,wt)},[()=>N(e(qe).domain),()=>I(e(qe).importDate),()=>I(e(qe).lastChecked)]),Ge("error",it,ot=>ot.currentTarget.style.display="none"),$t(it),l(rt,st)},$$slots:{default:!0}})}}),t(ct);var Ze=s(ct,2);{var et=Oe=>{var qe=il(),Ke=s(r(qe),6);je(Ke,{onclick:()=>i(n,"import"),variant:"primary",children:(rt,ft)=>{ue();var st=xe("Import Content");l(rt,st)},$$slots:{default:!0}}),t(qe),l(Oe,qe)};h(Ze,Oe=>{e(Te).length===0&&Oe(et)})}t(be),b((Oe,qe,Ke)=>{Qe=Ve(Fe,1,"view-button svelte-hu4xb6",null,Qe,Oe),Ne=Ve(De,1,"view-button svelte-hu4xb6",null,Ne,qe),yt=Ve(ct,1,"sources-container svelte-hu4xb6",null,yt,Ke)},[()=>({active:e(p)==="grid"}),()=>({active:e(p)==="list"}),()=>({"list-view":e(p)==="list"})]),l(Q,be)},le=Q=>{var be=Pe(),we=_e(be);{var ke=Ee=>{var Re=nl(),Fe=r(Re);ba(Fe,{get contentId(){return e(J)},autoAnalyze:!0}),t(Re),l(Ee,Re)},Ce=Ee=>{var Re=Pe(),Fe=_e(Re);{var Qe=De=>{var Ne=ul(),Je=s(r(Ne),2),$e=r(Je);xa($e,{get contentId(){return e(J)}}),t(Je);var vt=s(Je,2);{var ct=Ze=>{var et=cl(),Oe=s(r(et),2);Ye(Oe,21,()=>We.transformation.transformationHistory.slice(-5),qe=>qe.id||qe.timestamp,(qe,Ke)=>{var rt=vl(),ft=r(rt),st=r(ft),pt=r(st,!0);t(st);var ht=s(st,2),it=r(ht);t(ht);var mt=s(ht,2),bt=r(mt,!0);t(mt),t(ft);var zt=s(ft,2);nt(zt,{variant:"success",children:(gt,qt)=>{ue();var Tt=xe("Completed");l(gt,Tt)},$$slots:{default:!0}}),t(rt),b(gt=>{_(pt,e(Ke).title),_(it,`Type: ${e(Ke).type??""}`),_(bt,gt)},[()=>I(e(Ke).timestamp)]),l(qe,rt)}),t(Oe),t(et),l(Ze,et)},yt=Ze=>{var et=dl(),Oe=s(r(et),6);je(Oe,{onclick:()=>i(n,"analyze"),variant:"primary",children:(qe,Ke)=>{ue();var rt=xe("Analyze Content");l(qe,rt)},$$slots:{default:!0}}),t(et),l(Ze,et)};h(vt,Ze=>{We.transformation.transformationHistory.length>0?Ze(ct):Ze(yt,!1)})}t(Ne),l(De,Ne)};h(Fe,De=>{e(n)==="transform"&&De(Qe)},!0)}l(Ee,Re)};h(we,Ee=>{e(n)==="analyze"?Ee(ke):Ee(Ce,!1)},!0)}l(Q,be)};h(oe,Q=>{e(n)==="sources"?Q(Ie):Q(le,!1)},!0)}l(pe,he)};h(de,pe=>{e(n)==="import"?pe(ie):pe(ge,!1)})}l(ee,X)},$$slots:{default:!0}}),t(O);var V=s(O,2);{var Z=ee=>{Fa(ee,{get items(){return e(Se)},position:"bottom",variant:"tabs",onnavigate:T})};h(V,ee=>{e(S)&&ee(Z)})}t(L),b((ee,se,X,de,ie)=>{G=Ve(L,1,"enhanced-dashboard svelte-hu4xb6",null,G,ee),_(R,se),_(g,X),_(F,de),_(q,ie)},[()=>({mobile:e(S)}),()=>ye().totalSources,()=>ye().totalContent,()=>ye().transformationOpportunities,()=>e(me).filter(ee=>ee.status==="processing").length]),l(m,L)},$$slots:{default:!0}});var x=s(u,2);Na(x,{}),l(w,ce),_t()}Me(["click","change"]);var pl=v("<!> Importing...",1),hl=v("<!> Batch Importing...",1),ml=v('<div class="divider svelte-whuurx">OR</div> <div class="batch-input-section svelte-whuurx"><label for="batch-urls" class="svelte-whuurx">Batch Import URLs (one per line):</label> <textarea id="batch-urls" placeholder="Enter multiple URLs, one per line" rows="8" class="svelte-whuurx"></textarea> <!></div>',1),gl=v('<div class="import-progress svelte-whuurx"><h3>Import Progress</h3> <div class="progress-bar svelte-whuurx"><div class="progress-fill svelte-whuurx"></div></div> <p class="progress-status svelte-whuurx"> </p> <div class="progress-stats svelte-whuurx"><span class="stat success svelte-whuurx"> </span> <span class="stat error svelte-whuurx"> </span> <span class="stat svelte-whuurx"> </span></div></div>'),bl=v('<div class="error-message svelte-whuurx"> </div>'),xl=v('<div class="web-content-importer svelte-whuurx"><div class="importer-section svelte-whuurx"><h3 class="section-title svelte-whuurx">Import Web Content</h3> <div class="url-input-section svelte-whuurx"><label for="single-url" class="svelte-whuurx">Import Single URL:</label> <div class="url-input-container svelte-whuurx"><!> <!></div></div> <!> <div class="import-options svelte-whuurx"><h3 class="svelte-whuurx">Import Options</h3> <div class="options-grid svelte-whuurx"><label class="option-item"><input type="checkbox"/> <span>Skip advanced processing (faster import)</span></label> <label class="option-item"><input type="checkbox"/> <span>Enable AI content enhancements</span></label></div></div> <!> <!></div></div>');function ga(w,a){ut(a,!0);let n=Le(a,"allowBatchImport",3,!0),A=H(""),J=H(""),p=H(!1),W=H(null),z=H(dt({total:0,completed:0,failed:0,overallProgress:0,currentStage:"Idle"})),j=H(null),S=H(!1),me=H(!1);Ht();async function ne(){if(i(W,null),!e(A).trim()){i(W,"URL cannot be empty.");return}if(!Se(e(A))){i(W,"Invalid URL format.");return}i(p,!0),i(z,{total:1,completed:0,failed:0,overallProgress:0,currentStage:"Starting"},!0);const te=await At.handleAsync(()=>Ot.startProcessing([e(A)],{skipProcessing:e(S),enableAiEnhancements:e(me)}),{operation:"single-import",component:"WebContentImporter",metadata:{url:e(A)}},{showToast:!0,retryable:!0,maxRetries:2,onError:K=>{i(W,At.getUserFriendlyMessage(K,{operation:"single-import",component:"WebContentImporter"}),!0),a.onImportError?.(e(W))}});te.success&&i(j,te.data.id,!0),i(p,!1)}async function ye(){i(W,null);const te=e(J).split(`
`).map(T=>T.trim()).filter(T=>T&&Se(T));if(te.length===0){i(W,"No valid URLs found for batch import.");return}i(p,!0),i(z,{total:te.length,completed:0,failed:0,overallProgress:0,currentStage:"Starting Batch"},!0);const K=await At.handleAsync(()=>Ot.startBatchProcessing(te,{skipProcessing:e(S),enableAiEnhancements:e(me)}),{operation:"batch-import",component:"WebContentImporter",metadata:{urlCount:te.length}},{showToast:!0,retryable:!0,maxRetries:1,onError:T=>{i(W,At.getUserFriendlyMessage(T,{operation:"batch-import",component:"WebContentImporter"}),!0),a.onImportError?.(e(W))}});K.success&&i(j,K.data.id,!0),i(p,!1)}function Se(te){try{return new URL(te),!0}catch{return!1}}Lt(()=>{const te=Ot.onProgressUpdate(I=>{e(j)&&I.jobId===e(j)?i(z,I,!0):!e(j)&&I.total===1&&i(z,I,!0)}),K=Ot.onJobComplete(I=>{I.id===e(j)&&(i(z,{total:I.total,completed:I.completed,failed:I.failed,overallProgress:100,currentStage:"Completed"},!0),i(j,null))}),T=Ot.onJobError((I,ve)=>{(I===e(j)||!e(j)&&e(z).total===1)&&(i(W,ve.message,!0),a.onImportError?.(ve.message))});return()=>{te(),K(),T()}}),ea(w,{context:{component:"WebContentImporter",operation:"render"},showDetails:!1,enableRetry:!0,children:(te,K)=>{var T=xl(),I=r(T),ve=s(r(I),2),N=s(r(ve),2),Y=r(N);It(Y,{id:"single-url",type:"url",placeholder:"Enter URL to import (e.g., https://example.com/article)",get disabled(){return e(p)},class:"flex-1",get value(){return e(A)},set value(D){i(A,D,!0)}});var fe=s(Y,2);{let D=Be(()=>e(p)||!e(A).trim());je(fe,{onclick:ne,get disabled(){return e(D)},children:(R,d)=>{var f=Pe(),g=_e(f);{var k=F=>{var ae=pl(),$=_e(ae);Rt($,{size:"sm",class:"mr-2"}),ue(),l(F,ae)},C=F=>{var ae=xe("Import");l(F,ae)};h(g,F=>{e(p)&&e(z).total===1?F(k):F(C,!1)})}l(R,f)},$$slots:{default:!0}})}t(N),t(ve);var ze=s(ve,2);{var Te=D=>{var R=ml(),d=s(_e(R),2),f=s(r(d),2);Bt(f);var g=s(f,2);{let k=Be(()=>e(p)||!e(J).trim());je(g,{onclick:ye,get disabled(){return e(k)},children:(C,F)=>{var ae=Pe(),$=_e(ae);{var q=c=>{var o=hl(),y=_e(o);Rt(y,{size:"sm",class:"mr-2"}),ue(),l(c,o)},B=c=>{var o=xe("Batch Import");l(c,o)};h($,c=>{e(p)&&e(j)?c(q):c(B,!1)})}l(C,ae)},$$slots:{default:!0}})}t(d),b(()=>f.disabled=e(p)),jt(f,()=>e(J),k=>i(J,k)),l(D,R)};h(ze,D=>{n()&&D(Te)})}var ce=s(ze,2),u=s(r(ce),2),x=r(u),m=r(x);Xe(m),ue(2),t(x);var P=s(x,2),L=r(P);Xe(L),ue(2),t(P),t(u),t(ce);var G=s(ce,2);{var re=D=>{var R=gl(),d=s(r(R),2),f=r(d);t(d);var g=s(d,2),k=r(g);t(g);var C=s(g,2),F=r(C),ae=r(F);t(F);var $=s(F,2),q=r($);t($);var B=s($,2),c=r(B);t(B),t(C),t(R),b(()=>{Qt(f,`width: ${e(z).overallProgress??""}%;`),_(k,`${e(z).currentStage??""} (${e(z).completed??""} / ${e(z).total??""} completed, ${e(z).failed??""} failed)`),_(ae,`Success: ${e(z).completed??""}`),_(q,`Failed: ${e(z).failed??""}`),_(c,`Total: ${e(z).total??""}`)}),l(D,R)};h(G,D=>{(e(p)||e(z).completed>0||e(z).failed>0)&&D(re)})}var U=s(G,2);{var E=D=>{var R=bl(),d=r(R);t(R),b(()=>_(d,`‚ö†Ô∏è ${e(W)??""}`)),l(D,R)};h(U,D=>{e(W)&&D(E)})}t(I),t(T),b(()=>{m.disabled=e(p),L.disabled=e(p)}),oa(m,()=>e(S),D=>i(S,D)),oa(L,()=>e(me),D=>i(me,D)),l(te,T)},$$slots:{default:!0}}),_t()}var yl=v('<p class="svelte-d883hr">Analyzing: <strong> </strong></p>'),wl=v('<p class="svelte-d883hr">Select content to analyze for interactive opportunities</p>'),kl=v("<!> Analyzing...",1),Sl=v('<div class="analysis-stats svelte-d883hr"><!> <!> <!></div>'),zl=v("<!> Transforming...",1),Tl=(w,a,n)=>a(e(n).id),Cl=v('<span class="parameter-tag svelte-d883hr"> </span>'),ql=v('<div class="detail-item svelte-d883hr"><strong class="svelte-d883hr">Parameters:</strong> <div class="parameters-list svelte-d883hr"></div></div>'),El=v('<div class="detail-item svelte-d883hr"><strong class="svelte-d883hr">Reasoning:</strong> <p class="reasoning-text svelte-d883hr"> </p></div>'),Al=v('<div class="opportunity-header svelte-d883hr"><div class="opportunity-info svelte-d883hr"><span class="opportunity-icon svelte-d883hr"> </span> <div><h4 class="svelte-d883hr"> </h4> <p class="opportunity-description svelte-d883hr"> </p></div></div> <div class="opportunity-meta svelte-d883hr"><!> <label class="opportunity-checkbox svelte-d883hr"><input type="checkbox" class="svelte-d883hr"/></label></div></div> <div class="opportunity-details svelte-d883hr"><div class="detail-item svelte-d883hr"><strong class="svelte-d883hr">Type:</strong> </div> <div class="detail-item svelte-d883hr"><strong class="svelte-d883hr">Source:</strong> </div> <!> <!></div>',1),Pl=v('<div class="no-opportunities svelte-d883hr"><p>No interactive opportunities found in this content.</p> <p>Try analyzing different content or adjusting the analysis parameters.</p></div>'),Dl=v('<div class="interactive-preview-section"><!></div>'),Il=v('<div class="opportunities-section svelte-d883hr"><div class="opportunities-header svelte-d883hr"><h3 class="svelte-d883hr">Interactive Opportunities</h3> <div class="selection-controls svelte-d883hr"><!> <!> <!></div></div> <div class="opportunities-grid svelte-d883hr"></div> <!></div> <!>',1),Rl=v('<div class="analysis-controls svelte-d883hr"><!> <!></div> <!>',1),Ll=v('<div class="no-content-selected svelte-d883hr"><div class="empty-state svelte-d883hr"><span class="empty-icon svelte-d883hr">üîç</span> <h3 class="svelte-d883hr">No Content Selected</h3> <p class="svelte-d883hr">Select content from your imported sources to analyze for interactive opportunities.</p></div></div>'),Ul=v('<div class="web-content-analyzer svelte-d883hr"><div class="analyzer-header svelte-d883hr"><h2 class="svelte-d883hr">Content Analysis & Transformation</h2> <!></div> <!></div>');function ba(w,a){ut(a,!0);const n=fa("web-content-analyzer");let A=Le(a,"autoAnalyze",3,!1),J=H(null),p=H(null),W=H(!1),z=H(dt([])),j=H(null),S=H(!1);Ut(()=>{a.contentId?i(J,We.content.items[a.contentId],!0):i(J,We.content.currentContent,!0),e(J)&&A()&&!e(p)&&me()});async function me(){if(!e(J)){Ae.addNotification({type:"warning",message:"No content selected for analysis"});return}i(W,!0),Ae.setTransformationAnalyzing(!0);try{n.info(`Analyzing content: ${e(J).id}`);const u=await Zt.analyzeContent(e(J).id);i(p,{contentId:e(J).id,opportunities:u.opportunities,analyzedAt:new Date,stats:{totalOpportunities:u.opportunities.length,highConfidence:u.opportunities.filter(x=>x.confidence>.8).length,mediumConfidence:u.opportunities.filter(x=>x.confidence>.5&&x.confidence<=.8).length,lowConfidence:u.opportunities.filter(x=>x.confidence<=.5).length}},!0),Ae.setTransformationOpportunities(u.opportunities),Ae.addNotification({type:"success",message:`Found ${u.opportunities.length} interactive opportunities`})}catch(u){n.error("Content analysis failed:",u),Ae.addNotification({type:"error",message:`Analysis failed: ${u instanceof Error?u.message:"Unknown error"}`})}finally{i(W,!1),Ae.setTransformationAnalyzing(!1)}}async function ne(){if(e(z).length===0){Ae.addNotification({type:"warning",message:"Please select opportunities to transform"});return}i(S,!0);const u=e(z).map(x=>e(p).opportunities.find(m=>m.id===x)).filter(Boolean);try{n.info(`Transforming ${u.length} opportunities`);for(const x of u){const m=await Zt.transform(e(J).id,{type:x.type,domain:x.domain,parameters:x.parameters});Ae.addTransformationToHistory(m),Ae.setCurrentTransformation(m),i(j,m.interactiveBlocks,!0)}Ae.addNotification({type:"success",message:`Successfully transformed ${u.length} opportunities`}),i(z,[],!0)}catch(x){n.error("Transformation failed:",x),Ae.addNotification({type:"error",message:`Transformation failed: ${x instanceof Error?x.message:"Unknown error"}`})}finally{e(j)||i(j,null),i(S,!1)}}function ye(u){e(z).includes(u)?i(z,e(z).filter(x=>x!==u),!0):i(z,[...e(z),u],!0)}function Se(){e(p)&&i(z,e(p).opportunities.map(u=>u.id),!0)}function te(){i(z,[],!0)}function K(u){return u>.8?"success":u>.5?"warning":"secondary"}function T(u){switch(u){case"visualization":return"üìä";case"simulation":return"üî¨";case"interactive-chart":return"üìà";case"quiz":return"‚ùì";case"flashcard":return"üÉè";case"code-playground":return"üíª";case"neural-network":return"üß†";case"algorithm-viz":return"‚öôÔ∏è";default:return"‚ú®"}}var I=Ul(),ve=r(I),N=s(r(ve),2);{var Y=u=>{var x=yl(),m=s(r(x)),P=r(m,!0);t(m),t(x),b(()=>_(P,e(J).title)),l(u,x)},fe=u=>{var x=wl();l(u,x)};h(N,u=>{e(J)?u(Y):u(fe,!1)})}t(ve);var ze=s(ve,2);{var Te=u=>{var x=Rl(),m=_e(x),P=r(m);je(P,{onclick:me,get disabled(){return e(W)},variant:"primary",children:(E,D)=>{var R=Pe(),d=_e(R);{var f=k=>{var C=kl(),F=_e(C);Rt(F,{size:"sm"}),ue(),l(k,C)},g=k=>{var C=xe("üîç Analyze Content");l(k,C)};h(d,k=>{e(W)?k(f):k(g,!1)})}l(E,R)},$$slots:{default:!0}});var L=s(P,2);{var G=E=>{var D=Sl(),R=r(D);nt(R,{variant:"secondary",children:(g,k)=>{ue();var C=xe();b(()=>_(C,`${e(p).stats.totalOpportunities??""} opportunities`)),l(g,C)},$$slots:{default:!0}});var d=s(R,2);nt(d,{variant:"success",children:(g,k)=>{ue();var C=xe();b(()=>_(C,`${e(p).stats.highConfidence??""} high confidence`)),l(g,C)},$$slots:{default:!0}});var f=s(d,2);nt(f,{variant:"warning",children:(g,k)=>{ue();var C=xe();b(()=>_(C,`${e(p).stats.mediumConfidence??""} medium confidence`)),l(g,C)},$$slots:{default:!0}}),t(D),l(E,D)};h(L,E=>{e(p)&&E(G)})}t(m);var re=s(m,2);{var U=E=>{var D=Il(),R=_e(D),d=r(R),f=s(r(d),2),g=r(f);je(g,{onclick:Se,variant:"outline",size:"sm",children:(c,o)=>{ue();var y=xe("Select All");l(c,y)},$$slots:{default:!0}});var k=s(g,2);je(k,{onclick:te,variant:"outline",size:"sm",children:(c,o)=>{ue();var y=xe("Clear All");l(c,y)},$$slots:{default:!0}});var C=s(k,2);{let c=Be(()=>e(z).length===0||e(S));je(C,{onclick:ne,get disabled(){return e(c)},variant:"primary",size:"sm",children:(o,y)=>{var O=Pe(),M=_e(O);{var V=ee=>{var se=zl(),X=_e(se);Rt(X,{size:"sm"}),ue(),l(ee,se)},Z=ee=>{var se=xe();b(()=>_(se,`Transform Selected (${e(z).length??""})`)),l(ee,se)};h(M,ee=>{e(S)?ee(V):ee(Z,!1)})}l(o,O)},$$slots:{default:!0}})}t(f),t(d);var F=s(d,2);Ye(F,21,()=>e(p).opportunities,c=>c.id,(c,o)=>{Pt(c,{class:"opportunity-card",children:(y,O)=>{var M=Al(),V=_e(M),Z=r(V),ee=r(Z),se=r(ee,!0);t(ee);var X=s(ee,2),de=r(X),ie=r(de,!0);t(de);var ge=s(de,2),pe=r(ge,!0);t(ge),t(X),t(Z);var he=s(Z,2),oe=r(he);{let De=Be(()=>K(e(o).confidence));nt(oe,{get variant(){return e(De)},children:(Ne,Je)=>{ue();var $e=xe();b(vt=>_($e,`${vt??""}% confidence`),[()=>Math.round(e(o).confidence*100)]),l(Ne,$e)},$$slots:{default:!0}})}var Ie=s(oe,2),le=r(Ie);Xe(le),le.__change=[Tl,ye,o],t(Ie),t(he),t(V);var Q=s(V,2),be=r(Q),we=s(r(be));t(be);var ke=s(be,2),Ce=s(r(ke));t(ke);var Ee=s(ke,2);{var Re=De=>{var Ne=ql(),Je=s(r(Ne),2);Ye(Je,21,()=>Object.entries(e(o).parameters),([$e,vt])=>$e,($e,vt)=>{var ct=Be(()=>_a(e(vt),2));let yt=()=>e(ct)[0],Ze=()=>e(ct)[1];var et=Cl(),Oe=r(et);t(et),b(()=>_(Oe,`${yt()??""}: ${Ze().type??""}`)),l($e,et)}),t(Je),t(Ne),l(De,Ne)};h(Ee,De=>{e(o).parameters&&Object.keys(e(o).parameters).length>0&&De(Re)})}var Fe=s(Ee,2);{var Qe=De=>{var Ne=El(),Je=s(r(Ne),2),$e=r(Je,!0);t(Je),t(Ne),b(()=>_($e,e(o).reasoning)),l(De,Ne)};h(Fe,De=>{e(o).reasoning&&De(Qe)})}t(Q),b((De,Ne)=>{_(se,De),_(ie,e(o).title),_(pe,e(o).description),Wt(le,Ne),_(we,` ${e(o).type??""}`),_(Ce,` ${e(o).sourceElement??""}`)},[()=>T(e(o).type),()=>e(z).includes(e(o).id)]),l(y,M)},$$slots:{default:!0}})}),t(F);var ae=s(F,2);{var $=c=>{var o=Pl();l(c,o)};h(ae,c=>{e(p).opportunities.length===0&&c($)})}t(R);var q=s(R,2);{var B=c=>{var o=Dl(),y=r(o);Oa(y,{get blocks(){return e(j)}}),t(o),l(c,o)};h(q,c=>{e(j)&&c(B)})}l(E,D)};h(re,E=>{e(p)&&E(U)})}l(u,x)},ce=u=>{var x=Ll();l(u,x)};h(ze,u=>{e(J)?u(Te):u(ce,!1)})}t(I),l(w,I),_t()}Me(["change"]);var Ol=v("<!> Transforming...",1),Bl=v('<div class="result"><div class="stats svelte-ugxg1i"><!> <!></div></div>'),Nl=v('<div class="header svelte-ugxg1i"><h3>Transform Content</h3> <div class="controls svelte-ugxg1i"><select class="svelte-ugxg1i"><option>Auto</option><option>Visualization</option><option>Simulation</option><option>Chart</option><option>Quiz</option></select> <input type="text" placeholder="Domain (optional)" class="svelte-ugxg1i"/> <!></div></div> <!>',1);function xa(w,a){ut(a,!0);let n=Le(a,"contentId",7),A=Le(a,"defaultType",3,"auto"),J=Le(a,"domain",7,""),p=H(dt(A())),W=H(!1),z=H(null);Ut(()=>{!n()&&We.content.currentContent&&n(We.content.currentContent.id)});async function j(){if(!n()){Ae.addNotification({type:"warning",message:"No content selected"});return}i(W,!0),Ae.setTransformationAnalyzing(!0);const S=await At.handleAsync(()=>Zt.transform(String(n()),{type:e(p),domain:J()}),{operation:"transform",component:"WebContentTransformer",metadata:{contentId:n(),selected_type:e(p),domain:J()}},{showToast:!0,retryable:!0,maxRetries:1});S.success&&S.data&&(i(z,S.data,!0),Ae.setCurrentTransformation(S.data),Ae.addTransformationToHistory(S.data),Ae.addNotification({type:"success",message:`Transformed (${e(p)}) successfully`})),i(W,!1),Ae.setTransformationAnalyzing(!1)}Pt(w,{class:"transformer",variant:"outlined",children:(S,me)=>{var ne=Nl(),ye=_e(ne),Se=s(r(ye),2),te=r(Se),K=r(te);K.value=K.__value="auto";var T=s(K);T.value=T.__value="visualization";var I=s(T);I.value=I.__value="simulation";var ve=s(I);ve.value=ve.__value="chart";var N=s(ve);N.value=N.__value="quiz",t(te);var Y=s(te,2);Xe(Y);var fe=s(Y,2);{let ce=Be(()=>e(W)||!n());je(fe,{onclick:j,get disabled(){return e(ce)},children:(u,x)=>{var m=Pe(),P=_e(m);{var L=re=>{var U=Ol(),E=_e(U);Rt(E,{size:"sm",class:"mr-2"}),ue(),l(re,U)},G=re=>{var U=xe("Run Transformation");l(re,U)};h(P,re=>{e(W)?re(L):re(G,!1)})}l(u,m)},$$slots:{default:!0}})}t(Se),t(ye);var ze=s(ye,2);{var Te=ce=>{var u=Bl(),x=r(u),m=r(x);nt(m,{variant:"secondary",children:(L,G)=>{ue();var re=xe();b(()=>_(re,`Blocks: ${(e(z).interactiveBlocks?.length||0)??""}`)),l(L,re)},$$slots:{default:!0}});var P=s(m,2);nt(P,{variant:"secondary",children:(L,G)=>{ue();var re=xe();b(()=>_(re,`Type: ${e(z).metadata?.transformationType??""}`)),l(L,re)},$$slots:{default:!0}}),t(x),t(u),l(ce,u)};h(ze,ce=>{e(z)&&ce(Te)})}b(()=>{te.disabled=e(W),Y.disabled=e(W)}),Nt(te,()=>e(p),ce=>i(p,ce)),jt(Y,J),l(S,ne)},$$slots:{default:!0}}),_t()}function Fl(w,a){(w.key==="Escape"||w.key==="Enter"||w.key===" ")&&a()}function Ml(w,a){w.currentTarget===w.target&&a()}var Wl=v('<div class="error-message svelte-qrddt2"> </div>'),jl=v('<div class="loading-state svelte-qrddt2"><!> <p>Loading content sources...</p></div>'),Ql=v('<div class="empty-state svelte-qrddt2"><p>No content sources added yet.</p></div>'),Hl=(w,a,n)=>a(e(n)),Jl=(w,a,n)=>{const A=w.key;(A==="Enter"||A===" ")&&a(e(n))},Vl=v('<h4 class="svelte-qrddt2"> </h4> <p class="source-url svelte-qrddt2"> </p> <div class="source-meta svelte-qrddt2"><!> <!></div> <div class="source-actions svelte-qrddt2"><!></div>',1),Kl=v('<div class="source-card svelte-qrddt2" role="button" tabindex="0"><!></div>'),Yl=v('<div class="sources-grid svelte-qrddt2"></div>'),Gl=v('<p class="svelte-qrddt2"><strong class="svelte-qrddt2">Description:</strong> </p>'),Zl=v('<p class="svelte-qrddt2"><strong class="svelte-qrddt2">Tags:</strong> <!></p>'),Xl=v('<h3 class="svelte-qrddt2"> </h3> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">URL:</strong> <a target="_blank" rel="noopener noreferrer"> </a></p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Domain:</strong> </p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Category:</strong> </p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Status:</strong> </p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Imported:</strong> </p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Last Checked:</strong> </p> <!> <!> <!>',1),$l=v('<div class="source-details-overlay svelte-qrddt2" role="dialog" tabindex="0"><div class="source-details-modal svelte-qrddt2"><!></div></div>'),ei=v('<div class="content-source-manager svelte-qrddt2"><h2 class="svelte-qrddt2">Content Sources</h2> <div class="add-source-section svelte-qrddt2"><h3 class="svelte-qrddt2">Add New Source</h3> <div role="button" tabindex="0">Drag and drop URLs here to import</div> <div class="input-group svelte-qrddt2"><!> <!> <!> <!></div></div> <!> <!> <!></div>');function xi(w,a){ut(a,!0);const n=fa("content-source-manager");let A=H(dt([])),J=H(!0),p=H(null),W=H(""),z=H("web-content"),j=H(""),S=H(null),me=H(!1);Lt(async()=>{await ne()});async function ne(){i(J,!0),i(p,null);try{const d=await Mt.listSources();i(A,d.sources,!0)}catch(d){i(p,d instanceof Error?d.message:"Failed to load sources",!0),n.error("Failed to load sources:",d)}finally{i(J,!1)}}async function ye(){if(!e(W)){alert("URL cannot be empty");return}i(J,!0),i(p,null);try{const d=e(j).split(",").map(g=>g.trim()).filter(g=>g.length>0),f=await Mt.addSource({url:e(W),category:e(z),tags:d});f.isDuplicate?alert(`Source already exists: ${f.source.title}`):(i(W,""),i(z,"web-content"),i(j,""),await ne())}catch(d){i(p,d instanceof Error?d.message:"Failed to add source",!0),n.error("Failed to add source:",d)}finally{i(J,!1)}}async function Se(d){if(confirm("Are you sure you want to delete this source?")){i(J,!0),i(p,null);try{await Mt.removeSource(d),await ne(),e(S)?.id===d&&i(S,null)}catch(f){i(p,f instanceof Error?f.message:"Failed to delete source",!0),n.error("Failed to delete source:",f)}finally{i(J,!1)}}}function te(d){i(S,d,!0)}function K(){i(S,null)}function T(d){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(d)}function I(d){d.preventDefault(),i(me,!0),d.dataTransfer.dropEffect="copy"}function ve(d){d.preventDefault(),i(me,!1)}async function N(d){d.preventDefault(),i(me,!1),i(J,!0),i(p,null);const f=[];if(d.dataTransfer&&d.dataTransfer.items)for(let g=0;g<d.dataTransfer.items.length;g++){const k=d.dataTransfer.items[g];if(k.kind==="string"&&k.type==="text/uri-list"){const C=await new Promise(F=>k.getAsString(F));f.push(C)}}else if(d.dataTransfer&&d.dataTransfer.getData("text/uri-list")){const g=d.dataTransfer.getData("text/uri-list");f.push(...g.split(/\r?\n/).filter(k=>k.trim()!==""))}if(f.length===0){alert("No valid URLs found in dropped content."),i(J,!1);return}for(const g of f)try{const k=await Ua.fetchAndProcess(g),C=await Mt.addSource({url:k.url,title:k.title,category:k.metadata.category,tags:k.metadata.tags,metadata:k.metadata});C.isDuplicate&&alert(`Source already exists: ${C.source.title}`)}catch(k){n.error(`Failed to process dropped URL ${g}:`,k),alert(`Failed to add source from ${g}: ${k instanceof Error?k.message:"Unknown error"}`)}await ne(),i(J,!1)}var Y=ei(),fe=s(r(Y),2),ze=s(r(fe),2);let Te;var ce=s(ze,2),u=r(ce);It(u,{type:"url",placeholder:"Enter URL",get value(){return e(W)},set value(d){i(W,d,!0)}});var x=s(u,2);It(x,{type:"text",placeholder:"Category (e.g., 'news', 'blog')",get value(){return e(z)},set value(d){i(z,d,!0)}});var m=s(x,2);It(m,{type:"text",placeholder:"Tags (comma-separated)",get value(){return e(j)},set value(d){i(j,d,!0)}});var P=s(m,2);je(P,{onclick:ye,variant:"primary",get disabled(){return e(J)},children:(d,f)=>{ue();var g=xe("Add Source");l(d,g)},$$slots:{default:!0}}),t(ce),t(fe);var L=s(fe,2);{var G=d=>{var f=Wl(),g=r(f);t(f),b(()=>_(g,`Error: ${e(p)??""}`)),l(d,f)};h(L,d=>{e(p)&&d(G)})}var re=s(L,2);{var U=d=>{var f=jl(),g=r(f);Rt(g,{}),ue(2),t(f),l(d,f)},E=d=>{var f=Pe(),g=_e(f);{var k=F=>{var ae=Ql();l(F,ae)},C=F=>{var ae=Yl();Ye(ae,21,()=>e(A),$=>$.id,($,q)=>{var B=Kl();B.__click=[Hl,te,q],B.__keydown=[Jl,te,q];var c=r(B);Pt(c,{children:(o,y)=>{var O=Vl(),M=_e(O),V=r(M,!0);t(M);var Z=s(M,2),ee=r(Z,!0);t(Z);var se=s(Z,2),X=r(se);nt(X,{variant:"secondary",children:(pe,he)=>{ue();var oe=xe();b(()=>_(oe,e(q).metadata.category)),l(pe,oe)},$$slots:{default:!0}});var de=s(X,2);nt(de,{variant:"secondary",children:(pe,he)=>{ue();var oe=xe();b(()=>_(oe,e(q).status)),l(pe,oe)},$$slots:{default:!0}}),t(se);var ie=s(se,2),ge=r(ie);je(ge,{variant:"danger",size:"sm",onclick:pe=>{pe.stopPropagation(),Se(e(q).id)},children:(pe,he)=>{ue();var oe=xe("Delete");l(pe,oe)},$$slots:{default:!0}}),t(ie),b(()=>{_(V,e(q).title),_(ee,e(q).url)}),l(o,O)},$$slots:{default:!0}}),t(B),l($,B)}),t(ae),l(F,ae)};h(g,F=>{e(A).length===0?F(k):F(C,!1)},!0)}l(d,f)};h(re,d=>{e(J)?d(U):d(E,!1)})}var D=s(re,2);{var R=d=>{var f=$l();f.__click=[Ml,K],f.__keydown=[Fl,K];var g=r(f),k=r(g);Pt(k,{children:(C,F)=>{var ae=Xl(),$=_e(ae),q=r($,!0);t($);var B=s($,2),c=s(r(B),2),o=r(c,!0);t(c),t(B);var y=s(B,2),O=s(r(y));t(y);var M=s(y,2),V=s(r(M));t(M);var Z=s(M,2),ee=s(r(Z));t(Z);var se=s(Z,2),X=s(r(se));t(se);var de=s(se,2),ie=s(r(de));t(de);var ge=s(de,2);{var pe=le=>{var Q=Gl(),be=s(r(Q));t(Q),b(()=>_(be,` ${e(S).metadata.description??""}`)),l(le,Q)};h(ge,le=>{e(S).metadata.description&&le(pe)})}var he=s(ge,2);{var oe=le=>{var Q=Zl(),be=s(r(Q),2);Ye(be,17,()=>e(S).metadata.tags,ua,(we,ke)=>{nt(we,{variant:"secondary",children:(Ce,Ee)=>{ue();var Re=xe();b(()=>_(Re,e(ke))),l(Ce,Re)},$$slots:{default:!0}})}),t(Q),l(le,Q)};h(he,le=>{e(S).metadata.tags&&e(S).metadata.tags.length>0&&le(oe)})}var Ie=s(he,2);je(Ie,{onclick:K,variant:"secondary",children:(le,Q)=>{ue();var be=xe("Close");l(le,be)},$$slots:{default:!0}}),b((le,Q)=>{_(q,e(S).title),Ue(c,"href",e(S).url),_(o,e(S).url),_(O,` ${e(S).domain??""}`),_(V,` ${e(S).metadata.category??""}`),_(ee,` ${e(S).status??""}`),_(X,` ${le??""}`),_(ie,` ${Q??""}`)},[()=>T(e(S).importDate),()=>T(e(S).lastChecked)]),l(C,ae)},$$slots:{default:!0}}),t(g),t(f),l(d,f)};h(D,d=>{e(S)&&d(R)})}t(Y),b(d=>Te=Ve(ze,1,"drop-zone svelte-qrddt2",null,Te,d),[()=>({dragging:e(me)})]),Ge("dragover",ze,I),Ge("dragleave",ze,ve),Ge("drop",ze,N),l(w,Y),_t()}Me(["click","keydown"]);var ti=v('<div class="font-medium text-error-800">Time:</div> <div class="text-error-700 mb-2"> </div>',1),ai=v('<div class="font-medium text-error-800">Location:</div> <div class="text-error-700 mb-2"> </div>',1),ri=v('<div class="font-medium text-error-800">Stack Trace:</div> <pre class="text-xs text-error-600 overflow-x-auto whitespace-pre-wrap"> </pre>',1),si=v('<details class="text-left mb-4"><summary class="cursor-pointer text-sm font-medium text-text-secondary hover:text-text-primary">Error Details</summary> <div class="mt-2 p-3 bg-error-50 border border-error-200 rounded text-sm"><div class="font-medium text-error-800">Error:</div> <div class="text-error-700 mb-2"> </div> <!> <!> <!></div></details>'),li=v('<div class="mt-4 p-3 bg-warning-50 border border-warning-200 rounded text-sm"><div class="font-medium text-warning-800 mb-1">Persistent Error</div> <div class="text-warning-700">This error has occurred multiple times. Consider refreshing the page or contacting support.</div></div>'),ii=v('<div class="text-center"><div class="text-4xl mb-4">‚ö†Ô∏è</div> <h3 class="text-lg font-semibold mb-2 text-error-600"> </h3> <p class="text-text-secondary mb-4"><!></p> <!> <div class="flex gap-2 justify-center flex-wrap"><!> <!> <!></div> <!></div>');function ea(w,a){ut(a,!0);let n=Le(a,"context",19,()=>({})),A=Le(a,"showDetails",3,!1),J=Le(a,"enableRetry",3,!0),p=H(!1),W=H(null),z=H(null),j=H(0),S=H(!1);Ut(()=>{a.children,e(S)||(i(p,!1),i(W,null),i(z,null),i(j,0))});function me(N){const Y=new Error(N.message),fe={filename:N.filename,lineno:N.lineno,colno:N.colno,stack:N.error?.stack,timestamp:new Date().toISOString()};ye(Y,fe)}function ne(N){const Y=new Error(`Unhandled promise rejection: ${N.reason}`),fe={reason:N.reason,promise:N.promise,timestamp:new Date().toISOString()};ye(Y,fe)}function ye(N,Y){i(p,!0),i(W,N,!0),i(z,Y,!0),i(S,!1);const fe={operation:"component-render",component:n().component||"ErrorBoundary",...n()};At.handleSync(()=>{throw N},fe,{showToast:!1,logError:!0}),a.onError&&a.onError(N,Y),a.onerror?.(N,{errorInfo:Y,context:fe}),a.onError?.(N,{errorInfo:Y,context:fe})}async function Se(){if(!e(S)){i(S,!0),Aa(j);try{a.onRetry&&await a.onRetry(),a.onretry&&await a.onretry(),setTimeout(()=>{i(p,!1),i(W,null),i(z,null),i(S,!1)},100)}catch(N){const Y=N instanceof Error?N:new Error(String(N));ye(Y,{isRetryError:!0,originalError:e(W),retryAttempt:e(j)})}}}function te(){if(e(W)&&e(z)){const N={error:{message:e(W).message,stack:e(W).stack,name:e(W).name},errorInfo:e(z),context:n(),userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString(),retryCount:e(j)};console.error("Error Report:",N)}}Lt(()=>(window.addEventListener("error",me),window.addEventListener("unhandledrejection",ne),()=>{window.removeEventListener("error",me),window.removeEventListener("unhandledrejection",ne)}));var K=Pe(),T=_e(K);{var I=N=>{var Y=Pe(),fe=_e(Y);{var ze=ce=>{var u=Pe(),x=_e(u);na(x,()=>a.fallback),l(ce,u)},Te=ce=>{Pt(ce,{variant:"outlined",padding:"lg",class:"error-boundary",children:(u,x)=>{var m=ii(),P=s(r(m),2),L=r(P,!0);t(P);var G=s(P,2),re=r(G);{var U=q=>{var B=xe();b(c=>_(B,c),[()=>At.getUserFriendlyMessage(e(W),{operation:"component-render",...n()})]),l(q,B)},E=q=>{var B=xe("An unexpected error occurred. Please try refreshing the page or contact support if the problem persists.");l(q,B)};h(re,q=>{e(W)?q(U):q(E,!1)})}t(G);var D=s(G,2);{var R=q=>{var B=si(),c=s(r(B),2),o=s(r(c),2),y=r(o,!0);t(o);var O=s(o,2);{var M=X=>{var de=ti(),ie=s(_e(de),2),ge=r(ie,!0);t(ie),b(pe=>_(ge,pe),[()=>new Date(e(z).timestamp).toLocaleString()]),l(X,de)};h(O,X=>{e(z)?.timestamp&&X(M)})}var V=s(O,2);{var Z=X=>{var de=ai(),ie=s(_e(de),2),ge=r(ie);t(ie),b(()=>_(ge,`${e(z).filename??""}:${e(z).lineno??""}:${e(z).colno??""}`)),l(X,de)};h(V,X=>{e(z)?.filename&&X(Z)})}var ee=s(V,2);{var se=X=>{var de=ri(),ie=s(_e(de),2),ge=r(ie,!0);t(ie),b(()=>_(ge,e(z).stack)),l(X,de)};h(ee,X=>{e(z)?.stack&&X(se)})}t(c),t(B),b(()=>_(y,e(W).message)),l(q,B)};h(D,q=>{e(W)&&(A()||e(j)>2)&&q(R)})}var d=s(D,2),f=r(d);{var g=q=>{{let B=Be(()=>e(S)?"opacity-50":"");je(q,{variant:"primary",onclick:Se,get disabled(){return e(S)},get class(){return e(B)},children:(c,o)=>{ue();var y=xe();b(()=>_(y,e(S)?"Retrying...":e(j)>0?`Try Again (${e(j)})`:"Try Again")),l(c,y)},$$slots:{default:!0}})}};h(f,q=>{J()&&q(g)})}var k=s(f,2);je(k,{variant:"outline",onclick:()=>window.location.reload(),children:(q,B)=>{ue();var c=xe("Refresh Page");l(q,c)},$$slots:{default:!0}});var C=s(k,2);{var F=q=>{je(q,{variant:"ghost",onclick:te,size:"sm",children:(B,c)=>{ue();var o=xe("Report Error");l(B,o)},$$slots:{default:!0}})};h(C,q=>{e(j)>1&&q(F)})}t(d);var ae=s(d,2);{var $=q=>{var B=li();l(q,B)};h(ae,q=>{e(j)>3&&q($)})}t(m),b(()=>_(L,e(j)>0?`Error (Attempt ${e(j)+1})`:"Something went wrong")),l(u,m)},$$slots:{default:!0}})};h(fe,ce=>{a.fallback?ce(ze):ce(Te,!1)})}l(N,Y)},ve=N=>{var Y=Pe(),fe=_e(Y);na(fe,()=>a.children),l(N,Y)};h(T,N=>{e(p)?N(I):N(ve,!1)})}l(w,K),_t()}Me(["click"]);Me(["click"]);Me(["click"]);Me(["click"]);export{xi as C,bi as E,hi as S,gi as W,pi as a,ea as b,mi as c};
