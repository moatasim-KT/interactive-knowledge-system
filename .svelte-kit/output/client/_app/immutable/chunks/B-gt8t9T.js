import{d as Tt,p as At,a as $e,s as pe,b as vt,u as Dt,g as e,c as ne,f as y,e as w,h as a,i as r,j as Ce,k as B,t as S,l as Rt,m as xt,n as o,o as zt,q as p,r as t,v as gt,w as Ut,x as ot,y as _,z as Pt,A as St,B as It,C as Ye,D as Vt,E as st,F as Zt,G as Bt,H as Ot,I as Lt,J as ht,K as Jt,L as na,M as ra,N as sa}from"./d1NyGob4.js";import{e as ia,a as oa,c as la,b as ca,p as va,d as ua,f as da,s as Gt}from"./DsZ6whlC.js";function _a(q,n,l){const i=q.target;w(n,i.value,!0),l()}function fa(q,n,l){const i={field:e(n)()[0]??"value",type:"text",operator:"equals",value:"",active:!0};w(l,[...e(l),i],!0)}function ma(q,n,l,i,g,M){w(n,[],!0),w(l,""),w(i,""),w(g,"asc"),M()}var pa=(q,n)=>w(n,!e(n)),ga=y("<option> </option>"),ha=(q,n,l)=>n(e(l)),ba=y('<button class="sort-direction-btn svelte-14r39im" type="button" title="Toggle sort direction"> </button>'),ya=y("<option> </option>"),xa=y('<div class="range-inputs svelte-14r39im"><input type="number" placeholder="Min" class="filter-value-input range-input svelte-14r39im"/> <input type="number" placeholder="Max" class="filter-value-input range-input svelte-14r39im"/></div>'),ka=y('<input placeholder="Filter value..." class="filter-value-input svelte-14r39im"/>'),wa=y('<div><div class="filter-controls svelte-14r39im"><select class="filter-field-select svelte-14r39im"></select> <select class="filter-operator-select svelte-14r39im"><option>Contains</option><option>Equals</option><option>Greater than</option><option>Less than</option><option>Between</option></select> <!></div> <div class="filter-actions svelte-14r39im"><button type="button"> </button> <button class="remove-filter-btn svelte-14r39im" type="button" title="Remove filter">√ó</button></div></div>'),Sa=y('<div class="no-filters svelte-14r39im"><p>No filters applied. Click "Add Filter" to create one.</p></div>'),Aa=y('<div class="filters-section svelte-14r39im"><div class="filters-header svelte-14r39im"><h5 class="filters-title svelte-14r39im">Advanced Filters</h5> <button class="add-filter-btn svelte-14r39im" type="button">+ Add Filter</button></div> <!> <!></div>'),za=y('<div class="data-manipulator svelte-14r39im"><div class="manipulator-header svelte-14r39im"><h4 class="manipulator-title svelte-14r39im">Data Controls</h4> <div class="header-actions svelte-14r39im"><button class="toggle-advanced-btn svelte-14r39im" type="button"> </button> <button class="clear-all-btn svelte-14r39im" type="button">Clear All</button></div></div> <div class="search-section svelte-14r39im"><div class="search-container svelte-14r39im"><input type="text" placeholder="Search data..." class="search-input svelte-14r39im"/> <span class="search-icon svelte-14r39im">üîç</span></div></div> <div class="sort-section svelte-14r39im"><span class="sort-label svelte-14r39im">Sort by:</span> <div class="sort-controls svelte-14r39im"><select class="sort-select svelte-14r39im"><option>No sorting</option><!></select> <!></div></div> <!> <div class="data-summary svelte-14r39im"><span class="summary-text svelte-14r39im"> </span></div></div>');function Wt(q,n){At(n,!0);let l=$e(n,"filters",19,()=>[]),i=pe(""),g=pe("asc"),M=pe(""),I=pe(vt([...l()])),ie=pe(!1);const $=ne(()=>()=>V(n.data,e(I),e(i),e(g),e(M))),N=ne(()=>()=>_e(n.data));function _e(b){if(!b)return[];if(Array.isArray(b)&&b.length>0){const A=b[0];if(typeof A=="object"&&A!==null)return Object.keys(A)}return typeof b=="object"&&b!==null?Object.keys(b):["value","label"]}function V(b,A,s,v,u){if(!b)return[];let c=Array.isArray(b)?[...b]:Object.entries(b).map(([d,f])=>({key:d,value:f}));return u.trim()&&(c=c.filter(d=>JSON.stringify(d).toLowerCase().includes(u.toLowerCase()))),A.forEach(d=>{d.active&&(c=c.filter(f=>{const h=f[d.field];switch(d.operator){case"equals":return h===d.value;case"contains":return String(h).toLowerCase().includes(String(d.value).toLowerCase());case"greater":return Number(h)>Number(d.value);case"less":return Number(h)<Number(d.value);case"between":if(Array.isArray(d.value)&&d.value.length===2){const D=Number(h);return D>=Number(d.value[0])&&D<=Number(d.value[1])}return!0;default:return!0}}))}),s&&c.sort((d,f)=>{const h=d[s],D=f[s];let K=0;return typeof h=="number"&&typeof D=="number"?K=h-D:K=String(h).localeCompare(String(D)),v==="desc"?-K:K}),c}function P(b){e(i)===b?w(g,e(g)==="asc"?"desc":"asc",!0):(w(i,b,!0),w(g,"asc")),de()}function x(b){w(I,e(I).filter((A,s)=>s!==b),!0),de()}function ge(b,A){w(I,e(I).map((s,v)=>v===b?{...s,...A}:s),!0),de()}function ke(b){w(I,e(I).map((A,s)=>s===b?{...A,active:!A.active}:A),!0),de()}function de(){n.onDataChange?.({data:e($)(),filters:e(I),sort:{field:e(i),direction:e(g)},search:e(M)})}Dt(()=>{e($)()&&de()});var O=za(),oe=a(O),he=r(a(oe),2),fe=a(he);fe.__click=[pa,ie];var Ie=a(fe);t(fe);var xe=r(fe,2);xe.__click=[ma,I,M,i,g,de],t(he),t(oe);var U=r(oe,2),J=a(U),be=a(J);gt(be),be.__input=[_a,M,de],Ut(2),t(J),t(U);var qe=r(U,2),Me=r(a(qe),2),E=a(Me);E.__change=de;var z=a(E);z.value=z.__value="";var H=r(z);Ce(H,16,()=>e(N)(),b=>b,(b,A)=>{var s=ga(),v=a(s,!0);t(s);var u={};S(()=>{p(v,A),u!==(u=A)&&(s.value=(s.__value=A)??"")}),o(b,s)}),t(E);var Y=r(E,2);{var re=b=>{var A=ba();A.__click=[ha,P,i];var s=a(A,!0);t(A),S(()=>p(s,e(g)==="asc"?"‚Üë":"‚Üì")),o(b,A)};B(Y,b=>{e(i)&&b(re)})}t(Me),t(qe);var se=r(qe,2);{var ee=b=>{var A=Aa(),s=a(A),v=r(a(s),2);v.__click=[fa,N,I],t(s);var u=r(s,2);Ce(u,17,()=>e(I),St,(f,h,D)=>{var K=wa();let Se;var Ne=a(K),je=a(Ne);je.__change=le=>ge(D,{field:le.currentTarget.value}),Ce(je,20,()=>e(N)(),le=>le,(le,we)=>{var ye=ya(),lt=a(ye,!0);t(ye);var Je={};S(()=>{p(lt,we),Je!==(Je=we)&&(ye.value=(ye.__value=we)??"")}),o(le,ye)}),t(je);var He=r(je,2);He.__change=le=>ge(D,{operator:le.currentTarget.value});var et=a(He);et.value=et.__value="contains";var Te=r(et);Te.value=Te.__value="equals";var Le=r(Te);Le.value=Le.__value="greater";var Ee=r(Le);Ee.value=Ee.__value="less";var Be=r(Ee);Be.value=Be.__value="between",t(He);var Ke=r(He,2);{var ut=le=>{var we=xa(),ye=a(we);gt(ye),ye.__input=Je=>{const dt=Je.currentTarget.value,_t=Array.isArray(e(h).value)?e(h).value[1]:"";ge(D,{value:[dt,_t]})};var lt=r(ye,2);gt(lt),lt.__input=Je=>{const dt=Je.currentTarget.value,_t=Array.isArray(e(h).value)?e(h).value[0]:"";ge(D,{value:[_t,dt]})},t(we),S((Je,dt)=>{Pt(ye,Je),Pt(lt,dt)},[()=>Array.isArray(e(h).value)?e(h).value[0]:"",()=>Array.isArray(e(h).value)?e(h).value[1]:""]),o(le,we)},Ge=le=>{var we=ka();gt(we),we.__input=ye=>ge(D,{value:ye.currentTarget.value}),S(()=>{_(we,"type",e(h).operator==="greater"||e(h).operator==="less"?"number":"text"),Pt(we,e(h).value)}),o(le,we)};B(Ke,le=>{e(h).operator==="between"?le(ut):le(Ge,!1)})}t(Ne);var Xe=r(Ne,2),De=a(Xe);let Ze;De.__click=()=>ke(D);var nt=a(De,!0);t(De);var W=r(De,2);W.__click=()=>x(D),t(Xe),t(K),S((le,we)=>{Se=ot(K,1,"filter-row svelte-14r39im",null,Se,le),Ze=ot(De,1,"toggle-filter-btn svelte-14r39im",null,Ze,we),_(De,"title",e(h).active?"Disable filter":"Enable filter"),p(nt,e(h).active?"‚úì":"‚óã")},[()=>({inactive:!e(h).active}),()=>({active:e(h).active})]),xt(je,()=>e(h).field,le=>e(h).field=le),xt(He,()=>e(h).operator,le=>e(h).operator=le),o(f,K)});var c=r(u,2);{var d=f=>{var h=Sa();o(f,h)};B(c,f=>{e(I).length===0&&f(d)})}t(A),o(b,A)};B(se,b=>{e(ie)&&b(ee)})}var F=r(se,2),Z=a(F),me=a(Z);t(Z),t(F),t(O),S(b=>{p(Ie,`${e(ie)?"Hide":"Show"} Filters`),xe.disabled=!e(M)&&!e(i)&&e(I).length===0,p(me,`Showing ${e($).length??""} of ${b??""} items`)},[()=>Array.isArray(n.data)?n.data.length:Object.keys(n.data||{}).length]),Rt(be,()=>e(M),b=>w(M,b)),xt(E,()=>e(i),b=>w(i,b)),o(q,O),zt()}Tt(["click","input","change"]);function Ca(q,n,l,i){const g=q.target;w(n,g.value,!0),w(l,0),i()}function Ma(q,n,l){const i=q.target;w(n,i.value,!0),l()}function Na(q,n,l,i){const g=e(n)(),M=e(l)(),I={field:g[0]||"value",type:M[g[0]]||"text",operator:"contains",value:"",active:!0};w(i,[...e(i),I],!0)}function Ra(q,n,l,i,g,M,I){w(n,[],!0),w(l,""),w(i,""),w(g,""),w(M,0),I()}var Ta=y('<p class="description svelte-xd92ey"> </p>'),qa=(q,n)=>w(n,!e(n)),Ea=y("<option> </option>"),Da=(q,n,l)=>{w(n,q.currentTarget.value,!0),l()},Ia=y("<option> </option>"),ja=(q,n,l)=>n(e(l)),La=y('<button class="sort-direction-btn svelte-xd92ey" title="Toggle sort direction" type="button"> </button>'),Fa=y("<option> </option>"),Pa=y("<option>Greater than</option> <option>Less than</option> <option>Between</option>",1),Ba=y('<div class="range-inputs svelte-xd92ey"><input type="number" placeholder="Min" class="filter-value-input svelte-xd92ey"/> <input type="number" placeholder="Max" class="filter-value-input svelte-xd92ey"/></div>'),Oa=y('<input placeholder="Filter value..." class="filter-value-input svelte-xd92ey"/>'),Ua=y('<div><select class="filter-field-select svelte-xd92ey"></select> <select class="filter-operator-select svelte-xd92ey"><option>Contains</option><option>Equals</option><!></select> <!> <div class="filter-actions svelte-xd92ey"><button type="button"> </button> <button class="remove-filter-btn svelte-xd92ey" title="Remove filter" type="button">√ó</button></div></div>'),Ha=y('<div class="stat-item svelte-xd92ey"> </div>'),Va=y('<div class="stat-item svelte-xd92ey"> </div> <div class="stat-item svelte-xd92ey"> </div>',1),Ya=y('<div class="stat-item svelte-xd92ey"> </div>'),Ga=y('<div class="stat-item svelte-xd92ey"> </div> <!> <!> <!>',1),Xa=y('<div class="field-summary svelte-xd92ey"><div class="field-header svelte-xd92ey"><strong> </strong> <span class="field-type svelte-xd92ey"> </span></div> <div class="field-stats svelte-xd92ey"><!></div></div>'),Za=y('<div class="advanced-controls svelte-xd92ey"><div class="filters-section"><div class="section-header svelte-xd92ey"><h4 class="svelte-xd92ey">Advanced Filters</h4> <button class="add-filter-btn svelte-xd92ey" type="button">+ Add Filter</button></div> <!></div> <div class="summary-section svelte-xd92ey"><h4 class="svelte-xd92ey">Data Summary</h4> <div class="summary-grid svelte-xd92ey"></div></div></div>'),Ja=y("<option> </option>"),Wa=y('<div class="aggregation-result svelte-xd92ey"><span class="agg-field svelte-xd92ey"> </span> <span class="agg-value svelte-xd92ey"> </span></div>'),Ka=y('<div class="group-aggregations svelte-xd92ey"></div>'),Qa=y('<div class="group-item svelte-xd92ey"><div class="group-header svelte-xd92ey"><h5 class="svelte-xd92ey"> </h5> <span class="group-count svelte-xd92ey"> </span></div> <!></div>'),$a=y('<div class="grouped-data svelte-xd92ey"><h4 class="svelte-xd92ey"> </h4> <div class="aggregation-controls svelte-xd92ey"><label for="aggregation-select">Aggregation:</label> <select id="aggregation-select" class="aggregation-select svelte-xd92ey"></select></div> <div class="groups-container svelte-xd92ey"></div></div>'),en=(q,n,l)=>n(l),tn=y('<span class="sort-indicator svelte-xd92ey"> </span>'),an=y('<th><div class="header-content svelte-xd92ey"><span class="field-name svelte-xd92ey"> </span> <span class="field-type svelte-xd92ey"> </span> <!></div></th>'),nn=y("<td><!></td>"),rn=y("<tr></tr>"),sn=(q,n,l)=>n(e(l)-1),on=(q,n,l)=>n(e(l)),ln=y('<button type="button"> </button>'),cn=(q,n,l)=>n(e(l)+1),vn=y('<div class="pagination svelte-xd92ey"><button class="page-btn svelte-xd92ey" type="button">‚Üê Previous</button> <div class="page-numbers svelte-xd92ey"></div> <button class="page-btn svelte-xd92ey" type="button">Next ‚Üí</button></div>'),un=y('<div class="data-explorer svelte-xd92ey"><div class="explorer-header svelte-xd92ey"><div class="header-title svelte-xd92ey"><h3 class="svelte-xd92ey"> </h3> <!> <span class="data-count svelte-xd92ey"> </span></div> <div class="header-actions svelte-xd92ey"><button type="button">‚öôÔ∏è Advanced</button> <button class="export-btn svelte-xd92ey" type="button">üíæ Export CSV</button> <button class="clear-btn svelte-xd92ey" type="button">üóëÔ∏è Clear All</button></div></div> <div class="quick-controls svelte-xd92ey"><div class="search-container svelte-xd92ey"><input type="text" placeholder="Search across all fields..." class="search-input svelte-xd92ey"/> <span class="search-icon svelte-xd92ey">üîç</span></div> <div class="quick-filters svelte-xd92ey"><div class="control-group svelte-xd92ey"><label for="group-by-select" class="svelte-xd92ey">Group by:</label> <select id="group-by-select" class="group-select svelte-xd92ey"><option>No grouping</option><!></select></div> <div class="control-group svelte-xd92ey"><label for="sort-by-select" class="svelte-xd92ey">Sort by:</label> <select id="sort-by-select" class="sort-select svelte-xd92ey"><option>No sorting</option><!></select> <!></div></div></div> <!> <!> <div class="data-table-container svelte-xd92ey"><div class="table-header svelte-xd92ey"><h4 class="svelte-xd92ey">Data Table</h4> <div class="pagination-info svelte-xd92ey"> </div></div> <div class="table-wrapper svelte-xd92ey"><table class="data-table svelte-xd92ey"><thead><tr></tr></thead><tbody></tbody></table></div> <!></div></div>');function dn(q,n){At(n,!0);const l=It();let i=$e(n,"data",19,()=>[]),g=$e(n,"filters",19,()=>[]),M=$e(n,"groupBy",3,""),I=$e(n,"sortBy",3,""),ie=$e(n,"sortDirection",3,"asc"),$=pe(""),N=pe(vt([...g()])),_e=pe(!1);vt([]);let V=pe(vt(M())),P=pe(vt(I())),x=pe(vt(ie())),ge=50,ke=pe(0);const de=ne(()=>()=>J(i())),O=ne(()=>()=>be(i())),oe=ne(()=>()=>qe(i(),e(N),e($),e(P),e(x))),he=ne(()=>()=>e(V)?Me(e(oe)(),e(V)):{}),fe=ne(()=>()=>E(e(oe)())),Ie=ne(()=>()=>H(e(oe)(),e(ke),ge)),xe=[{value:"count",label:"Count",icon:"#Ô∏è‚É£"},{value:"sum",label:"Sum",icon:"‚ûï"},{value:"avg",label:"Average",icon:"üìä"},{value:"min",label:"Minimum",icon:"‚¨áÔ∏è"},{value:"max",label:"Maximum",icon:"‚¨ÜÔ∏è"},{value:"median",label:"Median",icon:"üìà"}];let U=pe("count");function J(m){if(!m||!m.length)return[];const k=m[0];return typeof k=="object"&&k!==null?Object.keys(k):["value"]}function be(m){if(!m||!m.length)return{};const k={},j=Math.min(100,m.length);return e(de)().forEach(T=>{const L=m.slice(0,j).map(C=>C[T]).filter(C=>C!=null);if(L.length===0){k[T]="unknown";return}const ae=L.filter(C=>typeof C=="number"||!isNaN(Number(C))).length,ue=L.filter(C=>!isNaN(Date.parse(C))).length,ve=L.filter(C=>typeof C=="boolean"||C==="true"||C==="false").length;ae/L.length>.8?k[T]="number":ue/L.length>.8?k[T]="date":ve/L.length>.8?k[T]="boolean":k[T]="text"}),k}function qe(m,k,j,G,T){if(!m)return[];let L=[...m];if(j.trim()){const ae=j.toLowerCase(),ue=e(de)();L=L.filter(ve=>ue.some(C=>String(ve[C]||"").toLowerCase().includes(ae)))}if(k.forEach(ae=>{ae.active&&(L=L.filter(ue=>{const ve=ue[ae.field];switch(ae.operator){case"equals":return ve===ae.value;case"contains":return String(ve).toLowerCase().includes(String(ae.value).toLowerCase());case"greater":return Number(ve)>Number(ae.value);case"less":return Number(ve)<Number(ae.value);case"between":{if(Array.isArray(ae.value)&&ae.value.length===2){const C=Number(ve);return C>=Number(ae.value[0])&&C<=Number(ae.value[1])}return!0}default:return!0}}))}),G){const ae=e(O)();L.sort((ue,ve)=>{const C=ue[G],Ae=ve[G];let ze=0;return ae[G]==="number"?ze=Number(C)-Number(Ae):ae[G]==="date"?ze=new Date(C).getTime()-new Date(Ae).getTime():ze=String(C).localeCompare(String(Ae)),T==="desc"?-ze:ze})}return L}function Me(m,k){return!k||!m.length?{}:m.reduce((j,G)=>{const T=String(G[k]||"Unknown");return j[T]||(j[T]=[]),j[T].push(G),j},{})}function E(m){if(!m.length)return{};const k={total_rows:m.length,fields:{}},j=e(de)(),G=e(O)();return j.forEach(T=>{const L=m.map(ue=>ue[T]).filter(ue=>ue!=null),ae={non_null_count:L.length,null_count:m.length-L.length};if(G[T]==="number"){const ue=L.map(ve=>Number(ve)).filter(ve=>!isNaN(ve));ue.length>0&&(ae.min=Math.min(...ue),ae.max=Math.max(...ue),ae.avg=ue.reduce((ve,C)=>ve+C,0)/ue.length,ae.sum=ue.reduce((ve,C)=>ve+C,0))}else{const ue=[...new Set(L)];ae.unique_count=ue.length,ae.most_common=z(L)}k.fields[T]=ae}),k}function z(m){if(!m.length)return null;const k=m.reduce((G,T)=>(G[T]=(G[T]||0)+1,G),{}),j=Object.entries(k).reduce((G,T)=>k[G[0]]>k[T[0]]?G:T);return{value:j[0],count:j[1]}}function H(m,k,j){const G=k*j;return m.slice(G,G+j)}function Y(m,k,j){const G=m.map(T=>T[k]).filter(T=>T!=null);switch(j){case"count":return G.length;case"sum":return G.reduce((T,L)=>Number(T)+Number(L),0);case"avg":return G.length>0?G.reduce((T,L)=>Number(T)+Number(L),0)/G.length:0;case"min":return Math.min(...G.map(T=>Number(T)));case"max":return Math.max(...G.map(T=>Number(T)));case"median":{const T=G.map(ae=>Number(ae)).sort((ae,ue)=>ae-ue),L=Math.floor(T.length/2);return T.length%2===0?(T[L-1]+T[L])/2:T[L]}default:return 0}}function re(m){e(P)===m?w(x,e(x)==="asc"?"desc":"asc",!0):(w(P,m,!0),w(x,"asc")),A()}function se(m){w(N,e(N).filter((k,j)=>j!==m),!0),A()}function ee(m,k){w(N,e(N).map((j,G)=>G===m?{...j,...k}:j),!0),A()}function F(m){w(N,e(N).map((k,j)=>j===m?{...k,active:!k.active}:k),!0),A()}function Z(m){w(ke,Math.max(0,Math.min(m,Math.ceil(e(oe)().length/ge)-1)),!0),A()}function me(){const m=e(oe)(),k=b(m),j=new Blob([k],{type:"text/csv"}),G=URL.createObjectURL(j),T=document.createElement("a");T.href=G,T.download=`data-export-${Date.now()}.csv`,T.click(),URL.revokeObjectURL(G),l("export",{format:"csv",data:m})}function b(m){if(!m.length)return"";const k=e(de)(),j=k.join(","),G=m.map(T=>k.map(L=>{const ae=T[L];return typeof ae=="string"&&ae.includes(",")?`"${ae}"`:ae}).join(","));return[j,...G].join(`
`)}function A(){l("datachange",{data:e(oe)(),filters:e(N),groupBy:e(V),sortBy:e(P),sortDirection:e(x),search:e($),page:e(ke),pageSize:ge})}Dt(()=>{e(oe)()&&A()});var s=un(),v=a(s),u=a(v),c=a(u),d=a(c,!0);t(c);var f=r(c,2);{var h=m=>{var k=Ta(),j=a(k,!0);t(k),S(()=>p(j,n.description)),o(m,k)};B(f,m=>{n.description&&m(h)})}var D=r(f,2),K=a(D);t(D),t(u);var Se=r(u,2),Ne=a(Se);let je;Ne.__click=[qa,_e];var He=r(Ne,2);He.__click=me;var et=r(He,2);et.__click=[Ra,N,$,P,V,ke,A],t(Se),t(v);var Te=r(v,2),Le=a(Te),Ee=a(Le);gt(Ee),Ee.__input=[Ca,$,ke,A],Ut(2),t(Le);var Be=r(Le,2),Ke=a(Be),ut=r(a(Ke),2);ut.__change=[Ma,V,A];var Ge=a(ut);Ge.value=Ge.__value="";var Xe=r(Ge);Ce(Xe,16,()=>e(de)(),m=>m,(m,k)=>{var j=Ea(),G=a(j);t(j);var T={};S(L=>{p(G,`${k??""} (${L??""})`),T!==(T=k)&&(j.value=(j.__value=k)??"")},[()=>e(O)()[k]]),o(m,j)}),t(ut),t(Ke);var De=r(Ke,2),Ze=r(a(De),2);Ze.__change=[Da,P,A];var nt=a(Ze);nt.value=nt.__value="";var W=r(nt);Ce(W,16,()=>e(de)(),m=>m,(m,k)=>{var j=Ia(),G=a(j,!0);t(j);var T={};S(()=>{p(G,k),T!==(T=k)&&(j.value=(j.__value=k)??"")}),o(m,j)}),t(Ze);var le=r(Ze,2);{var we=m=>{var k=La();k.__click=[ja,re,P];var j=a(k,!0);t(k),S(()=>p(j,e(x)==="asc"?"‚Üë":"‚Üì")),o(m,k)};B(le,m=>{e(P)&&m(we)})}t(De),t(Be),t(Te);var ye=r(Te,2);{var lt=m=>{var k=Za(),j=a(k),G=a(j),T=r(a(G),2);T.__click=[Na,de,O,N],t(G);var L=r(G,2);Ce(L,17,()=>e(N),St,(ve,C,Ae)=>{var ze=Ua();let Ue;var Ve=a(ze);Ve.__change=Pe=>ee(Ae,{field:Pe.currentTarget.value,type:e(O)()[Pe.currentTarget.value]}),Ce(Ve,20,()=>e(de)(),Pe=>Pe,(Pe,tt)=>{var Qe=Fa(),rt=a(Qe);t(Qe);var at={};S(pt=>{p(rt,`${tt??""} (${pt??""})`),at!==(at=tt)&&(Qe.value=(Qe.__value=tt)??"")},[()=>e(O)()[tt]]),o(Pe,Qe)}),t(Ve);var ct=r(Ve,2);ct.__change=Pe=>ee(Ae,{operator:Pe.currentTarget.value});var We=a(ct);We.value=We.__value="contains";var it=r(We);it.value=it.__value="equals";var kt=r(it);{var qt=Pe=>{var tt=Pa(),Qe=Ye(tt);Qe.value=Qe.__value="greater";var rt=r(Qe,2);rt.value=rt.__value="less";var at=r(rt,2);at.value=at.__value="between",o(Pe,tt)};B(kt,Pe=>{e(O)()[e(C).field]==="number"&&Pe(qt)})}t(ct);var Ct=r(ct,2);{var ft=Pe=>{var tt=Ba(),Qe=a(tt);gt(Qe),Qe.__input=at=>{const pt=at.currentTarget.value,Ft=Array.isArray(e(C).value)?e(C).value[1]:"";ee(Ae,{value:[pt,Ft]})};var rt=r(Qe,2);gt(rt),rt.__input=at=>{const pt=at.currentTarget.value,Ft=Array.isArray(e(C).value)?e(C).value[0]:"";ee(Ae,{value:[Ft,pt]})},t(tt),S((at,pt)=>{Pt(Qe,at),Pt(rt,pt)},[()=>Array.isArray(e(C).value)?e(C).value[0]:"",()=>Array.isArray(e(C).value)?e(C).value[1]:""]),o(Pe,tt)},Nt=Pe=>{var tt=Oa();gt(tt),tt.__input=Qe=>ee(Ae,{value:Qe.currentTarget.value}),S(Qe=>_(tt,"type",Qe),[()=>e(O)()[e(C).field]==="number"?"number":e(O)()[e(C).field]==="date"?"date":"text"]),Rt(tt,()=>e(C).value,Qe=>e(C).value=Qe),o(Pe,tt)};B(Ct,Pe=>{e(C).operator==="between"?Pe(ft):Pe(Nt,!1)})}var yt=r(Ct,2),wt=a(yt);let Mt;wt.__click=()=>F(Ae);var Et=a(wt,!0);t(wt);var jt=r(wt,2);jt.__click=()=>se(Ae),t(yt),t(ze),S((Pe,tt)=>{Ue=ot(ze,1,"filter-row svelte-xd92ey",null,Ue,Pe),Mt=ot(wt,1,"toggle-filter-btn svelte-xd92ey",null,Mt,tt),_(wt,"title",e(C).active?"Disable filter":"Enable filter"),p(Et,e(C).active?"‚úì":"‚óã")},[()=>({inactive:!e(C).active}),()=>({active:e(C).active})]),xt(Ve,()=>e(C).field,Pe=>e(C).field=Pe),xt(ct,()=>e(C).operator,Pe=>e(C).operator=Pe),o(ve,ze)}),t(j);var ae=r(j,2),ue=r(a(ae),2);Ce(ue,20,()=>e(de)(),ve=>ve,(ve,C)=>{var Ae=Xa(),ze=a(Ae),Ue=a(ze),Ve=a(Ue,!0);t(Ue);var ct=r(Ue,2),We=a(ct);t(ct),t(ze);var it=r(ze,2),kt=a(it);{var qt=Ct=>{const ft=ne(()=>e(fe)().fields[C]);var Nt=Ga(),yt=Ye(Nt),wt=a(yt);t(yt);var Mt=r(yt,2);{var Et=rt=>{var at=Ha(),pt=a(at);t(at),S(()=>p(pt,`Unique: ${e(ft).unique_count??""}`)),o(rt,at)};B(Mt,rt=>{e(ft).unique_count!==void 0&&rt(Et)})}var jt=r(Mt,2);{var Pe=rt=>{var at=Va(),pt=Ye(at),Ft=a(pt);t(pt);var Yt=r(pt,2),$t=a(Yt);t(Yt),S((ea,ta,aa)=>{p(Ft,`Range: ${ea??""} - ${ta??""}`),p($t,`Avg: ${aa??""}`)},[()=>e(ft).min.toFixed(2),()=>e(ft).max.toFixed(2),()=>e(ft).avg.toFixed(2)]),o(rt,at)};B(jt,rt=>{e(ft).min!==void 0&&rt(Pe)})}var tt=r(jt,2);{var Qe=rt=>{var at=Ya(),pt=a(at);t(at),S(()=>p(pt,`Most common: ${e(ft).most_common.value??""} (${e(ft).most_common.count??""})`)),o(rt,at)};B(tt,rt=>{e(ft).most_common&&rt(Qe)})}S(()=>p(wt,`Non-null: ${e(ft).non_null_count??""}`)),o(Ct,Nt)};B(kt,Ct=>{e(fe)().fields?.[C]&&Ct(qt)})}t(it),t(Ae),S(Ct=>{p(Ve,C),p(We,`(${Ct??""})`)},[()=>e(O)()[C]]),o(ve,Ae)}),t(ue),t(ae),t(k),o(m,k)};B(ye,m=>{e(_e)&&m(lt)})}var Je=r(ye,2);{var dt=m=>{var k=$a(),j=a(k),G=a(j);t(j);var T=r(j,2),L=r(a(T),2);Ce(L,21,()=>xe,ue=>ue.value,(ue,ve)=>{var C=Ja(),Ae=a(C);t(C);var ze={};S(()=>{p(Ae,`${e(ve).icon??""} ${e(ve).label??""}`),ze!==(ze=e(ve).value)&&(C.value=(C.__value=e(ve).value)??"")}),o(ue,C)}),t(L),t(T);var ae=r(T,2);Ce(ae,21,()=>Object.entries(e(he)()),([ue,ve])=>ue,(ue,ve)=>{var C=ne(()=>Zt(e(ve),2));let Ae=()=>e(C)[0],ze=()=>e(C)[1];var Ue=Qa(),Ve=a(Ue),ct=a(Ve),We=a(ct,!0);t(ct);var it=r(ct,2),kt=a(it);t(it),t(Ve);var qt=r(Ve,2);{var Ct=ft=>{var Nt=Ka();Ce(Nt,20,()=>e(de)().filter(yt=>e(O)()[yt]==="number"),yt=>yt,(yt,wt)=>{var Mt=Wa(),Et=a(Mt),jt=a(Et);t(Et);var Pe=r(Et,2),tt=a(Pe,!0);t(Pe),t(Mt),S(Qe=>{p(jt,`${wt??""}:`),p(tt,Qe)},[()=>Y(ze(),wt,e(U)).toFixed(2)]),o(yt,Mt)}),t(Nt),o(ft,Nt)};B(qt,ft=>{e(U)!=="count"&&ft(Ct)})}t(Ue),S(()=>{p(We,Ae()),p(kt,`(${ze().length??""} items)`)}),o(ue,Ue)}),t(ae),t(k),S(()=>p(G,`Grouped by ${e(V)??""}`)),xt(L,()=>e(U),ue=>w(U,ue)),o(m,k)};B(Je,m=>{e(V)&&Object.keys(e(he)()).length>0&&m(dt)})}var _t=r(Je,2),bt=a(_t),R=r(a(bt),2),X=a(R);t(R),t(bt);var te=r(bt,2),Q=a(te),ce=a(Q),Re=a(ce);Ce(Re,20,()=>e(de)(),m=>m,(m,k)=>{var j=an();let G;j.__click=[en,re,k];var T=a(j),L=a(T),ae=a(L,!0);t(L);var ue=r(L,2),ve=a(ue);t(ue);var C=r(ue,2);{var Ae=ze=>{var Ue=tn(),Ve=a(Ue,!0);t(Ue),S(()=>p(Ve,e(x)==="asc"?"‚Üë":"‚Üì")),o(ze,Ue)};B(C,ze=>{e(P)===k&&ze(Ae)})}t(T),t(j),S((ze,Ue)=>{G=ot(j,1,"sortable-header svelte-xd92ey",null,G,ze),p(ae,k),p(ve,`(${Ue??""})`)},[()=>({sorted:e(P)===k}),()=>e(O)()[k]]),o(m,j)}),t(Re),t(ce);var Fe=r(ce);Ce(Fe,21,()=>e(Ie)(),St,(m,k)=>{var j=rn();Ce(j,20,()=>e(de)(),G=>G,(G,T)=>{var L=nn();let ae;var ue=a(L);{var ve=Ae=>{var ze=Vt();S(Ue=>p(ze,Ue),[()=>typeof e(k)[T]=="number"?e(k)[T].toFixed(2):e(k)[T]]),o(Ae,ze)},C=Ae=>{var ze=st(),Ue=Ye(ze);{var Ve=We=>{var it=Vt();S(kt=>p(it,kt),[()=>e(k)[T]?new Date(e(k)[T]).toLocaleDateString():""]),o(We,it)},ct=We=>{var it=Vt();S(()=>p(it,e(k)[T]||"")),o(We,it)};B(Ue,We=>{e(O)()[T]==="date"?We(Ve):We(ct,!1)},!0)}o(Ae,ze)};B(ue,Ae=>{e(O)()[T]==="number"?Ae(ve):Ae(C,!1)})}t(L),S(Ae=>ae=ot(L,1,"data-cell svelte-xd92ey",null,ae,Ae),[()=>({numeric:e(O)()[T]==="number"})]),o(G,L)}),t(j),o(m,j)}),t(Fe),t(Q),t(te);var mt=r(te,2);{var Oe=m=>{var k=vn(),j=a(k);j.__click=[sn,Z,ke];var G=r(j,2);Ce(G,21,()=>Array(Math.min(5,Math.ceil(e(oe)().length/ge))),St,(L,ae,ue)=>{const ve=ne(()=>Math.max(0,e(ke)-2)+ue);var C=st(),Ae=Ye(C);{var ze=Ue=>{var Ve=ln();let ct;Ve.__click=[on,Z,ve];var We=a(Ve,!0);t(Ve),S(it=>{ct=ot(Ve,1,"page-number-btn svelte-xd92ey",null,ct,it),p(We,e(ve)+1)},[()=>({active:e(ve)===e(ke)})]),o(Ue,Ve)};B(Ae,Ue=>{e(ve)<Math.ceil(e(oe)().length/ge)&&Ue(ze)})}o(L,C)}),t(G);var T=r(G,2);T.__click=[cn,Z,ke],t(k),S(L=>{j.disabled=e(ke)===0,T.disabled=L},[()=>e(ke)>=Math.ceil(e(oe)().length/ge)-1]),o(m,k)};B(mt,m=>{Math.ceil(e(oe)().length/ge)>1&&m(Oe)})}t(_t),t(s),S((m,k,j)=>{p(d,n.title||"Data Explorer"),p(K,`${m??""} of ${i().length??""} rows`),je=ot(Ne,1,"toggle-btn svelte-xd92ey",null,je,k),et.disabled=!e($)&&!e(P)&&!e(V)&&e(N).length===0,p(X,`Page ${e(ke)+1} of ${j??""}`)},[()=>e(oe)().length,()=>({active:e(_e)}),()=>Math.ceil(e(oe)().length/ge)]),Rt(Ee,()=>e($),m=>w($,m)),xt(ut,()=>e(V),m=>w(V,m)),xt(Ze,()=>e(P),m=>w(P,m)),o(q,s),zt()}Tt(["click","input","change"]);function _n(q,n,l,i,g,M,I){if(!e(n))return;const ie=e(n).getBoundingClientRect(),$=q.clientX-ie.left-e(l)().left,N=q.clientY-ie.top-e(l)().top,_e=i($,N);_e&&(w(g,_e,!0),w(M,{x:q.clientX-ie.left,y:q.clientY-ie.top,content:`${_e.label}: ${_e.y}`},!0),I.onInteraction?.({type:"hover",point:_e,coordinates:{x:$,y:N}}))}function fn(q,n,l,i){w(n,1),w(l,!1),i.onInteraction?.({type:"zoom-reset"})}var mn=(q,n)=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),n(q))},pn=y('<button class="zoom-reset-btn svelte-x7z9ki" type="button">Reset Zoom</button>'),gn=ht('<line stroke="var(--grid-color, #e9ecef)" stroke-width="1" opacity="0.5"></line>'),hn=ht('<line stroke="var(--grid-color, #e9ecef)" stroke-width="1" opacity="0.5"></line>'),bn=ht('<path fill="none" stroke="var(--chart-line-color, #0066cc)" stroke-width="2"></path>'),yn=ht('<circle stroke="var(--chart-point-stroke, #ffffff)" stroke-width="2"></circle>'),xn=y('<div class="chart-tooltip svelte-x7z9ki"> </div>'),kn=y('<div class="interactive-chart svelte-x7z9ki" role="application"><div class="chart-controls svelte-x7z9ki"><!> <span class="zoom-indicator svelte-x7z9ki"> </span></div> <svg class="chart-svg svelte-x7z9ki"><rect fill="var(--chart-bg, #fafafa)" stroke="var(--chart-border, #e1e5e9)"></rect><g class="grid"><!><!></g><g class="data-layer"><!><!></g><g class="axes"><line stroke="var(--axis-color, #333333)" stroke-width="2"></line><line stroke="var(--axis-color, #333333)" stroke-width="2"></line></g></svg> <!></div>');function Kt(q,n){At(n,!0);let l=pe(void 0),i=pe(!1),g=pe(1),M=pe(null),I=pe(null);const ie=ne(()=>()=>n.config.layout?.width||600),$=ne(()=>()=>n.config.layout?.height||400),N=ne(()=>()=>n.config.layout?.margin||{top:20,right:20,bottom:40,left:40}),_e=ne(()=>()=>e(ie)()-e(N)().left-e(N)().right),V=ne(()=>()=>e($)()-e(N)().top-e(N)().bottom),P=ne(()=>()=>x(n.data));function x(u){return u?Array.isArray(u)?u.map((c,d)=>({x:c.x||d,y:c.y||c.value||c,label:c.label||`Point ${d+1}`,...c})):typeof u=="object"?Object.entries(u).map(([c,d])=>({x:c,y:d,label:c})):[]:[]}function ge(u){if(!u.length)return f=>0;const c=u.map(f=>f.x);if(c.every(f=>typeof f=="number")){const f=Math.min(...c),h=Math.max(...c);return D=>(D-f)/(h-f)*e(_e)()}else return(f,h)=>h/(c.length-1)*e(_e)()}function ke(u){if(!u.length)return h=>e(V)();const c=u.map(h=>h.y).filter(h=>typeof h=="number"),d=Math.min(...c),f=Math.max(...c);return h=>e(V)()-(h-d)/(f-d)*e(V)()}const de=ne(()=>()=>ge(e(P)())),O=ne(()=>()=>ke(e(P)()));function oe(){w(M,null),w(I,null),n.onInteraction?.({type:"hover-end"})}function he(u){if(!e(l))return;const c=e(l).getBoundingClientRect(),d="clientX"in u&&"clientY"in u,f=(d?u.clientX-c.left:c.width/2)-e(N)().left,h=(d?u.clientY-c.top:c.height/2)-e(N)().top,D=Ie(f,h);D&&n.onInteraction?.({type:"click",point:D,coordinates:{x:f,y:h}})}function fe(u){u.preventDefault();const c=u.deltaY>0?.9:1.1;w(g,Math.max(.5,Math.min(3,e(g)*c)),!0),w(i,e(g)!==1),n.onInteraction?.({type:"zoom",zoomLevel:e(g),isZoomed:e(i)})}function Ie(u,c){const d=e(P)();if(!d.length)return null;let f=d[0],h=1/0;return d.forEach((D,K)=>{const Se=e(de)()(D.x,K),Ne=e(O)()(D.y),je=Math.sqrt((u-Se)**2+(c-Ne)**2);je<h&&(h=je,f=D)}),h<20?f:null}Dt(()=>{e(l)&&n.onInteraction?.({type:"mount",config:n.config})});var xe=kn();xe.__mousemove=[_n,l,N,Ie,M,I,n],xe.__click=he,xe.__keydown=[mn,he];var U=a(xe),J=a(U);{var be=u=>{var c=pn();c.__click=[fn,g,i,n],o(u,c)};B(J,u=>{e(i)&&u(be)})}var qe=r(J,2),Me=a(qe);t(qe),t(U);var E=r(U,2),z=a(E),H=r(z),Y=a(H);Ce(Y,16,()=>Array(5),St,(u,c,d)=>{var f=gn();S((h,D,K,Se)=>{_(f,"x1",h),_(f,"y1",D),_(f,"x2",K),_(f,"y2",Se)},[()=>e(N)().left,()=>e(N)().top+d*e(V)()/4,()=>e(N)().left+e(_e)(),()=>e(N)().top+d*e(V)()/4]),o(u,f)});var re=r(Y);Ce(re,16,()=>Array(5),St,(u,c,d)=>{var f=hn();S((h,D,K,Se)=>{_(f,"x1",h),_(f,"y1",D),_(f,"x2",K),_(f,"y2",Se)},[()=>e(N)().left+d*e(_e)()/4,()=>e(N)().top,()=>e(N)().left+d*e(_e)()/4,()=>e(N)().top+e(V)()]),o(u,f)}),t(H);var se=r(H),ee=a(se);{var F=u=>{var c=bn();S(d=>_(c,"d",d),[()=>e(P)().map((d,f)=>{const h=e(de)()(d.x,f),D=e(O)()(d.y);return`${f===0?"M":"L"} ${h} ${D}`}).join(" ")]),o(u,c)};B(ee,u=>{e(P)().length>1&&u(F)})}var Z=r(ee);Ce(Z,19,()=>e(P)(),(u,c)=>u.label||c,(u,c,d)=>{const f=ne(()=>e(de)()(e(c).x,e(d))),h=ne(()=>e(O)()(e(c).y));var D=yn();let K;S(Se=>{_(D,"cx",e(f)),_(D,"cy",e(h)),_(D,"r",e(M)===e(c)?6:4),_(D,"fill",e(M)===e(c)?"var(--chart-point-hover, #ff6b35)":"var(--chart-point-color, #0066cc)"),K=ot(D,0,"data-point svelte-x7z9ki",null,K,Se)},[()=>({hovered:e(M)===e(c)})]),o(u,D)}),t(se);var me=r(se),b=a(me),A=r(b);t(me),t(E);var s=r(E,2);{var v=u=>{var c=xn(),d=a(c,!0);t(c),S(()=>{Lt(c,`left: ${e(I).x+10}px; top: ${e(I).y-10}px;`),p(d,e(I).content)}),o(u,c)};B(s,u=>{e(I)&&u(v)})}t(xe),Bt(xe,u=>w(l,u),()=>e(l)),S((u,c,d,f,h,D,K,Se,Ne,je,He,et,Te,Le,Ee,Be,Ke)=>{_(xe,"aria-label",n.config.title||"Interactive Chart"),p(Me,`Zoom: ${u??""}%`),_(E,"width",c),_(E,"height",d),Lt(E,`transform: scale(${e(g)??""}); transform-origin: center;`),_(z,"x",f),_(z,"y",h),_(z,"width",D),_(z,"height",K),_(se,"transform",`translate(${Se??""}, ${Ne??""})`),_(b,"x1",je),_(b,"y1",He),_(b,"x2",et),_(b,"y2",Te),_(A,"x1",Le),_(A,"y1",Ee),_(A,"x2",Be),_(A,"y2",Ke)},[()=>Math.round(e(g)*100),()=>e(ie)(),()=>e($)(),()=>e(N)().left,()=>e(N)().top,()=>e(_e)(),()=>e(V)(),()=>e(N)().left,()=>e(N)().top,()=>e(N)().left,()=>e(N)().top+e(V)(),()=>e(N)().left+e(_e)(),()=>e(N)().top+e(V)(),()=>e(N)().left,()=>e(N)().top,()=>e(N)().left,()=>e(N)().top+e(V)()]),Ot("mouseleave",xe,oe),Ot("wheel",xe,fe),o(q,xe),zt()}Tt(["mousemove","click","keydown"]);function wn(q,n,l,i){n.parameters.forEach(g=>{l[g.name]=g.default}),i("parametersreset",{values:{...l}}),n.onParametersReset?.({values:{...l}})}var Sn=y('<span class="parameter-description svelte-ff2kid"> </span>'),An=(q,n,l)=>n(e(l).name,parseFloat(q.currentTarget.value)),zn=y('<div class="slider-container svelte-ff2kid"><input type="range" class="slider svelte-ff2kid"/> <div class="slider-value svelte-ff2kid"> </div></div>'),Cn=(q,n,l)=>n(e(l).name,q.currentTarget.value),Mn=y("<option> </option>"),Nn=y('<select class="dropdown svelte-ff2kid"></select>'),Rn=(q,n,l)=>n(e(l).name,q.currentTarget.checked),Tn=y('<label class="toggle-container svelte-ff2kid"><input type="checkbox" class="toggle-input svelte-ff2kid"/> <span class="toggle-slider svelte-ff2kid"></span></label>'),qn=(q,n,l)=>n(e(l).name,parseFloat(q.currentTarget.value)),En=y('<input type="number" class="number-input svelte-ff2kid"/>'),Dn=(q,n,l)=>n(e(l).name,q.currentTarget.value),In=y('<input type="text" class="text-input svelte-ff2kid"/>'),jn=(q,n,l)=>n(e(l).name,q.currentTarget.value),Ln=y('<input type="text" class="generic-input svelte-ff2kid" placeholder="Enter value..."/>'),Fn=y('<div class="parameter-control svelte-ff2kid"><label class="parameter-label svelte-ff2kid"> <!></label> <div class="parameter-input svelte-ff2kid"><!></div></div>'),Pn=y('<div class="no-parameters svelte-ff2kid"><p>No parameters available for this visualization.</p></div>'),Bn=y('<div class="parameter-controls svelte-ff2kid"><div class="controls-header svelte-ff2kid"><h4 class="controls-title svelte-ff2kid">Parameters</h4> <button class="reset-button svelte-ff2kid" type="button" title="Reset all parameters to default values">Reset</button></div> <div class="controls-grid svelte-ff2kid"></div> <!></div>');function Ht(q,n){At(n,!0);const l=It();let i=vt({});Dt(()=>{n.parameters.forEach(P=>{P.name in i||(i[P.name]=P.default)})});function g(P,x){i[P]=x,l("parameterchange",{parameter:P,value:x,allValues:{...i}}),n.onParameterChange?.({parameter:P,value:x,allValues:{...i}})}function M(P,x,ge){return P.constraints?.[x]??ge}var I=Bn(),ie=a(I),$=r(a(ie),2);$.__click=[wn,n,i,l],t(ie);var N=r(ie,2);Ce(N,21,()=>n.parameters,P=>P.name,(P,x)=>{var ge=Fn(),ke=a(ge),de=a(ke),O=r(de);{var oe=U=>{var J=Sn(),be=a(J,!0);t(J),S(()=>p(be,e(x).description)),o(U,J)};B(O,U=>{e(x).description&&U(oe)})}t(ke);var he=r(ke,2),fe=a(he);{var Ie=U=>{var J=zn(),be=a(J);gt(be),be.__input=[An,g,x];var qe=r(be,2),Me=a(qe,!0);t(qe),t(J),S((E,z,H)=>{_(be,"id",`param-${e(x).name??""}`),_(be,"min",E),_(be,"max",z),_(be,"step",H),p(Me,i[e(x).name])},[()=>M(e(x),"min",0),()=>M(e(x),"max",100),()=>M(e(x),"step",1)]),Rt(be,()=>i[e(x).name],E=>i[e(x).name]=E),o(U,J)},xe=U=>{var J=st(),be=Ye(J);{var qe=E=>{var z=Nn();z.__change=[Cn,g,x],Ce(z,20,()=>e(x).constraints?.options||[],H=>H,(H,Y)=>{var re=Mn(),se=a(re,!0);t(re);var ee={};S(()=>{p(se,Y),ee!==(ee=Y)&&(re.value=(re.__value=Y)??"")}),o(H,re)}),t(z),S(()=>_(z,"id",`param-${e(x).name??""}`)),xt(z,()=>i[e(x).name],H=>i[e(x).name]=H),o(E,z)},Me=E=>{var z=st(),H=Ye(z);{var Y=se=>{var ee=Tn(),F=a(ee);gt(F),F.__change=[Rn,g,x],Ut(2),t(ee),S(()=>_(F,"id",`param-${e(x).name??""}`)),Jt(F,()=>i[e(x).name],Z=>i[e(x).name]=Z),o(se,ee)},re=se=>{var ee=st(),F=Ye(ee);{var Z=b=>{var A=En();gt(A),A.__input=[qn,g,x],S((s,v,u)=>{_(A,"id",`param-${e(x).name??""}`),_(A,"min",s),_(A,"max",v),_(A,"step",u)},[()=>M(e(x),"min",void 0),()=>M(e(x),"max",void 0),()=>M(e(x),"step","any")]),Rt(A,()=>i[e(x).name],s=>i[e(x).name]=s),o(b,A)},me=b=>{var A=st(),s=Ye(A);{var v=c=>{var d=In();gt(d),d.__input=[Dn,g,x],S(()=>{_(d,"id",`param-${e(x).name??""}`),_(d,"placeholder",e(x).description||"")}),Rt(d,()=>i[e(x).name],f=>i[e(x).name]=f),o(c,d)},u=c=>{var d=Ln();gt(d),d.__input=[jn,g,x],S(()=>_(d,"id",`param-${e(x).name??""}`)),Rt(d,()=>i[e(x).name],f=>i[e(x).name]=f),o(c,d)};B(s,c=>{e(x).type==="text"||e(x).type==="string"?c(v):c(u,!1)},!0)}o(b,A)};B(F,b=>{e(x).type==="number"?b(Z):b(me,!1)},!0)}o(se,ee)};B(H,se=>{e(x).type==="toggle"||e(x).type==="boolean"?se(Y):se(re,!1)},!0)}o(E,z)};B(be,E=>{e(x).type==="dropdown"||e(x).type==="select"||e(x).constraints?.options?E(qe):E(Me,!1)},!0)}o(U,J)};B(fe,U=>{e(x).type==="slider"||e(x).type==="number"&&e(x).constraints?.min!==void 0&&e(x).constraints?.max!==void 0?U(Ie):U(xe,!1)})}t(he),t(ge),S(()=>{_(ge,"data-parameter",e(x).name),_(ke,"for",`param-${e(x).name??""}`),p(de,`${e(x).name??""} `)}),o(P,ge)}),t(N);var _e=r(N,2);{var V=P=>{var x=Pn();o(P,x)};B(_e,P=>{n.parameters.length===0&&P(V)})}t(I),o(q,I),zt()}Tt(["click","input","change"]);var On=ht('<text text-anchor="middle" class="layer-label svelte-s5w31d"> </text>'),Un=ht('<line class="edge svelte-s5w31d"></line>'),Hn=ht('<circle class="node svelte-s5w31d"></circle>'),Vn=y('<div class="nn-visualizer svelte-s5w31d"><header class="nn-header svelte-s5w31d"><h3 class="title svelte-s5w31d">Neural Network Visualizer</h3> <p class="subtitle svelte-s5w31d">Adjust structure and activation to explore architectures</p></header> <div class="controls svelte-s5w31d"><!></div> <div class="canvas-wrapper svelte-s5w31d"><svg class="nn-svg svelte-s5w31d" role="img" aria-label="Neural network diagram"><!><!><!><g><rect width="150" height="22" rx="6" class="badge svelte-s5w31d"></rect><text x="75" y="15" text-anchor="middle" class="badge-text svelte-s5w31d"> </text></g></svg></div></div>');function Yn(q,n){At(n,!0);let l=$e(n,"inputSize",3,3),i=$e(n,"outputSize",3,2),g=$e(n,"hiddenLayers",7,2),M=$e(n,"neuronsPerHidden",7,5),I=$e(n,"activation",7,"relu");const ie=ne(()=>()=>{const z=[l()];for(let H=0;H<g();H++)z.push(M());return z.push(i()),z}),$=ne(()=>()=>[{name:"Hidden Layers",type:"slider",default:g(),description:"Number of hidden layers",constraints:{min:0,max:5,step:1}},{name:"Neurons/Hidden",type:"slider",default:M(),description:"Neurons per hidden layer",constraints:{min:1,max:12,step:1}},{name:"Activation",type:"select",default:I(),description:"Activation function",constraints:{options:["relu","sigmoid","tanh","linear"]}}]);function N(z){const{parameter:H,value:Y}=z.detail;H==="Hidden Layers"&&g(Number(Y)),H==="Neurons/Hidden"&&M(Number(Y)),H==="Activation"&&I(Y)}const _e=800,V=420,P={top:20,right:40,bottom:20,left:40},x=ne(()=>()=>_e-P.left-P.right),ge=ne(()=>()=>V-P.top-P.bottom);function ke(){const z=[],H=e(ie)().length;for(let Y=0;Y<H;Y++){const re=e(ie)()[Y];for(let se=0;se<re;se++){const ee=P.left+e(x)*Y/Math.max(1,H-1),F=P.top+e(ge)*(se+1)/(re+1);z.push({x:ee,y:F,layer:Y,index:se})}}return z}const de=ne(()=>ke);function O(z){return z===0?"Input":z===e(ie)().length-1?"Output":`Hidden ${z}`}var oe=Vn(),he=r(a(oe),2),fe=a(he);Ht(fe,{get parameters(){return e($)},onParameterChange:z=>N(new CustomEvent("parameterchange",{detail:z}))}),t(he);var Ie=r(he,2),xe=a(Ie);_(xe,"width",_e),_(xe,"height",V);var U=a(xe);Ce(U,17,()=>e(ie)(),St,(z,H,Y)=>{var re=On();_(re,"y",16);var se=a(re);t(re),S((ee,F)=>{_(re,"x",ee),p(se,`${F??""} (${e(H)??""})`)},[()=>P.left+e(x)()*Y/Math.max(1,e(ie)().length-1),()=>O(Y)]),o(z,re)});var J=r(U);Ce(J,17,()=>Array(e(ie)().length-1),St,(z,H,Y)=>{var re=st(),se=Ye(re);Ce(se,17,()=>e(de)().filter(ee=>ee.layer===Y),ee=>ee.index,(ee,F)=>{var Z=st(),me=Ye(Z);Ce(me,17,()=>e(de)().filter(b=>b.layer===Y+1),b=>b.index,(b,A)=>{var s=Un();S(()=>{_(s,"x1",e(F).x),_(s,"y1",e(F).y),_(s,"x2",e(A).x),_(s,"y2",e(A).y)}),o(b,s)}),o(ee,Z)}),o(z,re)});var be=r(J);Ce(be,17,()=>e(de)(),z=>`${z.layer}-${z.index}`,(z,H)=>{var Y=Hn();_(Y,"r",12),S(()=>{_(Y,"cx",e(H).x),_(Y,"cy",e(H).y)}),o(z,Y)});var qe=r(be);_(qe,"transform",`translate(${_e-160}, ${V-24})`);var Me=r(a(qe)),E=a(Me);t(Me),t(qe),t(xe),t(Ie),t(oe),S(()=>p(E,`Activation: ${I()??""}`)),o(q,oe),zt()}function Gn(q,n,l,i,g){w(n,!0),e(l)&&(cancelAnimationFrame(e(l)),w(l,null)),i("simulationPause",{blockId:g().id})}function Xn(q,n,l,i){if(e(n).length===0){alert("No simulation data to export. Run the simulation first.");return}const g=l().content.parameters.reduce((M,I)=>(M[I.name]=I.default,M),{});oa(l().content.simulationType,g,e(n)),i("simulationReportExport",{blockId:l().id})}function Zn(q,n,l,i,g,M,I,ie){e(n)&&!e(l)||(i(),g("simulationStep",{step:e(M),state:e(I),blockId:ie().id}))}function Jn(q,n){const l=q.target;w(n,parseFloat(l.value),!0)}function Wn(q,n,l,i,g){w(n,!e(n)),e(n)&&!e(l)?i():!e(n)&&e(l)&&g()}var Kn=y('<div class="parameters-section svelte-1u88794"><!></div>'),Qn=(q,n)=>n("json"),$n=(q,n)=>n("csv"),er=y('<div class="simulation-display svelte-1u88794"><h4 class="svelte-1u88794">Simulation Visualization</h4> <div class="visualization-placeholder svelte-1u88794"><p class="svelte-1u88794"> </p> <p class="svelte-1u88794"> </p> <p class="svelte-1u88794"> </p></div></div>'),tr=y('<div class="no-visualization svelte-1u88794"><p>No visualization configured for this simulation.</p></div>'),ar=y('<div class="state-item svelte-1u88794"><span class="state-key svelte-1u88794"> </span> <span class="state-value svelte-1u88794"> </span></div>'),nr=y('<div class="source-attribution svelte-1u88794"><small><strong>Source:</strong> <a target="_blank" rel="noopener" class="svelte-1u88794"> </a> <br/> <em> </em> <br/> <span class="confidence-score svelte-1u88794"> </span></small></div>'),rr=y('<div class="simulation-block svelte-1u88794"><header class="simulation-header svelte-1u88794"><div class="simulation-title-section svelte-1u88794"><h3 class="simulation-title svelte-1u88794"> </h3> <div class="simulation-status svelte-1u88794"><span> </span> <span class="step-counter svelte-1u88794"> </span></div></div></header> <div class="simulation-content svelte-1u88794"><!> <div class="controls-section svelte-1u88794"><div class="playback-controls svelte-1u88794"><button type="button" title="Start simulation">‚ñ∂Ô∏è Start</button> <button type="button" title="Pause simulation">‚è∏Ô∏è Pause</button> <button class="control-btn stop-btn svelte-1u88794" type="button" title="Stop simulation">‚èπÔ∏è Stop</button> <button class="control-btn reset-btn svelte-1u88794" type="button" title="Reset simulation">üîÑ Reset</button> <button class="control-btn export-btn svelte-1u88794" type="button" title="Export results as JSON">üìä Export JSON</button> <button class="control-btn export-btn svelte-1u88794" type="button" title="Export results as CSV">üìà Export CSV</button> <button class="control-btn report-btn svelte-1u88794" type="button" title="Export simulation report">üìã Report</button> <button class="control-btn step-btn svelte-1u88794" type="button" title="Execute single step">‚è≠Ô∏è Step</button></div> <div class="simulation-settings svelte-1u88794"><div class="speed-control svelte-1u88794"><label>Speed:</label> <input type="range" min="0.1" max="5" step="0.1" class="speed-slider svelte-1u88794"/> <span class="speed-value svelte-1u88794"> </span></div> <div class="auto-run-control svelte-1u88794"><label class="auto-run-label svelte-1u88794"><input type="checkbox" class="auto-run-checkbox svelte-1u88794"/> Auto-run on parameter change</label></div></div></div> <div class="visualization-section svelte-1u88794"><div class="visualization-container svelte-1u88794"><!></div></div> <div class="state-section svelte-1u88794"><h4 class="state-title svelte-1u88794">Current State</h4> <div class="state-display svelte-1u88794"></div></div> <!></div></div>');function Qt(q,n){At(n,!0);const l=It();let i=$e(n,"block",7);$e(n,"editable",3,!1);let g=pe(vt({...i().content.initialState})),M=pe(!1),I=pe(!1),ie=pe(null),$=pe(0),N=pe(1),_e=pe(!1),V=pe(vt([]));const P=ne(()=>()=>i().content.parameters.map(W=>({name:W.name,type:W.type,default:W.default,description:W.description,constraints:{min:W.min,max:W.max,step:W.step,options:W.options}})));function x(W){const{parameter:le,value:we}=W.detail,ye=i().content.parameters.findIndex(lt=>lt.name===le);ye>=0&&(i().content.parameters[ye].default=we),e(M)&&(de(),e(_e)&&ge()),l("parameterChange",{parameter:le,value:we,blockId:i().id})}function ge(){e(M)&&!e(I)||(w(M,!0),w(I,!1),he(),l("simulationStart",{blockId:i().id}))}function ke(){w(M,!1),w(I,!1),e(ie)&&(cancelAnimationFrame(e(ie)),w(ie,null)),l("simulationStop",{blockId:i().id})}function de(){ke(),w(g,{...i().content.initialState},!0),w($,0),w(V,[],!0),l("simulationReset",{blockId:i().id})}function O(W="json"){if(e(V).length===0){alert("No simulation data to export. Run the simulation first.");return}const le=i().content.parameters.reduce((we,ye)=>(we[ye.name]=ye.default,we),{});ia(i().content.simulationType,le,e(V),W),l("simulationExport",{format:W,blockId:i().id})}function oe(){try{const W=new Function("state","parameters","step",i().content.stepFunction),le=i().content.parameters.reduce((we,ye)=>(we[ye.name]=ye.default,we),{});w(g,W(e(g),le,e($))||e(g),!0),e(V).push({step:e($),time:e($)*.016,state:{...e(g)},timestamp:Date.now()}),na($)}catch(W){l("simulationError",{error:W.message,step:e($)}),ke()}}function he(){if(!e(M)||e(I))return;oe();const W=Math.max(16,1e3/(60*e(N)));setTimeout(()=>{e(M)&&!e(I)&&w(ie,requestAnimationFrame(he),!0)},W)}Dt(()=>()=>{e(ie)&&cancelAnimationFrame(e(ie))});function fe(W){return typeof W=="number"?W.toFixed(3):typeof W=="object"?JSON.stringify(W,null,2):String(W)}var Ie=rr(),xe=a(Ie),U=a(xe),J=a(U),be=a(J);t(J);var qe=r(J,2),Me=a(qe);let E;var z=a(Me,!0);t(Me);var H=r(Me,2),Y=a(H);t(H),t(qe),t(U),t(xe);var re=r(xe,2),se=a(re);{var ee=W=>{var le=Kn(),we=a(le);{let ye=ne(()=>e(P)());Ht(we,{get parameters(){return e(ye)},onParameterChange:lt=>x(new CustomEvent("parameterchange",{detail:lt}))})}t(le),o(W,le)};B(se,W=>{e(P)().length>0&&W(ee)})}var F=r(se,2),Z=a(F),me=a(Z);let b;me.__click=ge;var A=r(me,2);let s;A.__click=[Gn,I,ie,l,i];var v=r(A,2);v.__click=ke;var u=r(v,2);u.__click=de;var c=r(u,2);c.__click=[Qn,O];var d=r(c,2);d.__click=[$n,O];var f=r(d,2);f.__click=[Xn,V,i,l];var h=r(f,2);h.__click=[Zn,M,I,oe,l,$,g,i],t(Z);var D=r(Z,2),K=a(D),Se=a(K),Ne=r(Se,2);gt(Ne),Ne.__input=[Jn,N];var je=r(Ne,2),He=a(je);t(je),t(K);var et=r(K,2),Te=a(et),Le=a(Te);gt(Le),Le.__change=[Wn,_e,M,ge,ke],Ut(),t(Te),t(et),t(D),t(F);var Ee=r(F,2),Be=a(Ee),Ke=a(Be);{var ut=W=>{var le=er(),we=r(a(le),2),ye=a(we),lt=a(ye);t(ye);var Je=r(ye,2),dt=a(Je);t(Je);var _t=r(Je,2),bt=a(_t);t(_t),t(we),t(le),S(()=>{p(lt,`Visualization Type: ${i().content.visualization.type??""}`),p(dt,`Dimensions: ${i().content.visualization.width??""} √ó ${i().content.visualization.height??""}`),p(bt,`Interactive: ${i().content.visualization.interactive?"Yes":"No"}`)}),o(W,le)},Ge=W=>{var le=tr();o(W,le)};B(Ke,W=>{i().content.visualization?W(ut):W(Ge,!1)})}t(Be),t(Ee);var Xe=r(Ee,2),De=r(a(Xe),2);Ce(De,21,()=>Object.entries(e(g)),([W,le])=>W,(W,le)=>{var we=ne(()=>Zt(e(le),2));let ye=()=>e(we)[0],lt=()=>e(we)[1];var Je=ar(),dt=a(Je),_t=a(dt);t(dt);var bt=r(dt,2),R=a(bt,!0);t(bt),t(Je),S(X=>{p(_t,`${ye()??""}:`),p(R,X)},[()=>fe(lt())]),o(W,Je)}),t(De),t(Xe);var Ze=r(Xe,2);{var nt=W=>{var le=nr(),we=a(le),ye=r(a(we),2),lt=a(ye,!0);t(ye);var Je=r(ye,4),dt=a(Je);t(Je);var _t=r(Je,4),bt=a(_t);t(_t),t(we),t(le),S(R=>{_(ye,"href",i().content.sourceReference.originalUrl),p(lt,i().content.sourceReference.originalUrl),p(dt,`Transformation: ${i().content.sourceReference.transformationReasoning??""}`),p(bt,`Confidence: ${R??""}%`)},[()=>Math.round(i().content.sourceReference.confidence*100)]),o(W,le)};B(Ze,W=>{i().content.sourceReference&&W(nt)})}t(re),t(Ie),S((W,le,we,ye)=>{_(Ie,"data-block-id",i().id),p(be,`${i().content.simulationType??""} Simulation`),E=ot(Me,1,"status-indicator svelte-1u88794",null,E,W),p(z,e(M)?e(I)?"Paused":"Running":"Stopped"),p(Y,`Step: ${e($)??""}`),b=ot(me,1,"control-btn start-btn svelte-1u88794",null,b,le),me.disabled=e(M)&&!e(I),s=ot(A,1,"control-btn pause-btn svelte-1u88794",null,s,we),A.disabled=!e(M),v.disabled=!e(M),c.disabled=e(V).length===0,d.disabled=e(V).length===0,f.disabled=e(V).length===0,h.disabled=e(M)&&!e(I),_(Se,"for",`speed-${i().id??""}`),_(Ne,"id",`speed-${i().id??""}`),p(He,`${ye??""}x`)},[()=>({running:e(M),paused:e(I)}),()=>({active:e(M)&&!e(I)}),()=>({active:e(I)}),()=>e(N).toFixed(1)]),Rt(Ne,()=>e(N),W=>w(N,W)),Jt(Le,()=>e(_e),W=>w(_e,W)),o(q,Ie),zt()}Tt(["click","input","change"]);var sr=y('<p class="visualization-description svelte-abft61"> </p>'),ir=y('<div class="parameter-section svelte-abft61"><!></div>'),or=y('<p class="svelte-abft61"><strong>Description:</strong> </p>'),lr=y('<li class="svelte-abft61"> </li>'),cr=y('<p class="svelte-abft61"><strong>Time Complexity:</strong> </p>'),vr=y('<div class="algorithm-visualization svelte-abft61"><h4 class="svelte-abft61">Algorithm Visualization</h4> <div class="algorithm-content svelte-abft61"><p class="svelte-abft61"><strong>Algorithm:</strong> </p> <!> <div class="algorithm-steps svelte-abft61"><h5 class="svelte-abft61">Steps:</h5> <ol class="svelte-abft61"></ol></div> <!></div></div>'),ur=y('<div class="unsupported-visualization svelte-abft61"><p> </p></div>'),dr=y("<br/> <em> </em>",1),_r=y('<div class="source-attribution svelte-abft61"><small>Source: <a target="_blank" rel="noopener" class="svelte-abft61"> </a> <!></small></div>'),fr=y('<div class="interactive-visualization-block svelte-abft61"><header class="visualization-header svelte-abft61"><h3 class="visualization-title svelte-abft61"> </h3> <!></header> <div class="visualization-content svelte-abft61"><!> <div class="data-manipulation-section svelte-abft61"><!></div> <div class="visualization-display svelte-abft61"><!></div> <!></div></div>');function os(q,n){At(n,!0);const l=It();let i=$e(n,"editable",3,!1),g=pe(vt(n.block.content.data)),M=vt(n.block.content.config.parameters||[]),I=pe(vt([]));function ie(E){const{parameter:z,value:H}=E.detail,Y=M.findIndex(re=>re.name===z);Y>=0&&(M[Y].default=H),N(),l("parameterChange",{parameter:z,value:H})}function $(E){const{data:z,filters:H,sort:Y,search:re}=E.detail;w(g,z,!0),w(I,H,!0),l("dataChange",{data:z,filters:H,sort:Y,search:re})}function N(){w(g,{...e(g)},!0)}function _e(E){l("chartInteraction",E.detail)}var V=fr(),P=a(V),x=a(P),ge=a(x,!0);t(x);var ke=r(x,2);{var de=E=>{var z=sr(),H=a(z,!0);t(z),S(()=>p(H,n.block.content.config.description)),o(E,z)};B(ke,E=>{n.block.content.config.description&&E(de)})}t(P);var O=r(P,2),oe=a(O);{var he=E=>{var z=ir(),H=a(z);Ht(H,{get parameters(){return M},onParameterChange:Y=>ie(new CustomEvent("parameterchange",{detail:Y}))}),t(z),o(E,z)};B(oe,E=>{M.length>0&&E(he)})}var fe=r(oe,2),Ie=a(fe);Wt(Ie,{get data(){return e(g)},get filters(){return e(I)},onDataChange:E=>$(new CustomEvent("datachange",{detail:E}))}),t(fe);var xe=r(fe,2),U=a(xe);{var J=E=>{Kt(E,{get data(){return e(g)},get config(){return n.block.content.config},oninteraction:_e})},be=E=>{var z=st(),H=Ye(z);{var Y=se=>{{let ee=ne(()=>n.block.content.config.parameters?.find(A=>A.name==="inputSize")?.default||3),F=ne(()=>n.block.content.config.parameters?.find(A=>A.name==="outputSize")?.default||2),Z=ne(()=>n.block.content.config.parameters?.find(A=>A.name==="hiddenLayers")?.default||2),me=ne(()=>n.block.content.config.parameters?.find(A=>A.name==="neuronsPerHidden")?.default||5),b=ne(()=>n.block.content.config.parameters?.find(A=>A.name==="activation")?.default||"relu");Yn(se,{get inputSize(){return e(ee)},get outputSize(){return e(F)},get hiddenLayers(){return e(Z)},get neuronsPerHidden(){return e(me)},get activation(){return e(b)}})}},re=se=>{var ee=st(),F=Ye(ee);{var Z=b=>{{let A=ne(()=>({id:n.block.id+"-sim",type:"simulation",content:{simulationType:n.block.content.config.title||"Generic Simulation",parameters:n.block.content.config.parameters||[],initialState:n.block.content.data||{},stepFunction:"return state;",visualization:{type:"generic",width:600,height:400,interactive:!0,config:{}},sourceReference:n.block.content.sourceReference}}));Qt(b,{get block(){return e(A)},get editable(){return i()}})}},me=b=>{var A=st(),s=Ye(A);{var v=c=>{var d=vr(),f=r(a(d),2),h=a(f),D=r(a(h));t(h);var K=r(h,2);{var Se=Te=>{var Le=or(),Ee=r(a(Le));t(Le),S(()=>p(Ee,` ${n.block.content.config.description??""}`)),o(Te,Le)};B(K,Te=>{n.block.content.config.description&&Te(Se)})}var Ne=r(K,2),je=r(a(Ne),2);Ce(je,21,()=>n.block.content.data?.steps||["Step 1","Step 2","Step 3"],St,(Te,Le)=>{var Ee=lr(),Be=a(Ee,!0);t(Ee),S(()=>p(Be,e(Le))),o(Te,Ee)}),t(je),t(Ne);var He=r(Ne,2);{var et=Te=>{var Le=cr(),Ee=r(a(Le));t(Le),S(()=>p(Ee,` ${n.block.content.data.complexity??""}`)),o(Te,Le)};B(He,Te=>{n.block.content.data?.complexity&&Te(et)})}t(f),t(d),S(()=>p(D,` ${n.block.content.config.title??""}`)),o(c,d)},u=c=>{var d=st(),f=Ye(d);{var h=K=>{dn(K,{get data(){return e(g)},get title(){return n.block.content.config.title},get description(){return n.block.content.config.description}})},D=K=>{var Se=ur(),Ne=a(Se),je=a(Ne);t(Ne),t(Se),S(()=>p(je,`Unsupported visualization type: ${n.block.content.visualizationType??""}`)),o(K,Se)};B(f,K=>{n.block.content.visualizationType==="data-explorer"?K(h):K(D,!1)},!0)}o(c,d)};B(s,c=>{n.block.content.visualizationType==="algorithm"?c(v):c(u,!1)},!0)}o(b,A)};B(F,b=>{n.block.content.visualizationType==="simulation"?b(Z):b(me,!1)},!0)}o(se,ee)};B(H,se=>{n.block.content.visualizationType==="neural-network"?se(Y):se(re,!1)},!0)}o(E,z)};B(U,E=>{n.block.content.visualizationType==="chart"?E(J):E(be,!1)})}t(xe);var qe=r(xe,2);{var Me=E=>{var z=_r(),H=a(z),Y=r(a(H)),re=a(Y,!0);t(Y);var se=r(Y,2);{var ee=F=>{var Z=dr(),me=r(Ye(Z),2),b=a(me);t(me),S(()=>p(b,`Transformation: ${n.block.content.sourceReference.transformationReasoning??""}`)),o(F,Z)};B(se,F=>{n.block.content.sourceReference.transformationReasoning&&F(ee)})}t(H),t(z),S(()=>{_(Y,"href",n.block.content.sourceReference.originalUrl),p(re,n.block.content.sourceReference.originalUrl)}),o(E,z)};B(qe,E=>{n.block.content.sourceReference&&E(Me)})}t(O),t(V),S(()=>{_(V,"data-block-id",n.block.id),p(ge,n.block.content.config.title)}),o(q,V),zt()}var mr=y('<div class="chart-description svelte-8a503d"><p class="svelte-8a503d">Interactive chart generated from web content</p></div>'),pr=y('<span class="stat-item svelte-8a503d"><strong>Active Filters:</strong> </span>'),gr=y('<small class="svelte-8a503d"> </small>'),hr=y('<li class="interaction-item svelte-8a503d"><strong class="svelte-8a503d"> </strong> <!></li>'),br=y('<div class="interactions-info svelte-8a503d"><h5 class="svelte-8a503d">Available Interactions:</h5> <ul class="interactions-list svelte-8a503d"></ul></div>'),yr=y('<div class="source-attribution svelte-8a503d"><small><strong>Source:</strong> <a target="_blank" rel="noopener" class="svelte-8a503d"> </a> <br/> <em> </em> <br/> <span class="confidence-score svelte-8a503d"> </span></small></div>'),xr=y('<div class="interactive-chart-block svelte-8a503d"><header class="chart-header svelte-8a503d"><div class="chart-title-section svelte-8a503d"><h3 class="chart-title svelte-8a503d"> </h3> <span class="chart-type-badge svelte-8a503d"> </span></div> <!></header> <div class="chart-content svelte-8a503d"><div class="data-controls-section svelte-8a503d"><!></div> <div class="chart-display-section svelte-8a503d"><!></div> <div class="chart-info svelte-8a503d"><div class="chart-stats svelte-8a503d"><span class="stat-item svelte-8a503d"><strong>Data Points:</strong> </span> <span class="stat-item svelte-8a503d"><strong>Chart Type:</strong> </span> <!></div> <!></div> <!></div></div>');function ls(q,n){At(n,!0);const l=It();$e(n,"editable",3,!1);let i=pe(vt(n.block.content.data)),g=pe(vt(n.block.content.filters||[]));const M=ne(()=>()=>({title:n.block.content.title||"Untitled Chart",description:n.block.content.description||"",parameters:[],layout:{width:600,height:400,margin:{top:20,right:20,bottom:40,left:40},responsive:!0},styling:{theme:"light",colors:["#0066cc","#ff6b35","#28a745","#ffc107","#dc3545"],fonts:{family:"system-ui",size:12}},animations:{enabled:!0,duration:300,easing:"ease-in-out",transitions:["opacity","transform"]}}));function I(F){const{data:Z,filters:me}=F.detail;w(i,Z,!0),w(g,me,!0),l("dataChange",{data:Z,filters:me})}function ie(F){const{type:Z,point:me,coordinates:b,zoomLevel:A}=F;n.block.content.interactions?.forEach(s=>{if(s.event===Z)try{l("interactionExecuted",{interaction:s.parameter,point:me})}catch(v){console.error("Interaction error:",v)}}),l("chartInteraction",{type:Z,point:me,coordinates:b,zoomLevel:A})}function $(F){return{line:"Line Chart",bar:"Bar Chart",scatter:"Scatter Plot",heatmap:"Heat Map",network:"Network Diagram"}[F]||F}var N=xr(),_e=a(N),V=a(_e),P=a(V),x=a(P,!0);t(P);var ge=r(P,2),ke=a(ge,!0);t(ge),t(V);var de=r(V,2);{var O=F=>{var Z=mr();o(F,Z)};B(de,F=>{n.block.content.sourceReference&&F(O)})}t(_e);var oe=r(_e,2),he=a(oe),fe=a(he);Wt(fe,{get data(){return n.block.content.data},get filters(){return e(g)},onDataChange:F=>I(new CustomEvent("datachange",{detail:F}))}),t(he);var Ie=r(he,2),xe=a(Ie);{let F=ne(()=>e(M)());Kt(xe,{get data(){return e(i)},get config(){return e(F)},oninteraction:ie})}t(Ie);var U=r(Ie,2),J=a(U),be=a(J),qe=r(a(be));t(be);var Me=r(be,2),E=r(a(Me));t(Me);var z=r(Me,2);{var H=F=>{var Z=pr(),me=r(a(Z));t(Z),S(b=>p(me,` ${b??""}`),[()=>e(g).filter(b=>b.active).length]),o(F,Z)};B(z,F=>{e(g).length>0&&F(H)})}t(J);var Y=r(J,2);{var re=F=>{var Z=br(),me=r(a(Z),2);Ce(me,21,()=>n.block.content.interactions,b=>b.parameter,(b,A)=>{var s=hr(),v=a(s),u=a(v);t(v);var c=r(v),d=r(c);{var f=h=>{var D=gr(),K=a(D);t(D),S(()=>p(K,`(debounced: ${e(A).debounce??""}ms)`)),o(h,D)};B(d,h=>{e(A).debounce&&h(f)})}t(s),S(()=>{p(u,`${e(A).event??""}:`),p(c,` ${e(A).parameter??""} `)}),o(b,s)}),t(me),t(Z),o(F,Z)};B(Y,F=>{n.block.content.interactions&&n.block.content.interactions.length>0&&F(re)})}t(U);var se=r(U,2);{var ee=F=>{var Z=yr(),me=a(Z),b=r(a(me),2),A=a(b,!0);t(b);var s=r(b,4),v=a(s);t(s);var u=r(s,4),c=a(u);t(u),t(me),t(Z),S(d=>{_(b,"href",n.block.content.sourceReference.originalUrl),p(A,n.block.content.sourceReference.originalUrl),p(v,`Transformation: ${n.block.content.sourceReference.transformationReasoning??""}`),p(c,`Confidence: ${d??""}%`)},[()=>Math.round(n.block.content.sourceReference.confidence*100)]),o(F,Z)};B(se,F=>{n.block.content.sourceReference&&F(ee)})}t(oe),t(N),S((F,Z,me)=>{_(N,"data-block-id",n.block.id),p(x,F),p(ke,n.block.content.chartType),p(qe,` ${Z??""}`),p(E,` ${me??""}`)},[()=>$(n.block.content.chartType),()=>Array.isArray(e(i))?e(i).length:Object.keys(e(i)||{}).length,()=>$(n.block.content.chartType)]),o(q,N),zt()}function kr(q,n,l,i,g,M,I){w(n,{...l().content.initialState},!0),w(i,null),w(g,null),M(),I("diagramreset",{})}var wr=y('<p class="diagram-description svelte-18n6glq"> </p>'),Sr=y('<div class="parameters-section svelte-18n6glq"><h4 class="section-title svelte-18n6glq">Parameters</h4> <!></div>'),Ar=y('<div class="info-item svelte-18n6glq"><span class="info-label svelte-18n6glq">Label:</span> <span class="info-value svelte-18n6glq"> </span></div>'),zr=y('<div class="info-item svelte-18n6glq"><span class="info-label svelte-18n6glq">Description:</span> <span class="info-value svelte-18n6glq"> </span></div>'),Cr=y('<div class="info-item svelte-18n6glq"><span class="info-label svelte-18n6glq">State:</span> <span class="info-value svelte-18n6glq"> </span></div>'),Mr=y('<div class="element-info-panel svelte-18n6glq"><h4 class="info-title svelte-18n6glq">Element Information</h4> <div class="info-content svelte-18n6glq"><div class="info-item svelte-18n6glq"><span class="info-label svelte-18n6glq">ID:</span> <span class="info-value svelte-18n6glq"> </span></div> <div class="info-item svelte-18n6glq"><span class="info-label svelte-18n6glq">Type:</span> <span class="info-value svelte-18n6glq"> </span></div> <!> <!> <!></div></div>'),Nr=y('<div class="source-attribution svelte-18n6glq"><small><strong>Source:</strong> <a target="_blank" rel="noopener" class="svelte-18n6glq"> </a> <br/> <em> </em> <br/> <span class="confidence-score svelte-18n6glq"> </span></small></div>'),Rr=y('<div class="system-diagram-block svelte-18n6glq"><header class="diagram-header svelte-18n6glq"><div class="diagram-title-section svelte-18n6glq"><h3 class="diagram-title svelte-18n6glq"> </h3> <div class="diagram-actions svelte-18n6glq"><button class="action-btn reset-btn svelte-18n6glq" type="button" title="Reset diagram">üîÑ Reset</button> <button class="action-btn export-btn svelte-18n6glq" type="button" title="Export as SVG">üì• Export</button></div></div> <!></header> <div class="diagram-content svelte-18n6glq"><!> <div class="diagram-display svelte-18n6glq"><svg class="system-diagram-svg svelte-18n6glq" width="100%" height="400" preserveAspectRatio="xMidYMid meet"><defs><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#6c757d"></polygon></marker></defs></svg></div> <!> <!></div></div>');function Tr(q,n){At(n,!0);const l=It();let i=$e(n,"block",7);$e(n,"editable",3,!1);let g=pe(void 0),M=pe(vt({...i().content.initialState})),I=pe(null),ie=pe(null);const $=ne(()=>()=>i().content.parameters.map(s=>({name:s.name,type:s.type,default:s.default,description:s.description,constraints:{min:s.min,max:s.max,step:s.step,options:s.options}})));function N(s){const{parameter:v,value:u}=s.detail,c=i().content.parameters.findIndex(d=>d.name===v);c>=0&&(i().content.parameters[c].default=u),_e(),x(),l("parameterchange",{parameter:v,value:u})}function _e(){const s=i().content.parameters.reduce((v,u)=>(v[u.name]=u.default,v),{});try{if(i().content.updateFunction){const v=new Function("state","parameters",i().content.updateFunction);w(M,v(e(M),s)||e(M),!0)}}catch(v){l("diagramerror",{error:v.message})}}function V(s,v){v.stopPropagation(),w(I,e(I)===s?null:s,!0);const u=i().content.elements.find(c=>c.id===s);u&&l("elementclick",{elementId:s,element:u,state:e(M),blockId:i().id})}function P(s){if(w(ie,s,!0),s){const v=i().content.elements.find(u=>u.id===s);v&&l("elementhover",{elementId:s,element:v,state:e(M),blockId:i().id})}}function x(){if(!e(g))return;for(;e(g).firstChild;)e(g).removeChild(e(g).firstChild);const s=i().content.layout.width,v=i().content.layout.height;e(g).setAttribute("viewBox",`0 0 ${s} ${v}`),i().content.elements.forEach(u=>{ge(u)}),i().content.connections.forEach(u=>{he(u)})}function ge(s){const v=document.createElementNS("http://www.w3.org/2000/svg","g");v.setAttribute("class",`diagram-element element-${s.type}`),v.setAttribute("data-element-id",s.id);const u=e(M)[s.id],c=u?.opacity??s.style.opacity??1,d=u?.scale??s.style.scale??1;v.setAttribute("opacity",c.toString()),v.setAttribute("transform",`translate(${s.position.x}, ${s.position.y}) scale(${d})`);let f;switch(s.type){case"rectangle":f=ke(s);break;case"circle":f=de(s);break;case"text":f=O(s);break;case"image":f=oe(s);break;default:f=ke(s)}if(f.style.cursor="pointer",f.onclick=h=>V(s.id,h),f.onmouseenter=()=>P(s.id),f.onmouseleave=()=>P(null),e(I)===s.id&&(f.setAttribute("stroke","#0066cc"),f.setAttribute("stroke-width","3")),e(ie)===s.id&&f.setAttribute("filter","brightness(1.1)"),v.appendChild(f),s.label){const h=O({...s,text:s.label,position:{y:s.size.height+20},style:{...s.style,fontSize:12,textAnchor:"middle"}});v.appendChild(h)}e(g)&&e(g).appendChild(v)}function ke(s){const v=document.createElementNS("http://www.w3.org/2000/svg","rect");return v.setAttribute("width",s.size.width.toString()),v.setAttribute("height",s.size.height.toString()),v.setAttribute("fill",s.style.fill||"#e9ecef"),v.setAttribute("stroke",s.style.stroke||"#6c757d"),v.setAttribute("stroke-width",s.style.strokeWidth?.toString()||"1"),v.setAttribute("rx",s.style.borderRadius?.toString()||"4"),v}function de(s){const v=document.createElementNS("http://www.w3.org/2000/svg","circle");return v.setAttribute("cx",(s.size.width/2).toString()),v.setAttribute("cy",(s.size.height/2).toString()),v.setAttribute("r",(Math.min(s.size.width,s.size.height)/2).toString()),v.setAttribute("fill",s.style.fill||"#e9ecef"),v.setAttribute("stroke",s.style.stroke||"#6c757d"),v.setAttribute("stroke-width",s.style.strokeWidth?.toString()||"1"),v}function O(s){const v=document.createElementNS("http://www.w3.org/2000/svg","text");return v.setAttribute("x",(s.size?.width/2||0).toString()),v.setAttribute("y",(s.size?.height/2||0).toString()),v.setAttribute("text-anchor",s.style.textAnchor||"middle"),v.setAttribute("dominant-baseline","central"),v.setAttribute("fill",s.style.fill||"#1a1a1a"),v.setAttribute("font-size",s.style.fontSize?.toString()||"14"),v.setAttribute("font-family",s.style.fontFamily||"Arial, sans-serif"),v.textContent=s.text||s.label||"",v}function oe(s){const v=document.createElementNS("http://www.w3.org/2000/svg","image");return v.setAttribute("width",s.size.width.toString()),v.setAttribute("height",s.size.height.toString()),v.setAttribute("href",s.src||""),v}function he(s){const v=i().content.elements.find(K=>K.id===s.from),u=i().content.elements.find(K=>K.id===s.to);if(!v||!u)return;const c=document.createElementNS("http://www.w3.org/2000/svg","line"),d=v.position.x+v.size.width/2,f=v.position.y+v.size.height/2,h=u.position.x+u.size.width/2,D=u.position.y+u.size.height/2;c.setAttribute("x1",d.toString()),c.setAttribute("y1",f.toString()),c.setAttribute("x2",h.toString()),c.setAttribute("y2",D.toString()),c.setAttribute("stroke",s.style?.stroke||"#6c757d"),c.setAttribute("stroke-width",s.style?.strokeWidth?.toString()||"2"),c.setAttribute("marker-end",s.arrow?"url(#arrowhead)":""),e(g)&&e(g).appendChild(c)}function fe(){if(!e(g))return;const s=new XMLSerializer().serializeToString(e(g)),v=new Blob([s],{type:"image/svg+xml"}),u=URL.createObjectURL(v),c=document.createElement("a");c.href=u,c.download=`${i().content.diagramType}-diagram.svg`,c.click(),URL.revokeObjectURL(u),l("diagramexport",{format:"svg"})}Dt(()=>{e(g)&&x()}),Dt(()=>{i()&&e(g)&&x()});var Ie=Rr(),xe=a(Ie),U=a(xe),J=a(U),be=a(J);t(J);var qe=r(J,2),Me=a(qe);Me.__click=[kr,M,i,I,ie,x,l];var E=r(Me,2);E.__click=fe,t(qe),t(U);var z=r(U,2);{var H=s=>{var v=wr(),u=a(v,!0);t(v),S(()=>p(u,i().content.description)),o(s,v)};B(z,s=>{i().content.description&&s(H)})}t(xe);var Y=r(xe,2),re=a(Y);{var se=s=>{var v=Sr(),u=r(a(v),2);{let c=ne(()=>e($)());Ht(u,{get parameters(){return e(c)},onParameterChange:d=>N(new CustomEvent("parameterchange",{detail:d}))})}t(v),o(s,v)};B(re,s=>{e($).length>0&&s(se)})}var ee=r(re,2),F=a(ee);Bt(F,s=>w(g,s),()=>e(g)),t(ee);var Z=r(ee,2);{var me=s=>{const v=ne(()=>i().content.elements.find(f=>f.id===e(I)));var u=st(),c=Ye(u);{var d=f=>{var h=Mr(),D=r(a(h),2),K=a(D),Se=r(a(K),2),Ne=a(Se,!0);t(Se),t(K);var je=r(K,2),He=r(a(je),2),et=a(He,!0);t(He),t(je);var Te=r(je,2);{var Le=Ge=>{var Xe=Ar(),De=r(a(Xe),2),Ze=a(De,!0);t(De),t(Xe),S(()=>p(Ze,e(v).label)),o(Ge,Xe)};B(Te,Ge=>{e(v).label&&Ge(Le)})}var Ee=r(Te,2);{var Be=Ge=>{var Xe=zr(),De=r(a(Xe),2),Ze=a(De,!0);t(De),t(Xe),S(()=>p(Ze,e(v).description)),o(Ge,Xe)};B(Ee,Ge=>{e(v).description&&Ge(Be)})}var Ke=r(Ee,2);{var ut=Ge=>{var Xe=Cr(),De=r(a(Xe),2),Ze=a(De,!0);t(De),t(Xe),S(nt=>p(Ze,nt),[()=>JSON.stringify(e(M)[e(v).id])]),o(Ge,Xe)};B(Ke,Ge=>{e(M)[e(v).id]&&Ge(ut)})}t(D),t(h),S(()=>{p(Ne,e(v).id),p(et,e(v).type)}),o(f,h)};B(c,f=>{e(v)&&f(d)})}o(s,u)};B(Z,s=>{e(I)&&s(me)})}var b=r(Z,2);{var A=s=>{var v=Nr(),u=a(v),c=r(a(u),2),d=a(c,!0);t(c);var f=r(c,4),h=a(f);t(f);var D=r(f,4),K=a(D);t(D),t(u),t(v),S(Se=>{_(c,"href",i().content.sourceReference.originalUrl),p(d,i().content.sourceReference.originalUrl),p(h,`Transformation: ${i().content.sourceReference.transformationReasoning??""}`),p(K,`Confidence: ${Se??""}%`)},[()=>Math.round(i().content.sourceReference.confidence*100)]),o(s,v)};B(b,s=>{i().content.sourceReference&&s(A)})}t(Y),t(Ie),S(()=>{_(Ie,"data-block-id",i().id),p(be,`${i().content.diagramType??""} System Diagram`)}),o(q,Ie),zt()}Tt(["click"]);function Xt(q,n,l){w(n,"template-selection"),w(l,null)}var qr=y('<li class="svelte-eo40py"> </li>'),Er=y('<li class="more-params svelte-eo40py"> </li>'),Dr=(q,n,l)=>n(e(l),"simulation"),Ir=y('<div class="template-card simulation-card svelte-eo40py"><div class="card-header svelte-eo40py"><h4 class="card-title svelte-eo40py"> </h4> <span class="card-domain svelte-eo40py"> </span></div> <p class="card-description svelte-eo40py"> </p> <div class="card-parameters svelte-eo40py"><strong class="svelte-eo40py">Parameters:</strong> <ul class="parameter-list svelte-eo40py"><!> <!></ul></div> <button class="card-button simulation-button svelte-eo40py" type="button">Create Simulation</button></div>'),jr=y('<div class="template-section svelte-eo40py"><h3 class="section-title svelte-eo40py">Simulations</h3> <div class="template-cards svelte-eo40py"></div></div>'),Lr=(q,n,l)=>n(e(l),"diagram"),Fr=y('<div class="template-card diagram-card svelte-eo40py"><div class="card-header svelte-eo40py"><h4 class="card-title svelte-eo40py"> </h4> <span class="card-domain svelte-eo40py"> </span></div> <p class="card-description svelte-eo40py"> </p> <div class="card-elements svelte-eo40py"><strong class="svelte-eo40py">Elements:</strong> <span class="element-count svelte-eo40py"> </span></div> <button class="card-button diagram-button svelte-eo40py" type="button">Create Diagram</button></div>'),Pr=y('<div class="template-section svelte-eo40py"><h3 class="section-title svelte-eo40py">System Diagrams</h3> <div class="template-cards svelte-eo40py"></div></div>'),Br=y('<div class="template-selection svelte-eo40py"><header class="selection-header svelte-eo40py"><h2 class="selection-title svelte-eo40py">Choose a Simulation or Diagram</h2> <div class="selection-filters svelte-eo40py"><div class="domain-filter svelte-eo40py"><label for="domain-select" class="svelte-eo40py">Domain:</label> <select id="domain-select" class="svelte-eo40py"><option>All Domains</option><option>Physics</option><option>Chemistry</option><option>Engineering</option></select></div> <div class="mode-filter svelte-eo40py"><label for="mode-select" class="svelte-eo40py">Type:</label> <select id="mode-select" class="svelte-eo40py"><option>Both</option><option>Simulations Only</option><option>Diagrams Only</option></select></div></div></header> <div class="template-grid svelte-eo40py"><!> <!></div></div>'),Or=y('<div class="simulation-view svelte-eo40py"><div class="view-header svelte-eo40py"><button class="back-button svelte-eo40py" type="button">‚Üê Back to Templates</button> <h2 class="view-title svelte-eo40py"> </h2></div> <!></div>'),Ur=y('<div class="diagram-view svelte-eo40py"><div class="view-header svelte-eo40py"><button class="back-button svelte-eo40py" type="button">‚Üê Back to Templates</button> <h2 class="view-title svelte-eo40py"> </h2></div> <!></div>'),Hr=y('<div class="simulation-manager svelte-eo40py"><!></div>');function cs(q,n){At(n,!0);const l=It();let i=$e(n,"mode",7,"both"),g=$e(n,"domain",7,"all"),M=$e(n,"editable",3,!0),I=pe(null),ie=pe(null),$=pe(null),N=pe("template-selection");const _e=ne(()=>()=>P(g())),V=ne(()=>()=>x(g()));function P(U){const J=[...va,...ua,...da];return U==="all"?J:J.filter(be=>be.domain===U)}function x(U){return U==="all"?Gt:Gt.filter(J=>J.domain===U)}function ge(U){const J=`sim-${Date.now()}`;w(ie,la(U.id,J),!0),w(N,"simulation"),l("simulationCreated",e(ie))}function ke(U){const J=`diagram-${Date.now()}`;w($,ca(U.id,J),!0),w(N,"diagram"),l("diagramCreated",e($))}function de(U,J){w(I,U,!0),J==="simulation"?ge(U):ke(U)}function O(U){l("simulationEvent",U.detail)}function oe(U){l("simulationEvent",U.detail)}var he=Hr(),fe=a(he);{var Ie=U=>{var J=Br(),be=a(J),qe=r(a(be),2),Me=a(qe),E=r(a(Me),2),z=a(E);z.value=z.__value="all";var H=r(z);H.value=H.__value="physics";var Y=r(H);Y.value=Y.__value="chemistry";var re=r(Y);re.value=re.__value="engineering",t(E),t(Me);var se=r(Me,2),ee=r(a(se),2),F=a(ee);F.value=F.__value="both";var Z=r(F);Z.value=Z.__value="simulation";var me=r(Z);me.value=me.__value="diagram",t(ee),t(se),t(qe),t(be);var b=r(be,2),A=a(b);{var s=c=>{var d=jr(),f=r(a(d),2);Ce(f,21,()=>e(_e)(),h=>h.id,(h,D)=>{var K=Ir(),Se=a(K),Ne=a(Se),je=a(Ne,!0);t(Ne);var He=r(Ne,2),et=a(He,!0);t(He),t(Se);var Te=r(Se,2),Le=a(Te,!0);t(Te);var Ee=r(Te,2),Be=r(a(Ee),2),Ke=a(Be);Ce(Ke,17,()=>e(D).parameters.slice(0,3),De=>De.name,(De,Ze)=>{var nt=qr(),W=a(nt);t(nt),S(()=>p(W,`${e(Ze).name??""}: ${e(Ze).description??""}`)),o(De,nt)});var ut=r(Ke,2);{var Ge=De=>{var Ze=Er(),nt=a(Ze);t(Ze),S(()=>p(nt,`...and ${e(D).parameters.length-3} more`)),o(De,Ze)};B(ut,De=>{e(D).parameters.length>3&&De(Ge)})}t(Be),t(Ee);var Xe=r(Ee,2);Xe.__click=[Dr,de,D],t(K),S(()=>{p(je,e(D).name),p(et,e(D).domain),p(Le,e(D).description)}),o(h,K)}),t(f),t(d),o(c,d)};B(A,c=>{(i()==="simulation"||i()==="both")&&c(s)})}var v=r(A,2);{var u=c=>{var d=Pr(),f=r(a(d),2);Ce(f,21,()=>e(V)(),h=>h.id,(h,D)=>{var K=Fr(),Se=a(K),Ne=a(Se),je=a(Ne,!0);t(Ne);var He=r(Ne,2),et=a(He,!0);t(He),t(Se);var Te=r(Se,2),Le=a(Te,!0);t(Te);var Ee=r(Te,2),Be=r(a(Ee),2),Ke=a(Be);t(Be),t(Ee);var ut=r(Ee,2);ut.__click=[Lr,de,D],t(K),S(()=>{p(je,e(D).name),p(et,e(D).domain),p(Le,e(D).description),p(Ke,`${e(D).elements.length??""} components, ${e(D).connections.length??""} connections`)}),o(h,K)}),t(f),t(d),o(c,d)};B(v,c=>{(i()==="diagram"||i()==="both")&&c(u)})}t(b),t(J),xt(E,g),xt(ee,i),o(U,J)},xe=U=>{var J=st(),be=Ye(J);{var qe=E=>{var z=Or(),H=a(z),Y=a(H);Y.__click=[Xt,N,I];var re=r(Y,2),se=a(re);t(re),t(H);var ee=r(H,2);Qt(ee,{get block(){return e(ie)},get editable(){return M()},onparameterchange:O,onsimulationstart:O,onsimulationpause:O,onsimulationstop:O,onsimulationreset:O,onsimulationstep:O,onsimulationerror:O,onsimulationexport:O,onsimulationreportexport:O}),t(z),S(()=>p(se,`Simulation: ${e(ie).content.simulationType??""}`)),o(E,z)},Me=E=>{var z=st(),H=Ye(z);{var Y=re=>{var se=Ur(),ee=a(se),F=a(ee);F.__click=[Xt,N,I];var Z=r(F,2),me=a(Z);t(Z),t(ee);var b=r(ee,2);Tr(b,{get block(){return e($)},get editable(){return M()},onparameterchange:oe,onelementclick:oe,onelementhover:oe,ondiagramreset:oe,ondiagramexport:oe,ondiagramerror:oe}),t(se),S(()=>p(me,`Diagram: ${e($).content.diagramType??""}`)),o(re,se)};B(H,re=>{e(N)==="diagram"&&e($)&&re(Y)},!0)}o(E,z)};B(be,E=>{e(N)==="simulation"&&e(ie)?E(qe):E(Me,!1)},!0)}o(U,J)};B(fe,U=>{e(N)==="template-selection"?U(Ie):U(xe,!1)})}t(he),o(q,he),zt()}Tt(["click"]);function Vr(q,n,l,i,g){w(n,1),w(l,!1),w(i,{x:0,y:0},!0),g.onZoomReset?.()}function Yr(q,n,l){w(n,!e(n)),l.onAnimationToggle?.({enabled:e(n)})}var Gr=(q,n,l)=>n(e(l).value),Xr=y('<button type="button"><span class="chart-icon"> </span> <span class="chart-label"> </span></button>'),Zr=y("<option> </option>"),Jr=y('<button class="control-btn svelte-1cogvj6" title="Reset zoom" type="button">üîç Reset Zoom</button>'),Wr=y('<span class="selection-indicator"> </span>'),Kr=ht('<line stroke="var(--grid-color, #e9ecef)" stroke-width="1"></line>'),Qr=ht('<line stroke="var(--grid-color, #e9ecef)" stroke-width="1"></line>'),$r=ht('<path fill="none" stroke-width="3"></path><path fill="url(#chart-gradient)" opacity="0.3"></path>',1),es=ht('<rect stroke-width="2"></rect>'),ts=ht('<circle stroke-width="2"></circle>'),as=ht('<rect stroke-width="1"></rect>'),ns=y('<div class="chart-tooltip svelte-1cogvj6"><!></div>'),rs=y('<div class="advanced-interactive-chart svelte-1cogvj6" aria-label="Interactive Chart"><div class="chart-controls svelte-1cogvj6"><div class="control-group"><span class="control-label">Chart Type:</span> <div class="chart-type-selector"></div></div> <div class="control-group"><span class="control-label">Color Scheme:</span> <select class="color-scheme-select"></select></div> <div class="control-group"><button title="Toggle animations" type="button">üé¨ Animate</button> <!> <button class="control-btn svelte-1cogvj6" title="Export chart" type="button">üíæ Export</button></div> <div class="zoom-info"><span class="zoom-indicator"> </span> <!></div></div> <button class="chart-surface-button" type="button" aria-label="Interactive chart canvas" title="Interactive chart canvas"><svg aria-hidden="true"><defs><linearGradient id="chart-gradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%"></stop><stop offset="100%"></stop></linearGradient></defs><rect fill="var(--chart-bg, #fafafa)" stroke="var(--chart-border, #e1e5e9)" rx="4"></rect><g class="grid" opacity="0.3"><!><!></g><g class="data-layer"><!></g></svg></button> <!></div>');function vs(q,n){At(n,!0);let l=$e(n,"chartType",3,"line"),i=$e(n,"filters",19,()=>[]);$e(n,"interactions",19,()=>[]);let g=$e(n,"config",19,()=>({})),M,I,ie=pe(!1),$=pe(1),N=pe(vt({x:0,y:0})),_e=pe(null),V=pe(vt([])),P=pe(null),x=pe(vt(g().animations?.enabled??!0)),ge=pe(vt(l())),ke=g().layout?.width||800,de=g().layout?.height||500,O=g().layout?.margin||{top:40,right:40,bottom:60,left:60};const oe=ne(()=>()=>ke-O.left-O.right),he=ne(()=>()=>de-O.top-O.bottom),fe=ne(()=>()=>be(n.data,i())),Ie=[{value:"line",label:"Line Chart",icon:"üìà"},{value:"bar",label:"Bar Chart",icon:"üìä"},{value:"scatter",label:"Scatter Plot",icon:"‚ö™"},{value:"heatmap",label:"Heat Map",icon:"üî•"}],xe={default:["#0066cc","#ff6b35","#28a745","#ffc107","#dc3545"],viridis:["#440154","#31688e","#35b779","#fde725"],plasma:["#0d0887","#7e03a8","#cc4778","#f89441","#f0f921"],cool:["#6baed6","#4292c6","#2171b5","#08519c","#08306b"]};let U=pe("default");const J=ne(()=>()=>xe[e(U)]||xe.default);function be(R,X){if(!R?.data)return[];let te=Array.isArray(R.data)?[...R.data]:Object.entries(R.data).map(([Q,ce])=>({x:Q,y:ce}));return X.forEach(Q=>{Q.active&&(te=te.filter(ce=>{const Re=ce[Q.field];switch(Q.operator){case"equals":return Re===Q.value;case"contains":return String(Re).toLowerCase().includes(String(Q.value).toLowerCase());case"greater":return Number(Re)>Number(Q.value);case"less":return Number(Re)<Number(Q.value);case"between":if(Array.isArray(Q.value)&&Q.value.length===2){const Fe=Number(Re);return Fe>=Number(Q.value[0])&&Fe<=Number(Q.value[1])}return!0;default:return!0}}))}),te}function qe(R){if(!R.length)return{x_scale:()=>0,y_scale:()=>e(he)()};const X=R.map(Oe=>Oe.x),te=R.map(Oe=>Oe.y).filter(Oe=>typeof Oe=="number"),Q=X.every(Oe=>typeof Oe=="number");let ce,Re;if(Q){const Oe=Math.min(...X),m=Math.max(...X);ce=k=>(k-Oe)/(m-Oe)*e(oe)()}else ce=(Oe,m)=>m/Math.max(1,X.length-1)*e(oe)();const Fe=Math.min(...te),mt=Math.max(...te);return Re=Oe=>e(he)()-(Oe-Fe)/(mt-Fe)*e(he)(),{x_scale:ce,y_scale:Re}}const Me=ne(()=>()=>qe(e(fe)())),E=(R,X)=>e(Me)().x_scale(R,X),z=R=>e(Me)().y_scale(R);function H(R,X,te){return R.length<2?"":R.map((Q,ce)=>{const Re=X(Q.x,ce),Fe=te(Q.y);return`${ce===0?"M":"L"} ${Re} ${Fe}`}).join(" ")}function Y(){return Math.max(10,e(oe)()/Math.max(1,e(fe)().length)*.8)}function re(R){if(!M)return;const X=M.getBoundingClientRect(),te=(R.clientX-X.left-O.left)/e($)-e(N).x,Q=(R.clientY-X.top-O.top)/e($)-e(N).y,ce=Z(te,Q);ce&&(w(_e,ce,!0),w(P,{x:R.clientX-X.left,y:R.clientY-X.top,content:me(ce)},!0),n.onHover?.({point:ce,coordinates:{x:te,y:Q}}))}function se(){w(_e,null),w(P,null),n.onHoverEnd?.()}function ee(R){if(!M)return;const X=M.getBoundingClientRect(),te=(R.clientX-X.left-O.left)/e($)-e(N).x,Q=(R.clientY-X.top-O.top)/e($)-e(N).y,ce=Z(te,Q);if(ce){const Re=e(V).findIndex(Fe=>Fe===ce);Re>=0?w(V,e(V).filter((Fe,mt)=>mt!==Re),!0):w(V,[...e(V),ce],!0),n.onSelect?.({point:ce,selected:e(V)})}}function F(R){R.preventDefault();const X=R.deltaY>0?.9:1.1,te=Math.max(.5,Math.min(5,e($)*X));te!==e($)&&(w($,te,!0),w(ie,e($)!==1),n.onZoom?.({zoomLevel:e($),isZoomed:e(ie)}))}function Z(R,X){if(!e(fe)().length)return null;let te=e(fe)()[0],Q=1/0;return e(fe)().forEach((ce,Re)=>{const Fe=E(ce.x,Re),mt=z(ce.y),Oe=Math.sqrt((R-Fe)**2+(X-mt)**2);Oe<Q&&(Q=Oe,te=ce)}),Q<30?te:null}function me(R){return`${R.label||"Point"}: ${R.y}${R.unit||""}`}function b(R){w(ge,R,!0),n.onChartTypeChange?.({chartType:R})}function A(){if(!I)return;const R=new XMLSerializer().serializeToString(I),X=document.createElement("canvas"),te=X.getContext("2d"),Q=new Image;Q.onload=()=>{X.width=ke,X.height=de,te?.drawImage(Q,0,0);const ce=document.createElement("a");ce.download=`chart-${Date.now()}.png`,ce.href=X.toDataURL(),ce.click()},Q.src="data:image/svg+xml;base64,"+btoa(R),n.onExport?.({format:"png"})}ra(()=>{n.onReady?.({config:g(),chartType:e(ge)})});var s=rs(),v=a(s),u=a(v),c=r(a(u),2);Ce(c,21,()=>Ie,R=>R.value,(R,X)=>{var te=Xr();let Q;te.__click=[Gr,b,X];var ce=a(te),Re=a(ce,!0);t(ce);var Fe=r(ce,2),mt=a(Fe,!0);t(Fe),t(te),S(Oe=>{Q=ot(te,1,"chart-type-btn svelte-1cogvj6",null,Q,Oe),_(te,"title",e(X).label),p(Re,e(X).icon),p(mt,e(X).label)},[()=>({active:e(ge)===e(X).value})]),o(R,te)}),t(c),t(u);var d=r(u,2),f=r(a(d),2);Ce(f,20,()=>Object.keys(xe),R=>R,(R,X)=>{var te=Zr(),Q=a(te,!0);t(te);var ce={};S(Re=>{p(Q,Re),ce!==(ce=X)&&(te.value=(te.__value=X)??"")},[()=>X.charAt(0).toUpperCase()+X.slice(1)]),o(R,te)}),t(f),t(d);var h=r(d,2),D=a(h);let K;D.__click=[Yr,x,n];var Se=r(D,2);{var Ne=R=>{var X=Jr();X.__click=[Vr,$,ie,N,n],o(R,X)};B(Se,R=>{e(ie)&&R(Ne)})}var je=r(Se,2);je.__click=A,t(h);var He=r(h,2),et=a(He),Te=a(et);t(et);var Le=r(et,2);{var Ee=R=>{var X=Wr(),te=a(X);t(X),S(()=>p(te,`Selected: ${e(V).length??""}`)),o(R,X)};B(Le,R=>{e(V).length>0&&R(Ee)})}t(He),t(v);var Be=r(v,2);Be.__click=ee,Be.__mousemove=re;var Ke=a(Be);let ut;var Ge=a(Ke),Xe=a(Ge),De=a(Xe),Ze=r(De);t(Xe),t(Ge);var nt=r(Ge),W=r(nt),le=a(W);Ce(le,16,()=>Array(6),St,(R,X,te)=>{var Q=Kr();S((ce,Re,Fe)=>{_(Q,"x1",O.left),_(Q,"y1",ce),_(Q,"x2",Re),_(Q,"y2",Fe)},[()=>O.top+te*e(he)()/5,()=>O.left+e(oe)(),()=>O.top+te*e(he)()/5]),o(R,Q)});var we=r(le);Ce(we,16,()=>Array(6),St,(R,X,te)=>{var Q=Qr();S((ce,Re,Fe)=>{_(Q,"x1",ce),_(Q,"y1",O.top),_(Q,"x2",Re),_(Q,"y2",Fe)},[()=>O.left+te*e(oe)()/5,()=>O.left+te*e(oe)()/5,()=>O.top+e(he)()]),o(R,Q)}),t(W);var ye=r(W),lt=a(ye);{var Je=R=>{var X=$r(),te=Ye(X);let Q;var ce=r(te);let Re;S((Fe,mt,Oe,m)=>{_(te,"d",Fe),_(te,"stroke",e(J)[0]),Q=ot(te,0,"line-path",null,Q,mt),_(ce,"d",Oe),Re=ot(ce,0,"area-fill",null,Re,m)},[()=>H(e(fe)(),E,z),()=>({animated:e(x)}),()=>H(e(fe)(),E,z)+` L ${E(e(fe)()[e(fe)().length-1].x,e(fe)().length-1)} ${e(he)()} L ${E(e(fe)()[0].x,0)} ${e(he)()} Z`,()=>({animated:e(x)})]),o(R,X)},dt=R=>{var X=st(),te=Ye(X);{var Q=Re=>{var Fe=st(),mt=Ye(Fe);Ce(mt,19,()=>e(fe)(),(Oe,m)=>Oe.id||m,(Oe,m,k)=>{const j=ne(()=>E(e(m).x,e(k))),G=ne(()=>z(e(m).y)),T=ne(Y);var L=es();let ae;S((ue,ve,C)=>{_(L,"x",e(j)-e(T)/2),_(L,"y",e(G)),_(L,"width",e(T)),_(L,"height",ue),_(L,"fill",e(J)[e(k)%e(J).length]),_(L,"stroke",ve),ae=ot(L,0,"bar-rect",null,ae,C)},[()=>e(he)()-e(G),()=>e(V).includes(e(m))?"#000":"none",()=>({hovered:e(_e)===e(m),selected:e(V).includes(e(m)),animated:e(x)})]),o(Oe,L)}),o(Re,Fe)},ce=Re=>{var Fe=st(),mt=Ye(Fe);{var Oe=k=>{var j=st(),G=Ye(j);Ce(G,19,()=>e(fe)(),(T,L)=>T.id||L,(T,L,ae)=>{const ue=ne(()=>E(e(L).x,e(ae))),ve=ne(()=>z(e(L).y));var C=ts();let Ae;S((ze,Ue,Ve)=>{_(C,"cx",e(ue)),_(C,"cy",e(ve)),_(C,"r",ze),_(C,"fill",e(J)[e(ae)%e(J).length]),_(C,"stroke",Ue),Ae=ot(C,0,"scatter-point",null,Ae,Ve)},[()=>e(V).includes(e(L))?8:e(_e)===e(L)?6:4,()=>e(V).includes(e(L))?"#000":"#fff",()=>({hovered:e(_e)===e(L),selected:e(V).includes(e(L)),animated:e(x)})]),o(T,C)}),o(k,j)},m=k=>{var j=st(),G=Ye(j);{var T=L=>{var ae=st(),ue=Ye(ae);Ce(ue,19,()=>e(fe)(),(ve,C)=>ve.id||C,(ve,C,Ae)=>{const ze=ne(()=>e(Ae)%Math.ceil(Math.sqrt(e(fe)().length))*(e(oe)()/Math.ceil(Math.sqrt(e(fe)().length)))),Ue=ne(()=>Math.floor(e(Ae)/Math.ceil(Math.sqrt(e(fe)().length)))*(e(he)()/Math.ceil(Math.sqrt(e(fe)().length)))),Ve=ne(()=>Math.min(e(oe)(),e(he)())/Math.ceil(Math.sqrt(e(fe)().length))),ct=ne(()=>Math.abs(e(C).y)/Math.max(...e(fe)().map(kt=>Math.abs(kt.y))));var We=as();let it;S((kt,qt)=>{_(We,"x",e(ze)),_(We,"y",e(Ue)),_(We,"width",e(Ve)),_(We,"height",e(Ve)),_(We,"fill",`rgba(0, 102, 204, ${e(ct)})`),_(We,"stroke",kt),it=ot(We,0,"heatmap-cell",null,it,qt)},[()=>e(V).includes(e(C))?"#000":"none",()=>({hovered:e(_e)===e(C),selected:e(V).includes(e(C)),animated:e(x)})]),o(ve,We)}),o(L,ae)};B(G,L=>{e(ge)==="heatmap"&&L(T)},!0)}o(k,j)};B(mt,k=>{e(ge)==="scatter"?k(Oe):k(m,!1)},!0)}o(Re,Fe)};B(te,Re=>{e(ge)==="bar"?Re(Q):Re(ce,!1)},!0)}o(R,X)};B(lt,R=>{e(ge)==="line"&&e(fe)().length>1?R(Je):R(dt,!1)})}t(ye),t(Ke),Bt(Ke,R=>I=R,()=>I),t(Be);var _t=r(Be,2);{var bt=R=>{var X=ns(),te=a(X);sa(te,()=>e(P).content),t(X),S(()=>Lt(X,`left: ${e(P).x??""}px; top: ${e(P).y??""}px;`)),o(R,X)};B(_t,R=>{e(P)&&R(bt)})}t(s),Bt(s,R=>M=R,()=>M),S((R,X,te,Q,ce)=>{K=ot(D,1,"control-btn svelte-1cogvj6",null,K,R),p(Te,`Zoom: ${X??""}%`),_(Ke,"width",ke),_(Ke,"height",de),ut=ot(Ke,0,"chart-svg svelte-1cogvj6",null,ut,te),Lt(Ke,`transform: scale(${e($)??""}) translate(${e(N).x??""}px, ${e(N).y??""}px);`),Lt(De,`stop-color:${e(J)[0]??""};stop-opacity:0.8`),Lt(Ze,`stop-color:${e(J)[0]??""};stop-opacity:0.1`),_(nt,"x",O.left),_(nt,"y",O.top),_(nt,"width",Q),_(nt,"height",ce),_(ye,"transform",`translate(${O.left??""}, ${O.top??""})`)},[()=>({active:e(x)}),()=>Math.round(e($)*100),()=>({animated:e(x)}),()=>e(oe)(),()=>e(he)()]),xt(f,()=>e(U),R=>w(U,R)),Ot("mouseleave",Be,se),Ot("wheel",Be,F),o(q,s),zt()}Tt(["click","mousemove"]);export{vs as A,dn as D,os as I,Yn as N,Qt as S,ls as a,cs as b,Tr as c};
