import{d as Ct,p as Rt,c as Vt,a as Ue,s as re,b as ot,u as Kt,g as e,e as G,f as S,h as n,i as a,j as F,k as b,l as ve,t as $,m as z,n as Ae,o as qt,q as Et,r as o,v as jt,w as t,x as mt,y as Pt,z as dt,A as x,B as Re,C as Ot,D as Dt,E as rt,F as Jt,G as Zt,H as ct,I as ra,J as Yt,K as It,L as Bt,M as Ut,N as Ft}from"./D9dWO0Sc.js";import{e as na,a as sa}from"./DvEoYHKW.js";import{i as la}from"./COEqP30R.js";import{B as Tt,P as Qt,C as Ht}from"./BAURvd7r.js";Ct(["click","input","change"]);function oa(C,r,d,u){const q=C.target;b(r,q.value,!0),b(d,0),u()}function ia(C,r,d){const u=C.target;b(r,u.value,!0),d()}function va(C,r,d,u){const q=e(r)(),L=e(d)(),Q={field:q[0]||"value",type:L[q[0]]||"text",operator:"contains",value:"",active:!0};b(u,[...e(u),Q],!0)}function ca(C,r,d,u,q,L,Q){b(r,[],!0),b(d,""),b(u,""),b(q,""),b(L,0),Q()}var ua=S('<p class="description svelte-xd92ey"> </p>'),da=(C,r)=>b(r,!e(r)),_a=S("<option> </option>"),ga=(C,r,d)=>{b(r,C.currentTarget.value,!0),d()},pa=S("<option> </option>"),fa=(C,r,d)=>r(e(d)),ha=S('<button class="sort-direction-btn svelte-xd92ey" title="Toggle sort direction" type="button"> </button>'),ma=S("<option> </option>"),ba=S("<option>Greater than</option> <option>Less than</option> <option>Between</option>",1),xa=S('<div class="range-inputs svelte-xd92ey"><input type="number" placeholder="Min" class="filter-value-input svelte-xd92ey"/> <input type="number" placeholder="Max" class="filter-value-input svelte-xd92ey"/></div>'),ya=S('<input placeholder="Filter value..." class="filter-value-input svelte-xd92ey"/>'),ka=S('<div><select class="filter-field-select svelte-xd92ey"></select> <select class="filter-operator-select svelte-xd92ey"><option>Contains</option><option>Equals</option><!></select> <!> <div class="filter-actions svelte-xd92ey"><button type="button"> </button> <button class="remove-filter-btn svelte-xd92ey" title="Remove filter" type="button">√ó</button></div></div>'),wa=S('<div class="stat-item svelte-xd92ey"> </div>'),Sa=S('<div class="stat-item svelte-xd92ey"> </div> <div class="stat-item svelte-xd92ey"> </div>',1),Ma=S('<div class="stat-item svelte-xd92ey"> </div>'),$a=S('<div class="stat-item svelte-xd92ey"> </div> <!> <!> <!>',1),za=S('<div class="field-summary svelte-xd92ey"><div class="field-header svelte-xd92ey"><strong> </strong> <span class="field-type svelte-xd92ey"> </span></div> <div class="field-stats svelte-xd92ey"><!></div></div>'),Aa=S('<div class="advanced-controls svelte-xd92ey"><div class="filters-section"><div class="section-header svelte-xd92ey"><h4 class="svelte-xd92ey">Advanced Filters</h4> <button class="add-filter-btn svelte-xd92ey" type="button">+ Add Filter</button></div> <!></div> <div class="summary-section svelte-xd92ey"><h4 class="svelte-xd92ey">Data Summary</h4> <div class="summary-grid svelte-xd92ey"></div></div></div>'),Na=S("<option> </option>"),Ca=S('<div class="aggregation-result svelte-xd92ey"><span class="agg-field svelte-xd92ey"> </span> <span class="agg-value svelte-xd92ey"> </span></div>'),Ta=S('<div class="group-aggregations svelte-xd92ey"></div>'),Ea=S('<div class="group-item svelte-xd92ey"><div class="group-header svelte-xd92ey"><h5 class="svelte-xd92ey"> </h5> <span class="group-count svelte-xd92ey"> </span></div> <!></div>'),qa=S('<div class="grouped-data svelte-xd92ey"><h4 class="svelte-xd92ey"> </h4> <div class="aggregation-controls svelte-xd92ey"><label for="aggregation-select">Aggregation:</label> <select id="aggregation-select" class="aggregation-select svelte-xd92ey"></select></div> <div class="groups-container svelte-xd92ey"></div></div>'),Pa=(C,r,d)=>r(d),Ra=S('<span class="sort-indicator svelte-xd92ey"> </span>'),ja=S('<th><div class="header-content svelte-xd92ey"><span class="field-name svelte-xd92ey"> </span> <span class="field-type svelte-xd92ey"> </span> <!></div></th>'),Da=S("<td><!></td>"),La=S("<tr></tr>"),Ia=(C,r,d)=>r(e(d)-1),Ba=(C,r,d)=>r(e(d)),Fa=S('<button type="button"> </button>'),Ha=(C,r,d)=>r(e(d)+1),Oa=S('<div class="pagination svelte-xd92ey"><button class="page-btn svelte-xd92ey" type="button">‚Üê Previous</button> <div class="page-numbers svelte-xd92ey"></div> <button class="page-btn svelte-xd92ey" type="button">Next ‚Üí</button></div>'),Ua=S('<div class="data-explorer svelte-xd92ey"><div class="explorer-header svelte-xd92ey"><div class="header-title svelte-xd92ey"><h3 class="svelte-xd92ey"> </h3> <!> <span class="data-count svelte-xd92ey"> </span></div> <div class="header-actions svelte-xd92ey"><button type="button">‚öôÔ∏è Advanced</button> <button class="export-btn svelte-xd92ey" type="button">üíæ Export CSV</button> <button class="clear-btn svelte-xd92ey" type="button">üóëÔ∏è Clear All</button></div></div> <div class="quick-controls svelte-xd92ey"><div class="search-container svelte-xd92ey"><input type="text" placeholder="Search across all fields..." class="search-input svelte-xd92ey"/> <span class="search-icon svelte-xd92ey">üîç</span></div> <div class="quick-filters svelte-xd92ey"><div class="control-group svelte-xd92ey"><label for="group-by-select" class="svelte-xd92ey">Group by:</label> <select id="group-by-select" class="group-select svelte-xd92ey"><option>No grouping</option><!></select></div> <div class="control-group svelte-xd92ey"><label for="sort-by-select" class="svelte-xd92ey">Sort by:</label> <select id="sort-by-select" class="sort-select svelte-xd92ey"><option>No sorting</option><!></select> <!></div></div></div> <!> <!> <div class="data-table-container svelte-xd92ey"><div class="table-header svelte-xd92ey"><h4 class="svelte-xd92ey">Data Table</h4> <div class="pagination-info svelte-xd92ey"> </div></div> <div class="table-wrapper svelte-xd92ey"><table class="data-table svelte-xd92ey"><thead><tr></tr></thead><tbody></tbody></table></div> <!></div></div>');function wn(C,r){Rt(r,!0);const d=Vt();let u=Ue(r,"data",19,()=>[]),q=Ue(r,"filters",19,()=>[]),L=Ue(r,"groupBy",3,""),Q=Ue(r,"sortBy",3,""),ee=Ue(r,"sortDirection",3,"asc"),te=re(""),U=re(ot([...q()])),de=re(!1);ot([]);let P=re(ot(L())),T=re(ot(Q())),_=re(ot(ee())),Z=50,ce=re(0);const ue=G(()=>()=>he(u())),D=G(()=>()=>Ne(u())),ne=G(()=>()=>Qe(u(),e(U),e(te),e(T),e(_))),fe=G(()=>()=>e(P)?Je(e(ne)(),e(P)):{}),se=G(()=>()=>ke(e(ne)())),Be=G(()=>()=>Y(e(ne)(),e(ce),Z)),Ge=[{value:"count",label:"Count",icon:"#Ô∏è‚É£"},{value:"sum",label:"Sum",icon:"‚ûï"},{value:"avg",label:"Average",icon:"üìä"},{value:"min",label:"Minimum",icon:"‚¨áÔ∏è"},{value:"max",label:"Maximum",icon:"‚¨ÜÔ∏è"},{value:"median",label:"Median",icon:"üìà"}];let Me=re("count");function he(s){if(!s||!s.length)return[];const l=s[0];return typeof l=="object"&&l!==null?Object.keys(l):["value"]}function Ne(s){if(!s||!s.length)return{};const l={},p=Math.min(100,s.length);return e(ue)().forEach(c=>{const m=s.slice(0,p).map(v=>v[c]).filter(v=>v!=null);if(m.length===0){l[c]="unknown";return}const N=m.filter(v=>typeof v=="number"||!isNaN(Number(v))).length,R=m.filter(v=>!isNaN(Date.parse(v))).length,j=m.filter(v=>typeof v=="boolean"||v==="true"||v==="false").length;N/m.length>.8?l[c]="number":R/m.length>.8?l[c]="date":j/m.length>.8?l[c]="boolean":l[c]="text"}),l}function Qe(s,l,p,w,c){if(!s)return[];let m=[...s];if(p.trim()){const N=p.toLowerCase(),R=e(ue)();m=m.filter(j=>R.some(v=>String(j[v]||"").toLowerCase().includes(N)))}if(l.forEach(N=>{N.active&&(m=m.filter(R=>{const j=R[N.field];switch(N.operator){case"equals":return j===N.value;case"contains":return String(j).toLowerCase().includes(String(N.value).toLowerCase());case"greater":return Number(j)>Number(N.value);case"less":return Number(j)<Number(N.value);case"between":{if(Array.isArray(N.value)&&N.value.length===2){const v=Number(j);return v>=Number(N.value[0])&&v<=Number(N.value[1])}return!0}default:return!0}}))}),w){const N=e(D)();m.sort((R,j)=>{const v=R[w],I=j[w];let J=0;return N[w]==="number"?J=Number(v)-Number(I):N[w]==="date"?J=new Date(v).getTime()-new Date(I).getTime():J=String(v).localeCompare(String(I)),c==="desc"?-J:J})}return m}function Je(s,l){return!l||!s.length?{}:s.reduce((p,w)=>{const c=String(w[l]||"Unknown");return p[c]||(p[c]=[]),p[c].push(w),p},{})}function ke(s){if(!s.length)return{};const l={total_rows:s.length,fields:{}},p=e(ue)(),w=e(D)();return p.forEach(c=>{const m=s.map(R=>R[c]).filter(R=>R!=null),N={non_null_count:m.length,null_count:s.length-m.length};if(w[c]==="number"){const R=m.map(j=>Number(j)).filter(j=>!isNaN(j));R.length>0&&(N.min=Math.min(...R),N.max=Math.max(...R),N.avg=R.reduce((j,v)=>j+v,0)/R.length,N.sum=R.reduce((j,v)=>j+v,0))}else{const R=[...new Set(m)];N.unique_count=R.length,N.most_common=B(m)}l.fields[c]=N}),l}function B(s){if(!s.length)return null;const l=s.reduce((w,c)=>(w[c]=(w[c]||0)+1,w),{}),p=Object.entries(l).reduce((w,c)=>l[w[0]]>l[c[0]]?w:c);return{value:p[0],count:p[1]}}function Y(s,l,p){const w=l*p;return s.slice(w,w+p)}function le(s,l,p){const w=s.map(c=>c[l]).filter(c=>c!=null);switch(p){case"count":return w.length;case"sum":return w.reduce((c,m)=>Number(c)+Number(m),0);case"avg":return w.length>0?w.reduce((c,m)=>Number(c)+Number(m),0)/w.length:0;case"min":return Math.min(...w.map(c=>Number(c)));case"max":return Math.max(...w.map(c=>Number(c)));case"median":{const c=w.map(N=>Number(N)).sort((N,R)=>N-R),m=Math.floor(c.length/2);return c.length%2===0?(c[m-1]+c[m])/2:c[m]}default:return 0}}function me(s){e(T)===s?b(_,e(_)==="asc"?"desc":"asc",!0):(b(T,s,!0),b(_,"asc")),ae()}function $e(s){b(U,e(U).filter((l,p)=>p!==s),!0),ae()}function pe(s,l){b(U,e(U).map((p,w)=>w===s?{...p,...l}:p),!0),ae()}function Ee(s){b(U,e(U).map((l,p)=>p===s?{...l,active:!l.active}:l),!0),ae()}function De(s){b(ce,Math.max(0,Math.min(s,Math.ceil(e(ne)().length/Z)-1)),!0),ae()}function nt(){const s=e(ne)(),l=je(s),p=new Blob([l],{type:"text/csv"}),w=URL.createObjectURL(p),c=document.createElement("a");c.href=w,c.download=`data-export-${Date.now()}.csv`,c.click(),URL.revokeObjectURL(w),d("export",{format:"csv",data:s})}function je(s){if(!s.length)return"";const l=e(ue)(),p=l.join(","),w=s.map(c=>l.map(m=>{const N=c[m];return typeof N=="string"&&N.includes(",")?`"${N}"`:N}).join(","));return[p,...w].join(`
`)}function ae(){d("datachange",{data:e(ne)(),filters:e(U),groupBy:e(P),sortBy:e(T),sortDirection:e(_),search:e(te),page:e(ce),pageSize:Z})}Kt(()=>{e(ne)()&&ae()});var Ce=Ua(),Ze=a(Ce),Ye=a(Ze),Ke=a(Ye),Te=a(Ke,!0);t(Ke);var st=n(Ke,2);{var bt=s=>{var l=ua(),p=a(l,!0);t(l),$(()=>z(p,r.description)),o(s,l)};F(st,s=>{r.description&&s(bt)})}var pt=n(st,2),xt=a(pt);t(pt),t(Ye);var Mt=n(Ye,2),_t=a(Mt);let zt;_t.__click=[da,de];var $t=n(_t,2);$t.__click=nt;var yt=n($t,2);yt.__click=[ca,U,te,T,P,ce,ae],t(Mt),t(Ze);var ft=n(Ze,2),ht=a(ft),kt=a(ht);mt(kt),kt.__input=[oa,te,ce,ae],Pt(2),t(ht);var Xe=n(ht,2),et=a(Xe),wt=n(a(et),2);wt.__change=[ia,P,ae];var St=a(wt);St.value=St.__value="";var f=n(St);ve(f,16,()=>e(ue)(),s=>s,(s,l)=>{var p=_a(),w=a(p);t(p);var c={};$(m=>{z(w,`${l??""} (${m??""})`),c!==(c=l)&&(p.value=(p.__value=l)??"")},[()=>e(D)()[l]]),o(s,p)}),t(wt),t(et);var g=n(et,2),oe=n(a(g),2);oe.__change=[ga,T,ae];var K=a(oe);K.value=K.__value="";var M=n(K);ve(M,16,()=>e(ue)(),s=>s,(s,l)=>{var p=pa(),w=a(p,!0);t(p);var c={};$(()=>{z(w,l),c!==(c=l)&&(p.value=(p.__value=l)??"")}),o(s,p)}),t(oe);var H=n(oe,2);{var X=s=>{var l=ha();l.__click=[fa,me,T];var p=a(l,!0);t(l),$(()=>z(p,e(_)==="asc"?"‚Üë":"‚Üì")),o(s,l)};F(H,s=>{e(T)&&s(X)})}t(g),t(Xe),t(ft);var W=n(ft,2);{var Ve=s=>{var l=Aa(),p=a(l),w=a(p),c=n(a(w),2);c.__click=[va,ue,D,U],t(w);var m=n(w,2);ve(m,17,()=>e(U),dt,(j,v,I)=>{var J=ka();let _e;var Se=a(J);Se.__change=ie=>pe(I,{field:ie.currentTarget.value,type:e(D)()[ie.currentTarget.value]}),ve(Se,20,()=>e(ue)(),ie=>ie,(ie,ye)=>{var ze=ma(),Oe=a(ze);t(ze);var Ie={};$(vt=>{z(Oe,`${ye??""} (${vt??""})`),Ie!==(Ie=ye)&&(ze.value=(ze.__value=ye)??"")},[()=>e(D)()[ye]]),o(ie,ze)}),t(Se);var He=n(Se,2);He.__change=ie=>pe(I,{operator:ie.currentTarget.value});var ge=a(He);ge.value=ge.__value="contains";var xe=n(ge);xe.value=xe.__value="equals";var tt=n(xe);{var gt=ie=>{var ye=ba(),ze=Re(ye);ze.value=ze.__value="greater";var Oe=n(ze,2);Oe.value=Oe.__value="less";var Ie=n(Oe,2);Ie.value=Ie.__value="between",o(ie,ye)};F(tt,ie=>{e(D)()[e(v).field]==="number"&&ie(gt)})}t(He);var lt=n(He,2);{var Le=ie=>{var ye=xa(),ze=a(ye);mt(ze),ze.__input=Ie=>{const vt=Ie.currentTarget.value,Lt=Array.isArray(e(v).value)?e(v).value[1]:"";pe(I,{value:[vt,Lt]})};var Oe=n(ze,2);mt(Oe),Oe.__input=Ie=>{const vt=Ie.currentTarget.value,Lt=Array.isArray(e(v).value)?e(v).value[0]:"";pe(I,{value:[Lt,vt]})},t(ye),$((Ie,vt)=>{Ot(ze,Ie),Ot(Oe,vt)},[()=>Array.isArray(e(v).value)?e(v).value[0]:"",()=>Array.isArray(e(v).value)?e(v).value[1]:""]),o(ie,ye)},ut=ie=>{var ye=ya();mt(ye),ye.__input=ze=>pe(I,{value:ze.currentTarget.value}),$(ze=>x(ye,"type",ze),[()=>e(D)()[e(v).field]==="number"?"number":e(D)()[e(v).field]==="date"?"date":"text"]),qt(ye,()=>e(v).value,ze=>e(v).value=ze),o(ie,ye)};F(lt,ie=>{e(v).operator==="between"?ie(Le):ie(ut,!1)})}var We=n(lt,2),at=a(We);let it;at.__click=()=>Ee(I);var At=a(at,!0);t(at);var Nt=n(at,2);Nt.__click=()=>$e(I),t(We),t(J),$((ie,ye)=>{_e=Ae(J,1,"filter-row svelte-xd92ey",null,_e,ie),it=Ae(at,1,"toggle-filter-btn svelte-xd92ey",null,it,ye),x(at,"title",e(v).active?"Disable filter":"Enable filter"),z(At,e(v).active?"‚úì":"‚óã")},[()=>({inactive:!e(v).active}),()=>({active:e(v).active})]),Et(Se,()=>e(v).field,ie=>e(v).field=ie),Et(He,()=>e(v).operator,ie=>e(v).operator=ie),o(j,J)}),t(p);var N=n(p,2),R=n(a(N),2);ve(R,20,()=>e(ue)(),j=>j,(j,v)=>{var I=za(),J=a(I),_e=a(J),Se=a(_e,!0);t(_e);var He=n(_e,2),ge=a(He);t(He),t(J);var xe=n(J,2),tt=a(xe);{var gt=lt=>{const Le=G(()=>e(se)().fields[v]);var ut=$a(),We=Re(ut),at=a(We);t(We);var it=n(We,2);{var At=Oe=>{var Ie=wa(),vt=a(Ie);t(Ie),$(()=>z(vt,`Unique: ${e(Le).unique_count??""}`)),o(Oe,Ie)};F(it,Oe=>{e(Le).unique_count!==void 0&&Oe(At)})}var Nt=n(it,2);{var ie=Oe=>{var Ie=Sa(),vt=Re(Ie),Lt=a(vt);t(vt);var Gt=n(vt,2),Wt=a(Gt);t(Gt),$((ea,ta,aa)=>{z(Lt,`Range: ${ea??""} - ${ta??""}`),z(Wt,`Avg: ${aa??""}`)},[()=>e(Le).min.toFixed(2),()=>e(Le).max.toFixed(2),()=>e(Le).avg.toFixed(2)]),o(Oe,Ie)};F(Nt,Oe=>{e(Le).min!==void 0&&Oe(ie)})}var ye=n(Nt,2);{var ze=Oe=>{var Ie=Ma(),vt=a(Ie);t(Ie),$(()=>z(vt,`Most common: ${e(Le).most_common.value??""} (${e(Le).most_common.count??""})`)),o(Oe,Ie)};F(ye,Oe=>{e(Le).most_common&&Oe(ze)})}$(()=>z(at,`Non-null: ${e(Le).non_null_count??""}`)),o(lt,ut)};F(tt,lt=>{e(se)().fields?.[v]&&lt(gt)})}t(xe),t(I),$(lt=>{z(Se,v),z(ge,`(${lt??""})`)},[()=>e(D)()[v]]),o(j,I)}),t(R),t(N),t(l),o(s,l)};F(W,s=>{e(de)&&s(Ve)})}var be=n(W,2);{var Fe=s=>{var l=qa(),p=a(l),w=a(p);t(p);var c=n(p,2),m=n(a(c),2);ve(m,21,()=>Ge,R=>R.value,(R,j)=>{var v=Na(),I=a(v);t(v);var J={};$(()=>{z(I,`${e(j).icon??""} ${e(j).label??""}`),J!==(J=e(j).value)&&(v.value=(v.__value=e(j).value)??"")}),o(R,v)}),t(m),t(c);var N=n(c,2);ve(N,21,()=>Object.entries(e(fe)()),([R,j])=>R,(R,j)=>{var v=G(()=>Jt(e(j),2));let I=()=>e(v)[0],J=()=>e(v)[1];var _e=Ea(),Se=a(_e),He=a(Se),ge=a(He,!0);t(He);var xe=n(He,2),tt=a(xe);t(xe),t(Se);var gt=n(Se,2);{var lt=Le=>{var ut=Ta();ve(ut,20,()=>e(ue)().filter(We=>e(D)()[We]==="number"),We=>We,(We,at)=>{var it=Ca(),At=a(it),Nt=a(At);t(At);var ie=n(At,2),ye=a(ie,!0);t(ie),t(it),$(ze=>{z(Nt,`${at??""}:`),z(ye,ze)},[()=>le(J(),at,e(Me)).toFixed(2)]),o(We,it)}),t(ut),o(Le,ut)};F(gt,Le=>{e(Me)!=="count"&&Le(lt)})}t(_e),$(()=>{z(ge,I()),z(tt,`(${J().length??""} items)`)}),o(R,_e)}),t(N),t(l),$(()=>z(w,`Grouped by ${e(P)??""}`)),Et(m,()=>e(Me),R=>b(Me,R)),o(s,l)};F(be,s=>{e(P)&&Object.keys(e(fe)()).length>0&&s(Fe)})}var qe=n(be,2),Pe=a(qe),i=n(a(Pe),2),k=a(i);t(i),t(Pe);var A=n(Pe,2),h=a(A),y=a(h),E=a(y);ve(E,20,()=>e(ue)(),s=>s,(s,l)=>{var p=ja();let w;p.__click=[Pa,me,l];var c=a(p),m=a(c),N=a(m,!0);t(m);var R=n(m,2),j=a(R);t(R);var v=n(R,2);{var I=J=>{var _e=Ra(),Se=a(_e,!0);t(_e),$(()=>z(Se,e(_)==="asc"?"‚Üë":"‚Üì")),o(J,_e)};F(v,J=>{e(T)===l&&J(I)})}t(c),t(p),$((J,_e)=>{w=Ae(p,1,"sortable-header svelte-xd92ey",null,w,J),z(N,l),z(j,`(${_e??""})`)},[()=>({sorted:e(T)===l}),()=>e(D)()[l]]),o(s,p)}),t(E),t(y);var V=n(y);ve(V,21,()=>e(Be)(),dt,(s,l)=>{var p=La();ve(p,20,()=>e(ue)(),w=>w,(w,c)=>{var m=Da();let N;var R=a(m);{var j=I=>{var J=Dt();$(_e=>z(J,_e),[()=>typeof e(l)[c]=="number"?e(l)[c].toFixed(2):e(l)[c]]),o(I,J)},v=I=>{var J=rt(),_e=Re(J);{var Se=ge=>{var xe=Dt();$(tt=>z(xe,tt),[()=>e(l)[c]?new Date(e(l)[c]).toLocaleDateString():""]),o(ge,xe)},He=ge=>{var xe=Dt();$(()=>z(xe,e(l)[c]||"")),o(ge,xe)};F(_e,ge=>{e(D)()[c]==="date"?ge(Se):ge(He,!1)},!0)}o(I,J)};F(R,I=>{e(D)()[c]==="number"?I(j):I(v,!1)})}t(m),$(I=>N=Ae(m,1,"data-cell svelte-xd92ey",null,N,I),[()=>({numeric:e(D)()[c]==="number"})]),o(w,m)}),t(p),o(s,p)}),t(V),t(h),t(A);var we=n(A,2);{var O=s=>{var l=Oa(),p=a(l);p.__click=[Ia,De,ce];var w=n(p,2);ve(w,21,()=>Array(Math.min(5,Math.ceil(e(ne)().length/Z))),dt,(m,N,R)=>{const j=G(()=>Math.max(0,e(ce)-2)+R);var v=rt(),I=Re(v);{var J=_e=>{var Se=Fa();let He;Se.__click=[Ba,De,j];var ge=a(Se,!0);t(Se),$(xe=>{He=Ae(Se,1,"page-number-btn svelte-xd92ey",null,He,xe),z(ge,e(j)+1)},[()=>({active:e(j)===e(ce)})]),o(_e,Se)};F(I,_e=>{e(j)<Math.ceil(e(ne)().length/Z)&&_e(J)})}o(m,v)}),t(w);var c=n(w,2);c.__click=[Ha,De,ce],t(l),$(m=>{p.disabled=e(ce)===0,c.disabled=m},[()=>e(ce)>=Math.ceil(e(ne)().length/Z)-1]),o(s,l)};F(we,s=>{Math.ceil(e(ne)().length/Z)>1&&s(O)})}t(qe),t(Ce),$((s,l,p)=>{z(Te,r.title||"Data Explorer"),z(xt,`${s??""} of ${u().length??""} rows`),zt=Ae(_t,1,"toggle-btn svelte-xd92ey",null,zt,l),yt.disabled=!e(te)&&!e(T)&&!e(P)&&e(U).length===0,z(k,`Page ${e(ce)+1} of ${p??""}`)},[()=>e(ne)().length,()=>({active:e(de)}),()=>Math.ceil(e(ne)().length/Z)]),qt(kt,()=>e(te),s=>b(te,s)),Et(wt,()=>e(P),s=>b(P,s)),Et(oe,()=>e(T),s=>b(T,s)),o(C,Ce),jt()}Ct(["click","input","change"]);Ct(["mousemove","click","keydown"]);function Va(C,r,d,u){r.parameters.forEach(q=>{d[q.name]=q.default}),u("parametersreset",{values:{...d}}),r.onParametersReset?.({values:{...d}})}var Ka=S('<span class="parameter-description svelte-ff2kid"> </span>'),Ga=(C,r,d)=>r(e(d).name,parseFloat(C.currentTarget.value)),Qa=S('<div class="slider-container svelte-ff2kid"><input type="range" class="slider svelte-ff2kid"/> <div class="slider-value svelte-ff2kid"> </div></div>'),Ja=(C,r,d)=>r(e(d).name,C.currentTarget.value),Za=S("<option> </option>"),Ya=S('<select class="dropdown svelte-ff2kid"></select>'),Xa=(C,r,d)=>r(e(d).name,C.currentTarget.checked),Wa=S('<label class="toggle-container svelte-ff2kid"><input type="checkbox" class="toggle-input svelte-ff2kid"/> <span class="toggle-slider svelte-ff2kid"></span></label>'),er=(C,r,d)=>r(e(d).name,parseFloat(C.currentTarget.value)),tr=S('<input type="number" class="number-input svelte-ff2kid"/>'),ar=(C,r,d)=>r(e(d).name,C.currentTarget.value),rr=S('<input type="text" class="text-input svelte-ff2kid"/>'),nr=(C,r,d)=>r(e(d).name,C.currentTarget.value),sr=S('<input type="text" class="generic-input svelte-ff2kid" placeholder="Enter value..."/>'),lr=S('<div class="parameter-control svelte-ff2kid"><label class="parameter-label svelte-ff2kid"> <!></label> <div class="parameter-input svelte-ff2kid"><!></div></div>'),or=S('<div class="no-parameters svelte-ff2kid"><p>No parameters available for this visualization.</p></div>'),ir=S('<div class="parameter-controls svelte-ff2kid"><div class="controls-header svelte-ff2kid"><h4 class="controls-title svelte-ff2kid">Parameters</h4> <button class="reset-button svelte-ff2kid" type="button" title="Reset all parameters to default values">Reset</button></div> <div class="controls-grid svelte-ff2kid"></div> <!></div>');function Xt(C,r){Rt(r,!0);const d=Vt();let u=ot({});Kt(()=>{r.parameters.forEach(T=>{T.name in u||(u[T.name]=T.default)})});function q(T,_){u[T]=_,d("parameterchange",{parameter:T,value:_,allValues:{...u}}),r.onParameterChange?.({parameter:T,value:_,allValues:{...u}})}function L(T,_,Z){return T.constraints?.[_]??Z}var Q=ir(),ee=a(Q),te=n(a(ee),2);te.__click=[Va,r,u,d],t(ee);var U=n(ee,2);ve(U,21,()=>r.parameters,T=>T.name,(T,_)=>{var Z=lr(),ce=a(Z),ue=a(ce),D=n(ue);{var ne=Me=>{var he=Ka(),Ne=a(he,!0);t(he),$(()=>z(Ne,e(_).description)),o(Me,he)};F(D,Me=>{e(_).description&&Me(ne)})}t(ce);var fe=n(ce,2),se=a(fe);{var Be=Me=>{var he=Qa(),Ne=a(he);mt(Ne),Ne.__input=[Ga,q,_];var Qe=n(Ne,2),Je=a(Qe,!0);t(Qe),t(he),$((ke,B,Y)=>{x(Ne,"id",`param-${e(_).name??""}`),x(Ne,"min",ke),x(Ne,"max",B),x(Ne,"step",Y),z(Je,u[e(_).name])},[()=>L(e(_),"min",0),()=>L(e(_),"max",100),()=>L(e(_),"step",1)]),qt(Ne,()=>u[e(_).name],ke=>u[e(_).name]=ke),o(Me,he)},Ge=Me=>{var he=rt(),Ne=Re(he);{var Qe=ke=>{var B=Ya();B.__change=[Ja,q,_],ve(B,20,()=>e(_).constraints?.options||[],Y=>Y,(Y,le)=>{var me=Za(),$e=a(me,!0);t(me);var pe={};$(()=>{z($e,le),pe!==(pe=le)&&(me.value=(me.__value=le)??"")}),o(Y,me)}),t(B),$(()=>x(B,"id",`param-${e(_).name??""}`)),Et(B,()=>u[e(_).name],Y=>u[e(_).name]=Y),o(ke,B)},Je=ke=>{var B=rt(),Y=Re(B);{var le=$e=>{var pe=Wa(),Ee=a(pe);mt(Ee),Ee.__change=[Xa,q,_],Pt(2),t(pe),$(()=>x(Ee,"id",`param-${e(_).name??""}`)),Zt(Ee,()=>u[e(_).name],De=>u[e(_).name]=De),o($e,pe)},me=$e=>{var pe=rt(),Ee=Re(pe);{var De=je=>{var ae=tr();mt(ae),ae.__input=[er,q,_],$((Ce,Ze,Ye)=>{x(ae,"id",`param-${e(_).name??""}`),x(ae,"min",Ce),x(ae,"max",Ze),x(ae,"step",Ye)},[()=>L(e(_),"min",void 0),()=>L(e(_),"max",void 0),()=>L(e(_),"step","any")]),qt(ae,()=>u[e(_).name],Ce=>u[e(_).name]=Ce),o(je,ae)},nt=je=>{var ae=rt(),Ce=Re(ae);{var Ze=Ke=>{var Te=rr();mt(Te),Te.__input=[ar,q,_],$(()=>{x(Te,"id",`param-${e(_).name??""}`),x(Te,"placeholder",e(_).description||"")}),qt(Te,()=>u[e(_).name],st=>u[e(_).name]=st),o(Ke,Te)},Ye=Ke=>{var Te=sr();mt(Te),Te.__input=[nr,q,_],$(()=>x(Te,"id",`param-${e(_).name??""}`)),qt(Te,()=>u[e(_).name],st=>u[e(_).name]=st),o(Ke,Te)};F(Ce,Ke=>{e(_).type==="text"||e(_).type==="string"?Ke(Ze):Ke(Ye,!1)},!0)}o(je,ae)};F(Ee,je=>{e(_).type==="number"?je(De):je(nt,!1)},!0)}o($e,pe)};F(Y,$e=>{e(_).type==="toggle"||e(_).type==="boolean"?$e(le):$e(me,!1)},!0)}o(ke,B)};F(Ne,ke=>{e(_).type==="dropdown"||e(_).type==="select"||e(_).constraints?.options?ke(Qe):ke(Je,!1)},!0)}o(Me,he)};F(se,Me=>{e(_).type==="slider"||e(_).type==="number"&&e(_).constraints?.min!==void 0&&e(_).constraints?.max!==void 0?Me(Be):Me(Ge,!1)})}t(fe),t(Z),$(()=>{x(Z,"data-parameter",e(_).name),x(ce,"for",`param-${e(_).name??""}`),z(ue,`${e(_).name??""} `)}),o(T,Z)}),t(U);var de=n(U,2);{var P=T=>{var _=or();o(T,_)};F(de,T=>{r.parameters.length===0&&T(P)})}t(Q),o(C,Q),jt()}Ct(["click","input","change"]);var vr=ct('<text text-anchor="middle" class="layer-label svelte-s5w31d"> </text>'),cr=ct('<line class="edge svelte-s5w31d"></line>'),ur=ct('<circle class="node svelte-s5w31d"></circle>'),dr=S('<div class="nn-visualizer svelte-s5w31d"><header class="nn-header svelte-s5w31d"><h3 class="title svelte-s5w31d">Neural Network Visualizer</h3> <p class="subtitle svelte-s5w31d">Adjust structure and activation to explore architectures</p></header> <div class="controls svelte-s5w31d"><!></div> <div class="canvas-wrapper svelte-s5w31d"><svg class="nn-svg svelte-s5w31d" role="img" aria-label="Neural network diagram"><!><!><!><g><rect width="150" height="22" rx="6" class="badge svelte-s5w31d"></rect><text x="75" y="15" text-anchor="middle" class="badge-text svelte-s5w31d"> </text></g></svg></div></div>');function Sn(C,r){Rt(r,!0);let d=Ue(r,"inputSize",3,3),u=Ue(r,"outputSize",3,2),q=Ue(r,"hiddenLayers",7,2),L=Ue(r,"neuronsPerHidden",7,5),Q=Ue(r,"activation",7,"relu");const ee=G(()=>()=>{const B=[d()];for(let Y=0;Y<q();Y++)B.push(L());return B.push(u()),B}),te=G(()=>()=>[{name:"Hidden Layers",type:"slider",default:q(),description:"Number of hidden layers",constraints:{min:0,max:5,step:1}},{name:"Neurons/Hidden",type:"slider",default:L(),description:"Neurons per hidden layer",constraints:{min:1,max:12,step:1}},{name:"Activation",type:"select",default:Q(),description:"Activation function",constraints:{options:["relu","sigmoid","tanh","linear"]}}]);function U(B){const{parameter:Y,value:le}=B.detail;Y==="Hidden Layers"&&q(Number(le)),Y==="Neurons/Hidden"&&L(Number(le)),Y==="Activation"&&Q(le)}const de=800,P=420,T={top:20,right:40,bottom:20,left:40},_=G(()=>()=>de-T.left-T.right),Z=G(()=>()=>P-T.top-T.bottom);function ce(){const B=[],Y=e(ee)().length;for(let le=0;le<Y;le++){const me=e(ee)()[le];for(let $e=0;$e<me;$e++){const pe=T.left+e(_)()*le/Math.max(1,Y-1),Ee=T.top+e(Z)()*($e+1)/(me+1);B.push({x:pe,y:Ee,layer:le,index:$e})}}return B}const ue=G(()=>ce);function D(B){return B===0?"Input":B===e(ee)().length-1?"Output":`Hidden ${B}`}var ne=dr(),fe=n(a(ne),2),se=a(fe);{let B=G(()=>e(te)());Xt(se,{get parameters(){return e(B)},onParameterChange:Y=>U(new CustomEvent("parameterchange",{detail:Y}))})}t(fe);var Be=n(fe,2),Ge=a(Be);x(Ge,"width",de),x(Ge,"height",P);var Me=a(Ge);ve(Me,17,()=>e(ee)(),dt,(B,Y,le)=>{var me=vr();x(me,"y",16);var $e=a(me);t(me),$((pe,Ee)=>{x(me,"x",pe),z($e,`${Ee??""} (${e(Y)??""})`)},[()=>T.left+e(_)()*le/Math.max(1,e(ee)().length-1),()=>D(le)]),o(B,me)});var he=n(Me);ve(he,17,()=>Array(e(ee)().length-1),dt,(B,Y,le)=>{var me=rt(),$e=Re(me);ve($e,17,()=>e(ue)().filter(pe=>pe.layer===le),pe=>pe.index,(pe,Ee)=>{var De=rt(),nt=Re(De);ve(nt,17,()=>e(ue)().filter(je=>je.layer===le+1),je=>je.index,(je,ae)=>{var Ce=cr();$(()=>{x(Ce,"x1",e(Ee).x),x(Ce,"y1",e(Ee).y),x(Ce,"x2",e(ae).x),x(Ce,"y2",e(ae).y)}),o(je,Ce)}),o(pe,De)}),o(B,me)});var Ne=n(he);ve(Ne,17,()=>e(ue)(),B=>`${B.layer}-${B.index}`,(B,Y)=>{var le=ur();x(le,"r",12),$(()=>{x(le,"cx",e(Y).x),x(le,"cy",e(Y).y)}),o(B,le)});var Qe=n(Ne);x(Qe,"transform",`translate(${de-160}, ${P-24})`);var Je=n(a(Qe)),ke=a(Je);t(Je),t(Qe),t(Ge),t(Be),t(ne),$(()=>z(ke,`Activation: ${Q()??""}`)),o(C,ne),jt()}function _r(C,r,d,u,q){b(r,!0),e(d)&&(cancelAnimationFrame(e(d)),b(d,null)),u("simulationPause",{blockId:q().id})}function gr(C,r,d,u){if(e(r).length===0){alert("No simulation data to export. Run the simulation first.");return}const q=d().content.parameters.reduce((L,Q)=>(L[Q.name]=Q.default,L),{});sa(d().content.simulationType,q,e(r)),u("simulationReportExport",{blockId:d().id})}function pr(C,r,d,u,q,L,Q,ee){e(r)&&!e(d)||(u(),q("simulationStep",{step:e(L),state:e(Q),blockId:ee().id}))}function fr(C,r){const d=C.target;b(r,parseFloat(d.value),!0)}function hr(C,r,d,u,q){b(r,!e(r)),e(r)&&!e(d)?u():!e(r)&&e(d)&&q()}var mr=S('<div class="parameters-section svelte-1u88794"><!></div>'),br=(C,r)=>r("json"),xr=(C,r)=>r("csv"),yr=S('<div class="simulation-display svelte-1u88794"><h4 class="svelte-1u88794">Simulation Visualization</h4> <div class="visualization-placeholder svelte-1u88794"><p class="svelte-1u88794"> </p> <p class="svelte-1u88794"> </p> <p class="svelte-1u88794"> </p></div></div>'),kr=S('<div class="no-visualization svelte-1u88794"><p>No visualization configured for this simulation.</p></div>'),wr=S('<div class="state-item svelte-1u88794"><span class="state-key svelte-1u88794"> </span> <span class="state-value svelte-1u88794"> </span></div>'),Sr=S('<div class="source-attribution svelte-1u88794"><small><strong>Source:</strong> <a target="_blank" rel="noopener" class="svelte-1u88794"> </a> <br/> <em> </em> <br/> <span class="confidence-score svelte-1u88794"> </span></small></div>'),Mr=S('<div class="simulation-block svelte-1u88794"><header class="simulation-header svelte-1u88794"><div class="simulation-title-section svelte-1u88794"><h3 class="simulation-title svelte-1u88794"> </h3> <div class="simulation-status svelte-1u88794"><span> </span> <span class="step-counter svelte-1u88794"> </span></div></div></header> <div class="simulation-content svelte-1u88794"><!> <div class="controls-section svelte-1u88794"><div class="playback-controls svelte-1u88794"><button type="button" title="Start simulation">‚ñ∂Ô∏è Start</button> <button type="button" title="Pause simulation">‚è∏Ô∏è Pause</button> <button class="control-btn stop-btn svelte-1u88794" type="button" title="Stop simulation">‚èπÔ∏è Stop</button> <button class="control-btn reset-btn svelte-1u88794" type="button" title="Reset simulation">üîÑ Reset</button> <button class="control-btn export-btn svelte-1u88794" type="button" title="Export results as JSON">üìä Export JSON</button> <button class="control-btn export-btn svelte-1u88794" type="button" title="Export results as CSV">üìà Export CSV</button> <button class="control-btn report-btn svelte-1u88794" type="button" title="Export simulation report">üìã Report</button> <button class="control-btn step-btn svelte-1u88794" type="button" title="Execute single step">‚è≠Ô∏è Step</button></div> <div class="simulation-settings svelte-1u88794"><div class="speed-control svelte-1u88794"><label>Speed:</label> <input type="range" min="0.1" max="5" step="0.1" class="speed-slider svelte-1u88794"/> <span class="speed-value svelte-1u88794"> </span></div> <div class="auto-run-control svelte-1u88794"><label class="auto-run-label svelte-1u88794"><input type="checkbox" class="auto-run-checkbox svelte-1u88794"/> Auto-run on parameter change</label></div></div></div> <div class="visualization-section svelte-1u88794"><div class="visualization-container svelte-1u88794"><!></div></div> <div class="state-section svelte-1u88794"><h4 class="state-title svelte-1u88794">Current State</h4> <div class="state-display svelte-1u88794"></div></div> <!></div></div>');function Mn(C,r){Rt(r,!0);const d=Vt();let u=Ue(r,"block",7);Ue(r,"editable",3,!1);let q=re(ot({...u().content.initialState})),L=re(!1),Q=re(!1),ee=re(null),te=re(0),U=re(1),de=re(!1),P=re(ot([]));const T=G(()=>()=>u().content.parameters.map(M=>({name:M.name,type:M.type,default:M.default,description:M.description,constraints:{min:M.min,max:M.max,step:M.step,options:M.options}})));function _(M){const{parameter:H,value:X}=M.detail,W=u().content.parameters.findIndex(Ve=>Ve.name===H);W>=0&&(u().content.parameters[W].default=X),e(L)&&(ue(),e(de)&&Z()),d("parameterChange",{parameter:H,value:X,blockId:u().id})}function Z(){e(L)&&!e(Q)||(b(L,!0),b(Q,!1),fe(),d("simulationStart",{blockId:u().id}))}function ce(){b(L,!1),b(Q,!1),e(ee)&&(cancelAnimationFrame(e(ee)),b(ee,null)),d("simulationStop",{blockId:u().id})}function ue(){ce(),b(q,{...u().content.initialState},!0),b(te,0),b(P,[],!0),d("simulationReset",{blockId:u().id})}function D(M="json"){if(e(P).length===0){alert("No simulation data to export. Run the simulation first.");return}const H=u().content.parameters.reduce((X,W)=>(X[W.name]=W.default,X),{});na(u().content.simulationType,H,e(P),M),d("simulationExport",{format:M,blockId:u().id})}function ne(){try{const M=new Function("state","parameters","step",u().content.stepFunction),H=u().content.parameters.reduce((X,W)=>(X[W.name]=W.default,X),{});b(q,M(e(q),H,e(te))||e(q),!0),e(P).push({step:e(te),time:e(te)*.016,state:{...e(q)},timestamp:Date.now()}),ra(te)}catch(M){d("simulationError",{error:M.message,step:e(te)}),ce()}}function fe(){if(!e(L)||e(Q))return;ne();const M=Math.max(16,1e3/(60*e(U)));setTimeout(()=>{e(L)&&!e(Q)&&b(ee,requestAnimationFrame(fe),!0)},M)}Kt(()=>()=>{e(ee)&&cancelAnimationFrame(e(ee))});function se(M){return typeof M=="number"?M.toFixed(3):typeof M=="object"?JSON.stringify(M,null,2):String(M)}var Be=Mr(),Ge=a(Be),Me=a(Ge),he=a(Me),Ne=a(he);t(he);var Qe=n(he,2),Je=a(Qe);let ke;var B=a(Je,!0);t(Je);var Y=n(Je,2),le=a(Y);t(Y),t(Qe),t(Me),t(Ge);var me=n(Ge,2),$e=a(me);{var pe=M=>{var H=mr(),X=a(H);{let W=G(()=>e(T)());Xt(X,{get parameters(){return e(W)},onParameterChange:Ve=>_(new CustomEvent("parameterchange",{detail:Ve}))})}t(H),o(M,H)};F($e,M=>{e(T)().length>0&&M(pe)})}var Ee=n($e,2),De=a(Ee),nt=a(De);let je;nt.__click=Z;var ae=n(nt,2);let Ce;ae.__click=[_r,Q,ee,d,u];var Ze=n(ae,2);Ze.__click=ce;var Ye=n(Ze,2);Ye.__click=ue;var Ke=n(Ye,2);Ke.__click=[br,D];var Te=n(Ke,2);Te.__click=[xr,D];var st=n(Te,2);st.__click=[gr,P,u,d];var bt=n(st,2);bt.__click=[pr,L,Q,ne,d,te,q,u],t(De);var pt=n(De,2),xt=a(pt),Mt=a(xt),_t=n(Mt,2);mt(_t),_t.__input=[fr,U];var zt=n(_t,2),$t=a(zt);t(zt),t(xt);var yt=n(xt,2),ft=a(yt),ht=a(ft);mt(ht),ht.__change=[hr,de,L,Z,ce],Pt(),t(ft),t(yt),t(pt),t(Ee);var kt=n(Ee,2),Xe=a(kt),et=a(Xe);{var wt=M=>{var H=yr(),X=n(a(H),2),W=a(X),Ve=a(W);t(W);var be=n(W,2),Fe=a(be);t(be);var qe=n(be,2),Pe=a(qe);t(qe),t(X),t(H),$(()=>{z(Ve,`Visualization Type: ${u().content.visualization.type??""}`),z(Fe,`Dimensions: ${u().content.visualization.width??""} √ó ${u().content.visualization.height??""}`),z(Pe,`Interactive: ${u().content.visualization.interactive?"Yes":"No"}`)}),o(M,H)},St=M=>{var H=kr();o(M,H)};F(et,M=>{u().content.visualization?M(wt):M(St,!1)})}t(Xe),t(kt);var f=n(kt,2),g=n(a(f),2);ve(g,21,()=>Object.entries(e(q)),([M,H])=>M,(M,H)=>{var X=G(()=>Jt(e(H),2));let W=()=>e(X)[0],Ve=()=>e(X)[1];var be=wr(),Fe=a(be),qe=a(Fe);t(Fe);var Pe=n(Fe,2),i=a(Pe,!0);t(Pe),t(be),$(k=>{z(qe,`${W()??""}:`),z(i,k)},[()=>se(Ve())]),o(M,be)}),t(g),t(f);var oe=n(f,2);{var K=M=>{var H=Sr(),X=a(H),W=n(a(X),2),Ve=a(W,!0);t(W);var be=n(W,4),Fe=a(be);t(be);var qe=n(be,4),Pe=a(qe);t(qe),t(X),t(H),$(i=>{x(W,"href",u().content.sourceReference.originalUrl),z(Ve,u().content.sourceReference.originalUrl),z(Fe,`Transformation: ${u().content.sourceReference.transformationReasoning??""}`),z(Pe,`Confidence: ${i??""}%`)},[()=>Math.round(u().content.sourceReference.confidence*100)]),o(M,H)};F(oe,M=>{u().content.sourceReference&&M(K)})}t(me),t(Be),$((M,H,X,W)=>{x(Be,"data-block-id",u().id),z(Ne,`${u().content.simulationType??""} Simulation`),ke=Ae(Je,1,"status-indicator svelte-1u88794",null,ke,M),z(B,e(L)?e(Q)?"Paused":"Running":"Stopped"),z(le,`Step: ${e(te)??""}`),je=Ae(nt,1,"control-btn start-btn svelte-1u88794",null,je,H),nt.disabled=e(L)&&!e(Q),Ce=Ae(ae,1,"control-btn pause-btn svelte-1u88794",null,Ce,X),ae.disabled=!e(L),Ze.disabled=!e(L),Ke.disabled=e(P).length===0,Te.disabled=e(P).length===0,st.disabled=e(P).length===0,bt.disabled=e(L)&&!e(Q),x(Mt,"for",`speed-${u().id??""}`),x(_t,"id",`speed-${u().id??""}`),z($t,`${W??""}x`)},[()=>({running:e(L),paused:e(Q)}),()=>({active:e(L)&&!e(Q)}),()=>({active:e(Q)}),()=>e(U).toFixed(1)]),qt(_t,()=>e(U),M=>b(U,M)),Zt(ht,()=>e(de),M=>b(de,M)),o(C,Be),jt()}Ct(["click","input","change"]);Ct(["click"]);Ct(["click"]);function $r(C,r,d,u,q){b(r,1),b(d,!1),b(u,{x:0,y:0},!0),q.onZoomReset?.()}function zr(C,r,d){b(r,!e(r)),d.onAnimationToggle?.({enabled:e(r)})}var Ar=(C,r,d)=>r(e(d).value),Nr=S('<button type="button"><span class="chart-icon"> </span> <span class="chart-label"> </span></button>'),Cr=S("<option> </option>"),Tr=S('<button class="control-btn svelte-1cogvj6" title="Reset zoom" type="button">üîç Reset Zoom</button>'),Er=S('<span class="selection-indicator"> </span>'),qr=ct('<line stroke="var(--grid-color, #e9ecef)" stroke-width="1"></line>'),Pr=ct('<line stroke="var(--grid-color, #e9ecef)" stroke-width="1"></line>'),Rr=ct('<path fill="none" stroke-width="3"></path><path fill="url(#chart-gradient)" opacity="0.3"></path>',1),jr=ct('<rect stroke-width="2"></rect>'),Dr=ct('<circle stroke-width="2"></circle>'),Lr=ct('<rect stroke-width="1"></rect>'),Ir=S('<div class="chart-tooltip svelte-1cogvj6"><!></div>'),Br=S('<div class="advanced-interactive-chart svelte-1cogvj6" aria-label="Interactive Chart"><div class="chart-controls svelte-1cogvj6"><div class="control-group"><span class="control-label">Chart Type:</span> <div class="chart-type-selector"></div></div> <div class="control-group"><span class="control-label">Color Scheme:</span> <select class="color-scheme-select"></select></div> <div class="control-group"><button title="Toggle animations" type="button">üé¨ Animate</button> <!> <button class="control-btn svelte-1cogvj6" title="Export chart" type="button">üíæ Export</button></div> <div class="zoom-info"><span class="zoom-indicator"> </span> <!></div></div> <button class="chart-surface-button" type="button" aria-label="Interactive chart canvas" title="Interactive chart canvas"><svg aria-hidden="true"><defs><linearGradient id="chart-gradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%"></stop><stop offset="100%"></stop></linearGradient></defs><rect fill="var(--chart-bg, #fafafa)" stroke="var(--chart-border, #e1e5e9)" rx="4"></rect><g class="grid" opacity="0.3"><!><!></g><g class="data-layer"><!></g></svg></button> <!></div>');function $n(C,r){Rt(r,!0);let d=Ue(r,"chartType",3,"line"),u=Ue(r,"filters",19,()=>[]);Ue(r,"interactions",19,()=>[]);let q=Ue(r,"config",19,()=>({})),L,Q,ee=re(!1),te=re(1),U=re(ot({x:0,y:0})),de=re(null),P=re(ot([])),T=re(null),_=re(ot(q().animations?.enabled??!0)),Z=re(ot(d())),ce=q().layout?.width||800,ue=q().layout?.height||500,D=q().layout?.margin||{top:40,right:40,bottom:60,left:60};const ne=G(()=>()=>ce-D.left-D.right),fe=G(()=>()=>ue-D.top-D.bottom),se=G(()=>()=>Ne(r.data,u())),Be=[{value:"line",label:"Line Chart",icon:"üìà"},{value:"bar",label:"Bar Chart",icon:"üìä"},{value:"scatter",label:"Scatter Plot",icon:"‚ö™"},{value:"heatmap",label:"Heat Map",icon:"üî•"}],Ge={default:["#0066cc","#ff6b35","#28a745","#ffc107","#dc3545"],viridis:["#440154","#31688e","#35b779","#fde725"],plasma:["#0d0887","#7e03a8","#cc4778","#f89441","#f0f921"],cool:["#6baed6","#4292c6","#2171b5","#08519c","#08306b"]};let Me=re("default");const he=G(()=>()=>Ge[e(Me)]||Ge.default);function Ne(i,k){if(!i?.data)return[];let A=Array.isArray(i.data)?[...i.data]:Object.entries(i.data).map(([h,y])=>({x:h,y}));return k.forEach(h=>{h.active&&(A=A.filter(y=>{const E=y[h.field];switch(h.operator){case"equals":return E===h.value;case"contains":return String(E).toLowerCase().includes(String(h.value).toLowerCase());case"greater":return Number(E)>Number(h.value);case"less":return Number(E)<Number(h.value);case"between":if(Array.isArray(h.value)&&h.value.length===2){const V=Number(E);return V>=Number(h.value[0])&&V<=Number(h.value[1])}return!0;default:return!0}}))}),A}function Qe(i){if(!i.length)return{x_scale:()=>0,y_scale:()=>e(fe)()};const k=i.map(O=>O.x),A=i.map(O=>O.y).filter(O=>typeof O=="number"),h=k.every(O=>typeof O=="number");let y,E;if(h){const O=Math.min(...k),s=Math.max(...k);y=l=>(l-O)/(s-O)*e(ne)()}else y=(O,s)=>s/Math.max(1,k.length-1)*e(ne)();const V=Math.min(...A),we=Math.max(...A);return E=O=>e(fe)()-(O-V)/(we-V)*e(fe)(),{x_scale:y,y_scale:E}}const Je=G(()=>()=>Qe(e(se)())),ke=(i,k)=>e(Je)().x_scale(i,k),B=i=>e(Je)().y_scale(i);function Y(i,k,A){return i.length<2?"":i.map((h,y)=>{const E=k(h.x,y),V=A(h.y);return`${y===0?"M":"L"} ${E} ${V}`}).join(" ")}function le(){return Math.max(10,e(ne)()/Math.max(1,e(se)().length)*.8)}function me(i){if(!L)return;const k=L.getBoundingClientRect(),A=(i.clientX-k.left-D.left)/e(te)-e(U).x,h=(i.clientY-k.top-D.top)/e(te)-e(U).y,y=De(A,h);y&&(b(de,y,!0),b(T,{x:i.clientX-k.left,y:i.clientY-k.top,content:nt(y)},!0),r.onHover?.({point:y,coordinates:{x:A,y:h}}))}function $e(){b(de,null),b(T,null),r.onHoverEnd?.()}function pe(i){if(!L)return;const k=L.getBoundingClientRect(),A=(i.clientX-k.left-D.left)/e(te)-e(U).x,h=(i.clientY-k.top-D.top)/e(te)-e(U).y,y=De(A,h);if(y){const E=e(P).findIndex(V=>V===y);E>=0?b(P,e(P).filter((V,we)=>we!==E),!0):b(P,[...e(P),y],!0),r.onSelect?.({point:y,selected:e(P)})}}function Ee(i){i.preventDefault();const k=i.deltaY>0?.9:1.1,A=Math.max(.5,Math.min(5,e(te)*k));A!==e(te)&&(b(te,A,!0),b(ee,e(te)!==1),r.onZoom?.({zoomLevel:e(te),isZoomed:e(ee)}))}function De(i,k){if(!e(se)().length)return null;let A=e(se)()[0],h=1/0;return e(se)().forEach((y,E)=>{const V=ke(y.x,E),we=B(y.y),O=Math.sqrt((i-V)**2+(k-we)**2);O<h&&(h=O,A=y)}),h<30?A:null}function nt(i){return`${i.label||"Point"}: ${i.y}${i.unit||""}`}function je(i){b(Z,i,!0),r.onChartTypeChange?.({chartType:i})}function ae(){if(!Q)return;const i=new XMLSerializer().serializeToString(Q),k=document.createElement("canvas"),A=k.getContext("2d"),h=new Image;h.onload=()=>{k.width=ce,k.height=ue,A?.drawImage(h,0,0);const y=document.createElement("a");y.download=`chart-${Date.now()}.png`,y.href=k.toDataURL(),y.click()},h.src="data:image/svg+xml;base64,"+btoa(i),r.onExport?.({format:"png"})}Yt(()=>{r.onReady?.({config:q(),chartType:e(Z)})});var Ce=Br(),Ze=a(Ce),Ye=a(Ze),Ke=n(a(Ye),2);ve(Ke,21,()=>Be,i=>i.value,(i,k)=>{var A=Nr();let h;A.__click=[Ar,je,k];var y=a(A),E=a(y,!0);t(y);var V=n(y,2),we=a(V,!0);t(V),t(A),$(O=>{h=Ae(A,1,"chart-type-btn svelte-1cogvj6",null,h,O),x(A,"title",e(k).label),z(E,e(k).icon),z(we,e(k).label)},[()=>({active:e(Z)===e(k).value})]),o(i,A)}),t(Ke),t(Ye);var Te=n(Ye,2),st=n(a(Te),2);ve(st,20,()=>Object.keys(Ge),i=>i,(i,k)=>{var A=Cr(),h=a(A,!0);t(A);var y={};$(E=>{z(h,E),y!==(y=k)&&(A.value=(A.__value=k)??"")},[()=>k.charAt(0).toUpperCase()+k.slice(1)]),o(i,A)}),t(st),t(Te);var bt=n(Te,2),pt=a(bt);let xt;pt.__click=[zr,_,r];var Mt=n(pt,2);{var _t=i=>{var k=Tr();k.__click=[$r,te,ee,U,r],o(i,k)};F(Mt,i=>{e(ee)&&i(_t)})}var zt=n(Mt,2);zt.__click=ae,t(bt);var $t=n(bt,2),yt=a($t),ft=a(yt);t(yt);var ht=n(yt,2);{var kt=i=>{var k=Er(),A=a(k);t(k),$(()=>z(A,`Selected: ${e(P).length??""}`)),o(i,k)};F(ht,i=>{e(P).length>0&&i(kt)})}t($t),t(Ze);var Xe=n(Ze,2);Xe.__click=pe,Xe.__mousemove=me;var et=a(Xe);let wt;var St=a(et),f=a(St),g=a(f),oe=n(g);t(f),t(St);var K=n(St),M=n(K),H=a(M);ve(H,16,()=>Array(6),dt,(i,k,A)=>{var h=qr();$((y,E,V)=>{x(h,"x1",D.left),x(h,"y1",y),x(h,"x2",E),x(h,"y2",V)},[()=>D.top+A*e(fe)()/5,()=>D.left+e(ne)(),()=>D.top+A*e(fe)()/5]),o(i,h)});var X=n(H);ve(X,16,()=>Array(6),dt,(i,k,A)=>{var h=Pr();$((y,E,V)=>{x(h,"x1",y),x(h,"y1",D.top),x(h,"x2",E),x(h,"y2",V)},[()=>D.left+A*e(ne)()/5,()=>D.left+A*e(ne)()/5,()=>D.top+e(fe)()]),o(i,h)}),t(M);var W=n(M),Ve=a(W);{var be=i=>{var k=Rr(),A=Re(k);let h;var y=n(A);let E;$((V,we,O,s)=>{x(A,"d",V),x(A,"stroke",e(he)[0]),h=Ae(A,0,"line-path",null,h,we),x(y,"d",O),E=Ae(y,0,"area-fill",null,E,s)},[()=>Y(e(se)(),ke,B),()=>({animated:e(_)}),()=>Y(e(se)(),ke,B)+` L ${ke(e(se)()[e(se)().length-1].x,e(se)().length-1)} ${e(fe)()} L ${ke(e(se)()[0].x,0)} ${e(fe)()} Z`,()=>({animated:e(_)})]),o(i,k)},Fe=i=>{var k=rt(),A=Re(k);{var h=E=>{var V=rt(),we=Re(V);ve(we,19,()=>e(se)(),(O,s)=>O.id||s,(O,s,l)=>{const p=G(()=>ke(e(s).x,e(l))),w=G(()=>B(e(s).y)),c=G(le);var m=jr();let N;$((R,j,v)=>{x(m,"x",e(p)-e(c)/2),x(m,"y",e(w)),x(m,"width",e(c)),x(m,"height",R),x(m,"fill",e(he)[e(l)%e(he).length]),x(m,"stroke",j),N=Ae(m,0,"bar-rect",null,N,v)},[()=>e(fe)()-e(w),()=>e(P).includes(e(s))?"#000":"none",()=>({hovered:e(de)===e(s),selected:e(P).includes(e(s)),animated:e(_)})]),o(O,m)}),o(E,V)},y=E=>{var V=rt(),we=Re(V);{var O=l=>{var p=rt(),w=Re(p);ve(w,19,()=>e(se)(),(c,m)=>c.id||m,(c,m,N)=>{const R=G(()=>ke(e(m).x,e(N))),j=G(()=>B(e(m).y));var v=Dr();let I;$((J,_e,Se)=>{x(v,"cx",e(R)),x(v,"cy",e(j)),x(v,"r",J),x(v,"fill",e(he)[e(N)%e(he).length]),x(v,"stroke",_e),I=Ae(v,0,"scatter-point",null,I,Se)},[()=>e(P).includes(e(m))?8:e(de)===e(m)?6:4,()=>e(P).includes(e(m))?"#000":"#fff",()=>({hovered:e(de)===e(m),selected:e(P).includes(e(m)),animated:e(_)})]),o(c,v)}),o(l,p)},s=l=>{var p=rt(),w=Re(p);{var c=m=>{var N=rt(),R=Re(N);ve(R,19,()=>e(se)(),(j,v)=>j.id||v,(j,v,I)=>{const J=G(()=>e(I)%Math.ceil(Math.sqrt(e(se)().length))*(e(ne)()/Math.ceil(Math.sqrt(e(se)().length)))),_e=G(()=>Math.floor(e(I)/Math.ceil(Math.sqrt(e(se)().length)))*(e(fe)()/Math.ceil(Math.sqrt(e(se)().length)))),Se=G(()=>Math.min(e(ne)(),e(fe)())/Math.ceil(Math.sqrt(e(se)().length))),He=G(()=>Math.abs(e(v).y)/Math.max(...e(se)().map(tt=>Math.abs(tt.y))));var ge=Lr();let xe;$((tt,gt)=>{x(ge,"x",e(J)),x(ge,"y",e(_e)),x(ge,"width",e(Se)),x(ge,"height",e(Se)),x(ge,"fill",`rgba(0, 102, 204, ${e(He)})`),x(ge,"stroke",tt),xe=Ae(ge,0,"heatmap-cell",null,xe,gt)},[()=>e(P).includes(e(v))?"#000":"none",()=>({hovered:e(de)===e(v),selected:e(P).includes(e(v)),animated:e(_)})]),o(j,ge)}),o(m,N)};F(w,m=>{e(Z)==="heatmap"&&m(c)},!0)}o(l,p)};F(we,l=>{e(Z)==="scatter"?l(O):l(s,!1)},!0)}o(E,V)};F(A,E=>{e(Z)==="bar"?E(h):E(y,!1)},!0)}o(i,k)};F(Ve,i=>{e(Z)==="line"&&e(se)().length>1?i(be):i(Fe,!1)})}t(W),t(et),It(et,i=>Q=i,()=>Q),t(Xe);var qe=n(Xe,2);{var Pe=i=>{var k=Ir(),A=a(k);Ft(A,()=>e(T).content),t(k),$(()=>Bt(k,`left: ${e(T).x??""}px; top: ${e(T).y??""}px;`)),o(i,k)};F(qe,i=>{e(T)&&i(Pe)})}t(Ce),It(Ce,i=>L=i,()=>L),$((i,k,A,h,y)=>{xt=Ae(pt,1,"control-btn svelte-1cogvj6",null,xt,i),z(ft,`Zoom: ${k??""}%`),x(et,"width",ce),x(et,"height",ue),wt=Ae(et,0,"chart-svg svelte-1cogvj6",null,wt,A),Bt(et,`transform: scale(${e(te)??""}) translate(${e(U).x??""}px, ${e(U).y??""}px);`),Bt(g,`stop-color:${e(he)[0]??""};stop-opacity:0.8`),Bt(oe,`stop-color:${e(he)[0]??""};stop-opacity:0.1`),x(K,"x",D.left),x(K,"y",D.top),x(K,"width",h),x(K,"height",y),x(W,"transform",`translate(${D.left??""}, ${D.top??""})`)},[()=>({active:e(_)}),()=>Math.round(e(te)*100),()=>({animated:e(_)}),()=>e(ne)(),()=>e(fe)()]),Et(st,()=>e(Me),i=>b(Me,i)),Ut("mouseleave",Xe,$e),Ut("wheel",Xe,Ee),o(C,Ce),jt()}Ct(["click","mousemove"]);var Fr=S('<div class="interactive-preview svelte-1feusqv"><h3 class="svelte-1feusqv">Interactive Preview</h3> <div class="preview-content svelte-1feusqv"><!></div></div>');function zn(C,r){Rt(r,!0);let d=G(()=>la.generatePreviewHtml(r.blocks));var u=Fr(),q=n(a(u),2),L=a(q);Ft(L,()=>e(d)),t(q),t(u),o(C,u),jt()}function Hr(C,r,d,u){if(!e(r))return;const q=window.getSelection();if(q&&q.toString().trim()){b(d,q.toString().trim(),!0);const Q=q.getRangeAt(0).startContainer.parentElement?.closest("[data-section-id]");Q&&b(u,Q.getAttribute("data-section-id"),!0)}}var Or=ct('<svg class="w-4 h-4 svelte-1i19rg8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" class="svelte-1i19rg8"></path></svg> TOC',1),Ur=ct('<svg class="w-4 h-4 svelte-1i19rg8" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" class="svelte-1i19rg8"></path></svg>'),Vr=ct('<svg class="w-4 h-4 svelte-1i19rg8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" class="svelte-1i19rg8"></path></svg>'),Kr=S('<div class="progress-container svelte-1i19rg8"><!> <span class="progress-text svelte-1i19rg8"> </span></div>'),Gr=(C,r,d)=>r(e(d)),Qr=ct('<svg class="bookmark-icon svelte-1i19rg8" fill="currentColor" viewBox="0 0 20 20"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" class="svelte-1i19rg8"></path></svg>'),Jr=(C,r,d)=>r(e(d)),Zr=S("<li><button> </button></li>"),Yr=S('<ul class="toc-sublist svelte-1i19rg8"></ul>'),Xr=S("<li><button> <!></button> <!></li>"),Wr=S('<h2 class="toc-title svelte-1i19rg8">Table of Contents</h2> <nav class="toc-nav svelte-1i19rg8" aria-label="Article navigation"><ul class="toc-list svelte-1i19rg8"></ul></nav>',1),en=S('<aside class="toc-sidebar svelte-1i19rg8"><!></aside>'),tn=ct('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="svelte-1i19rg8"></path></svg>'),an=ct('<svg class="w-3 h-3 svelte-1i19rg8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" class="svelte-1i19rg8"></path></svg>'),rn=S('<div class="annotation svelte-1i19rg8"><div class="annotation-content svelte-1i19rg8"> </div> <!></div>'),nn=S('<label class="quiz-option svelte-1i19rg8"><input type="radio" class="svelte-1i19rg8"/> </label>'),sn=S('<div class="quiz-options svelte-1i19rg8"></div>'),ln=S('<div class="quiz-question svelte-1i19rg8"><h4 class="svelte-1i19rg8"> </h4> <!></div>'),on=S('<div class="quiz-results svelte-1i19rg8"><h4 class="svelte-1i19rg8">Quiz Complete!</h4> <p class="svelte-1i19rg8"> </p> <!></div>'),vn=S('<h3 class="quiz-title svelte-1i19rg8"> </h3> <!>',1),cn=S('<div class="prose svelte-1i19rg8"><!></div>'),un=S('<div class="content-block svelte-1i19rg8"><!></div>'),dn=S('<div class="content-block svelte-1i19rg8"><div class="prose svelte-1i19rg8"><!></div></div>'),_n=S('<section class="subsection svelte-1i19rg8"><h3> </h3> <div class="subsection-content svelte-1i19rg8"></div></section>'),gn=S('<section class="content-section svelte-1i19rg8"><header class="section-header svelte-1i19rg8"><h2> <!></h2> <!></header> <div><!> <!></div></section>'),pn=(C,r,d)=>{C.key==="Enter"&&(C.ctrlKey||C.metaKey)&&r(e(d)||"",C.currentTarget.value)},fn=S('<h3 class="svelte-1i19rg8">Add Annotation</h3> <p class="selected-text svelte-1i19rg8"> </p> <textarea placeholder="Add your note..." rows="3" class="svelte-1i19rg8"></textarea> <div class="annotation-actions svelte-1i19rg8"><!> <!></div>',1),hn=S('<div class="annotation-modal svelte-1i19rg8"><!></div>'),mn=S('<div><header class="article-header svelte-1i19rg8"><div class="header-content svelte-1i19rg8"><h1 class="article-title svelte-1i19rg8"> </h1> <div class="article-meta svelte-1i19rg8"><span class="meta-item svelte-1i19rg8"> </span> <span class="meta-item svelte-1i19rg8"> </span></div></div> <div class="header-controls svelte-1i19rg8"><!> <!> <!></div></header> <!> <div class="article-layout svelte-1i19rg8"><!> <main class="article-main svelte-1i19rg8"><article class="article-content svelte-1i19rg8" role="main"></article></main></div> <!></div>');function An(C,r){Rt(r,!0);let d=Ue(r,"showToc",3,!0),u=Ue(r,"enableBookmarks",3,!0),q=Ue(r,"enableAnnotations",3,!0),L=Ue(r,"enableProgressTracking",3,!0),Q=Ue(r,"class",3,""),ee=re(0),te=re(0),U=re(ot([])),de=re(ot(new Map)),P=re(ot(new Set)),T=re(ot(new Map)),_=re(!1),Z=re(!1),ce=re(""),ue=re(null),D,ne=re(void 0),fe=[];const se=G(()=>r.document.structure.sections.length),Be=G(()=>r.document.structure.sections[e(ee)]);Yt(()=>(Ge(),$e(),Me(),()=>{pe()}));function Ge(){if(!D)return;const f=new IntersectionObserver(g=>{g.forEach(oe=>{if(oe.isIntersecting){const K=parseInt(oe.target.getAttribute("data-section-index")||"0");b(ee,K,!0),he()}})},{root:D,rootMargin:"-20% 0px -60% 0px",threshold:.1});return fe.forEach(g=>{g&&f.observe(g)}),()=>f.disconnect()}function Me(){function f(g){if(!(g.target instanceof HTMLInputElement||g.target instanceof HTMLTextAreaElement))switch(g.key){case"ArrowUp":case"k":g.preventDefault(),Ne(Math.max(0,e(ee)-1));break;case"ArrowDown":case"j":g.preventDefault(),Ne(Math.min(e(se)-1,e(ee)+1));break;case"t":g.preventDefault(),b(_,!e(_));break;case"b":(g.ctrlKey||g.metaKey)&&(g.preventDefault(),ke(e(Be)?.id||""));break;case"a":(g.ctrlKey||g.metaKey)&&(g.preventDefault(),b(Z,!e(Z)));break}}return r.document.addEventListener("keydown",f),()=>r.document.removeEventListener("keydown",f)}function he(){if(!L())return;const f=D?.scrollTop||0,g=D?.scrollHeight||1,oe=D?.clientHeight||1;b(te,Math.min(100,f/(g-oe)*100),!0)}function Ne(f){if(f<0||f>=e(se))return;const g=fe[f];g&&(g.scrollIntoView({behavior:"smooth",block:"start"}),b(ee,f,!0))}function Qe(f){const g=r.document.structure.sections.findIndex(oe=>oe.id===f.id);g>=0&&(Ne(g),b(_,!1))}function Je(f){e(P).has(f)?e(P).delete(f):e(P).add(f),b(P,new Set(e(P)),!0)}function ke(f){if(!u())return;const g=e(U).indexOf(f);g>=0?e(U).splice(g,1):e(U).push(f),b(U,[...e(U)],!0)}function B(f,g){!q()||!g.trim()||(e(de).set(f,g),b(de,new Map(e(de)),!0),b(Z,!1),b(ue,null))}function Y(f){e(de).delete(f),b(de,new Map(e(de)),!0)}function le(f,g){e(T).set(f,{questions:g,currentQuestion:0,answers:new Map,score:0,completed:!1}),b(T,new Map(e(T)),!0)}function me(f,g,oe){const K=e(T).get(f);if(K){if(K.answers.set(g,oe),K.answers.size===K.questions.length){let M=0;K.questions.forEach(H=>{K.answers.get(H.id)===H.correctAnswer&&M++}),K.score=M/K.questions.length*100,K.completed=!0}e(T).set(f,K),b(T,new Map(e(T)),!0)}}function $e(){try{const f=localStorage.getItem(`article-${r.document.id}`);if(f){const g=JSON.parse(f);b(U,g.bookmarks||[],!0),b(de,new Map(g.annotations||[]),!0),b(P,new Set(g.expandedSections||[]),!0),b(ee,g.currentSection||0,!0)}}catch(f){console.warn("Failed to load user data:",f)}}function pe(){try{const f={bookmarks:e(U),annotations:Array.from(e(de).entries()),expandedSections:Array.from(e(P)),currentSection:e(ee),lastRead:new Date().toISOString()};localStorage.setItem(`article-${r.document.id}`,JSON.stringify(f))}catch(f){console.warn("Failed to save user data:",f)}}function Ee(f,g){switch(f.type){case"text":return f.content;case"code":return`<pre><code class="language-${f.content.language||"text"}">${f.content.code}</code></pre>`;case"image":return`<img src="${f.content.url}" alt="${f.content.alt||""}" loading="lazy" />`;case"video":return`<video controls><source src="${f.content.url}" type="${f.content.type}" /></video>`;case"quiz":return"";default:return`<div class="unsupported-block">Unsupported block type: ${f.type}</div>`}}var De=mn(),nt=a(De),je=a(nt),ae=a(je),Ce=a(ae,!0);t(ae);var Ze=n(ae,2),Ye=a(Ze),Ke=a(Ye,!0);t(Ye);var Te=n(Ye,2),st=a(Te);t(Te),t(Ze),t(je);var bt=n(je,2),pt=a(bt);Tt(pt,{variant:"ghost",size:"sm",onclick:()=>b(_,!e(_)),"aria-label":"Toggle table of contents",get"aria-expanded"(){return e(_)},children:(f,g)=>{var oe=Or();Pt(),o(f,oe)},$$slots:{default:!0}});var xt=n(pt,2);{var Mt=f=>{{let g=G(()=>e(U).includes(e(Be)?.id||"")?"Remove bookmark":"Add bookmark"),oe=G(()=>e(U).includes(e(Be)?.id||"")?"text-yellow-600":"");Tt(f,{variant:"ghost",size:"sm",onclick:()=>ke(e(Be)?.id||""),get"aria-label"(){return e(g)},get class(){return e(oe)},children:(K,M)=>{var H=Ur();$(X=>x(H,"fill",X),[()=>e(U).includes(e(Be)?.id||"")?"currentColor":"none"]),o(K,H)},$$slots:{default:!0}})}};F(xt,f=>{u()&&f(Mt)})}var _t=n(xt,2);{var zt=f=>{{let g=G(()=>e(Z)?"bg-blue-100 text-blue-700":"");Tt(f,{variant:"ghost",size:"sm",onclick:()=>b(Z,!e(Z)),"aria-label":"Toggle annotation mode",get"aria-pressed"(){return e(Z)},get class(){return e(g)},children:(oe,K)=>{var M=Vr();o(oe,M)},$$slots:{default:!0}})}};F(_t,f=>{q()&&f(zt)})}t(bt),t(nt);var $t=n(nt,2);{var yt=f=>{var g=Kr(),oe=a(g);Qt(oe,{get value(){return e(te)},size:"sm",variant:"default",showLabel:!1,animated:!0});var K=n(oe,2),M=a(K);t(K),t(g),$(()=>z(M,`Section ${e(ee)+1} of ${e(se)??""}`)),o(f,g)};F($t,f=>{L()&&f(yt)})}var ft=n($t,2),ht=a(ft);{var kt=f=>{var g=en(),oe=a(g);Ht(oe,{class:"toc-card",children:(K,M)=>{var H=Wr(),X=n(Re(H),2),W=a(X);ve(W,21,()=>r.document.structure.toc.entries,dt,(Ve,be)=>{var Fe=Xr(),qe=a(Fe);let Pe;qe.__click=[Gr,Qe,be];var i=a(qe),k=n(i);{var A=E=>{var V=Qr();o(E,V)};F(k,E=>{e(U).includes(e(be).id)&&E(A)})}t(qe);var h=n(qe,2);{var y=E=>{var V=Yr();ve(V,21,()=>e(be).children,dt,(we,O)=>{var s=Zr(),l=a(s);let p;l.__click=[Jr,Qe,O];var w=a(l,!0);t(l),t(s),$(c=>{Ae(s,1,`toc-item level-${e(O).level??""}`,"svelte-1i19rg8"),p=Ae(l,1,"toc-link svelte-1i19rg8",null,p,c),z(w,e(O).title)},[()=>({active:e(Be)?.id===e(O).id})]),o(we,s)}),t(V),o(E,V)};F(h,E=>{e(be).children.length>0&&E(y)})}t(Fe),$(E=>{Ae(Fe,1,`toc-item level-${e(be).level??""}`,"svelte-1i19rg8"),Pe=Ae(qe,1,"toc-link svelte-1i19rg8",null,Pe,E),z(i,`${e(be).title??""} `)},[()=>({active:e(Be)?.id===e(be).id})]),o(Ve,Fe)}),t(W),t(X),o(K,H)},$$slots:{default:!0}}),t(g),It(g,K=>b(ne,K),()=>e(ne)),o(f,g)};F(ht,f=>{d()&&e(_)&&f(kt)})}var Xe=n(ht,2),et=a(Xe);et.__mouseup=[Hr,Z,ce,ue],ve(et,21,()=>r.document.structure.sections,dt,(f,g,oe)=>{var K=gn();x(K,"data-section-index",oe);var M=a(K),H=a(M),X=a(H),W=n(X);{var Ve=h=>{{let y=G(()=>e(P).has(e(g).id)?"Collapse section":"Expand section"),E=G(()=>e(P).has(e(g).id));Tt(h,{variant:"ghost",size:"xs",onclick:()=>Je(e(g).id),get"aria-label"(){return e(y)},get"aria-expanded"(){return e(E)},children:(V,we)=>{var O=tn();let s;$(l=>s=Ae(O,0,"w-3 h-3 transition-transform svelte-1i19rg8",null,s,l),[()=>({"rotate-90":e(P).has(e(g).id)})]),o(V,O)},$$slots:{default:!0}})}};F(W,h=>{e(g).subsections.length>0&&h(Ve)})}t(H);var be=n(H,2);{var Fe=h=>{var y=rn(),E=a(y),V=a(E,!0);t(E);var we=n(E,2);Tt(we,{variant:"ghost",size:"xs",onclick:()=>Y(e(g).id),"aria-label":"Remove annotation",children:(O,s)=>{var l=an();o(O,l)},$$slots:{default:!0}}),t(y),$(O=>z(V,O),[()=>e(de).get(e(g).id)]),o(h,y)};F(be,h=>{e(de).has(e(g).id)&&h(Fe)})}t(M);var qe=n(M,2);let Pe;var i=a(qe);ve(i,17,()=>e(g).content,dt,(h,y)=>{var E=un(),V=a(E);{var we=s=>{Ht(s,{class:"quiz-card",children:(l,p)=>{var w=vn(),c=Re(w),m=a(c);t(c);var N=n(c,2);{var R=v=>{Tt(v,{onclick:()=>le(e(y).id,e(y).content.questions),children:(I,J)=>{Pt();var _e=Dt("Start Quiz");o(I,_e)},$$slots:{default:!0}})},j=v=>{const I=G(()=>e(T).get(e(y).id));var J=rt(),_e=Re(J);{var Se=ge=>{const xe=G(()=>e(I).questions[e(I).currentQuestion]);var tt=ln(),gt=a(tt),lt=a(gt,!0);t(gt);var Le=n(gt,2);{var ut=We=>{var at=sn();ve(at,21,()=>e(xe).options||[],dt,(it,At,Nt)=>{var ie=nn(),ye=a(ie);mt(ye),Ot(ye,Nt),ye.__change=()=>me(e(y).id,e(xe).id,Nt);var ze=n(ye);t(ie),$(()=>{x(ye,"name",`quiz-${e(y).id??""}-${e(xe).id??""}`),z(ze,` ${e(At)??""}`)}),o(it,ie)}),t(at),o(We,at)};F(Le,We=>{e(xe).type==="multiple-choice"&&We(ut)})}t(tt),$(()=>z(lt,e(xe).question)),o(ge,tt)},He=ge=>{var xe=rt(),tt=Re(xe);{var gt=lt=>{var Le=on(),ut=n(a(Le),2),We=a(ut);t(ut);var at=n(ut,2);{let it=G(()=>e(I).score>=70?"success":"warning");Qt(at,{get value(){return e(I).score},get variant(){return e(it)}})}t(Le),$(it=>z(We,`Score: ${it??""}%`),[()=>Math.round(e(I).score)]),o(lt,Le)};F(tt,lt=>{e(I)?.completed&&lt(gt)},!0)}o(ge,xe)};F(_e,ge=>{e(I)&&!e(I).completed?ge(Se):ge(He,!1)})}o(v,J)};F(N,v=>{e(T).has(e(y).id)?v(j,!1):v(R)})}$(()=>z(m,`Quiz: ${e(y).content.title||"Knowledge Check"}`)),o(l,w)},$$slots:{default:!0}})},O=s=>{var l=cn(),p=a(l);Ft(p,()=>Ee(e(y),e(g).id)),t(l),o(s,l)};F(V,s=>{e(y).type==="quiz"?s(we):s(O,!1)})}t(E),$(()=>x(E,"data-block-id",e(y).id)),o(h,E)});var k=n(i,2);{var A=h=>{var y=rt(),E=Re(y);ve(E,17,()=>e(g).subsections,dt,(V,we)=>{var O=_n(),s=a(O),l=a(s,!0);t(s);var p=n(s,2);ve(p,21,()=>e(we).content,dt,(w,c)=>{var m=dn(),N=a(m),R=a(N);Ft(R,()=>Ee(e(c),e(we).id)),t(N),t(m),o(w,m)}),t(p),t(O),$(()=>{x(O,"data-section-id",e(we).id),Ae(s,1,`subsection-title level-${e(we).level??""}`,"svelte-1i19rg8"),z(l,e(we).title)}),o(V,O)}),o(h,y)};F(k,h=>{e(g).subsections.length>0&&e(P).has(e(g).id)&&h(A)})}t(qe),t(K),It(K,(h,y)=>fe[y]=h,h=>fe?.[h],()=>[oe]),$(h=>{x(K,"data-section-id",e(g).id),Ae(H,1,`section-title level-${e(g).level??""}`,"svelte-1i19rg8"),z(X,`${e(g).title??""} `),Pe=Ae(qe,1,"section-content svelte-1i19rg8",null,Pe,h)},[()=>({collapsed:!e(P).has(e(g).id)&&e(g).subsections.length>0})]),o(f,K)}),t(et),t(Xe),It(Xe,f=>D=f,()=>D),t(ft);var wt=n(ft,2);{var St=f=>{var g=hn(),oe=a(g);Ht(oe,{class:"annotation-form",children:(K,M)=>{var H=fn(),X=n(Re(H),2),W=a(X);t(X);var Ve=n(X,2);Ve.__keydown=[pn,B,ue];var be=n(Ve,2),Fe=a(be);Tt(Fe,{size:"sm",onclick:Pe=>{const i=Pe.currentTarget.parentElement?.previousElementSibling;B(e(ue)||"",i?.value||"")},children:(Pe,i)=>{Pt();var k=Dt("Save");o(Pe,k)},$$slots:{default:!0}});var qe=n(Fe,2);Tt(qe,{variant:"ghost",size:"sm",onclick:()=>{b(ue,null),b(ce,"")},children:(Pe,i)=>{Pt();var k=Dt("Cancel");o(Pe,k)},$$slots:{default:!0}}),t(be),$(()=>z(W,`"${e(ce)??""}"`)),o(K,H)},$$slots:{default:!0}}),t(g),o(f,g)};F(wt,f=>{e(Z)&&e(ce)&&e(ue)&&f(St)})}t(De),$(f=>{Ae(De,1,`interactive-article-viewer ${Q()??""}`,"svelte-1i19rg8"),z(Ce,r.document.title),z(Ke,r.document.metadata.pageCount?`${r.document.metadata.pageCount} pages`:""),z(st,`${f??""} min read`)},[()=>Math.ceil(r.document.metadata.extractedText/200)]),Ut("scroll",Xe,he),o(C,De),jt()}Ct(["click","mouseup","change","keydown"]);export{$n as A,wn as D,An as I,Sn as N,Mn as S,zn as a};
