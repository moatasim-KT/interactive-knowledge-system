import{d as re,p as de,s as N,b as ve,M as oe,f as O,e as E,h as n,k as A,t as u,n as o,o as ce,i,g as e,x as ue,q as c,r,C as pe,w as p,D as f,c as $}from"./d1NyGob4.js";import"./DG3UZo5P.js";import{o as g}from"./BoPf8oN2.js";import{C as fe,b,B as j}from"./D-faybVX.js";import"./DsZ6whlC.js";var _e=(U,S)=>E(S,!e(S)),$e=O('<div class="detail-item svelte-dal0p1"><span class="label svelte-dal0p1">Last Sync:</span> <span class="value svelte-dal0p1"> </span></div>'),ge=O('<div class="detail-item svelte-dal0p1"><span class="label svelte-dal0p1">Connection:</span> <span class="value svelte-dal0p1"> </span></div>'),Se=O('<div class="detail-grid svelte-dal0p1"><div class="detail-item svelte-dal0p1"><span class="label svelte-dal0p1">Status:</span> <!></div> <div class="detail-item svelte-dal0p1"><span class="label svelte-dal0p1">Storage:</span> <!></div> <div class="detail-item svelte-dal0p1"><span class="label svelte-dal0p1">Queue Size:</span> <!></div> <div class="detail-item svelte-dal0p1"><span class="label svelte-dal0p1">Pending Updates:</span> <!></div> <!> <!></div> <div class="actions svelte-dal0p1"><!> <!></div>',1),me=O('<div class="offline-status-indicator svelte-dal0p1"><div class="status-badge svelte-dal0p1"><div></div> <span class="status-text svelte-dal0p1"> </span> <span class="toggle-icon svelte-dal0p1"> </span></div> <!></div>');function ke(U,S){de(S,!0);let a=N(ve({isOnline:!0,isInitialized:!1,queueSize:0,pendingUpdates:0,lastSync:null,storageAvailable:!1,networkStatus:{isOnline:!0}})),y=N(!1),x;oe(()=>(G(),x=setInterval(_,5e3),_(),()=>{x&&clearInterval(x)}));async function G(){try{await g.initialize({enableAutoSync:!0,syncInterval:3e4,enableOptimisticUpdates:!0,enableOfflineQueue:!0,enableNetworkDetection:!0}),_()}catch(v){console.error("Failed to initialize offline functionality:",v)}}function _(){g.isAvailable()&&E(a,g.getStatus(),!0)}async function H(){try{await g.forceSync(),_()}catch(v){console.error("Force sync failed:",v)}}async function J(){try{await g.clearOfflineData(),_()}catch(v){console.error("Clear offline data failed:",v)}}function K(){return e(a).isInitialized?e(a).isOnline?e(a).queueSize>0?`Online (${e(a).queueSize} pending)`:"Online":"Offline":"Initializing..."}var h=me(),m=n(h);m.__click=[_e,y];var D=n(m);let F;var z=i(D,2),R=n(z,!0);r(z);var T=i(z,2),V=n(T,!0);r(T),r(m);var W=i(m,2);{var X=v=>{fe(v,{class:"status-details",padding:"md",children:(k,be)=>{var B=Se(),w=pe(B),I=n(w),Y=i(n(I),2);{let t=$(()=>e(a).isOnline?"success":"error");b(Y,{get variant(){return e(t)},children:(s,d)=>{p();var l=f();u(()=>c(l,e(a).isOnline?"Online":"Offline")),o(s,l)},$$slots:{default:!0}})}r(I);var P=i(I,2),Z=i(n(P),2);{let t=$(()=>e(a).storageAvailable?"success":"error");b(Z,{get variant(){return e(t)},children:(s,d)=>{p();var l=f();u(()=>c(l,e(a).storageAvailable?"Available":"Unavailable")),o(s,l)},$$slots:{default:!0}})}r(P);var C=i(P,2),ee=i(n(C),2);{let t=$(()=>e(a).queueSize>0?"warning":"default");b(ee,{get variant(){return e(t)},children:(s,d)=>{p();var l=f();u(()=>c(l,e(a).queueSize)),o(s,l)},$$slots:{default:!0}})}r(C);var q=i(C,2),ae=i(n(q),2);{let t=$(()=>e(a).pendingUpdates>0?"warning":"default");b(ae,{get variant(){return e(t)},children:(s,d)=>{p();var l=f();u(()=>c(l,e(a).pendingUpdates)),o(s,l)},$$slots:{default:!0}})}r(q);var M=i(q,2);{var te=t=>{var s=$e(),d=i(n(s),2),l=n(d,!0);r(d),r(s),u(ne=>c(l,ne),[()=>e(a).lastSync.toLocaleTimeString()]),o(t,s)};A(M,t=>{e(a).lastSync&&t(te)})}var se=i(M,2);{var le=t=>{var s=ge(),d=i(n(s),2),l=n(d,!0);r(d),r(s),u(()=>c(l,e(a).networkStatus.effectiveType)),o(t,s)};A(se,t=>{e(a).networkStatus.effectiveType&&t(le)})}r(w);var L=i(w,2),Q=n(L);{let t=$(()=>!e(a).isOnline);j(Q,{variant:"outline",size:"sm",onclick:H,get disabled(){return e(t)},children:(s,d)=>{p();var l=f("Force Sync");o(s,l)},$$slots:{default:!0}})}var ie=i(Q,2);j(ie,{variant:"outline",size:"sm",onclick:J,children:(t,s)=>{p();var d=f("Clear Offline Data");o(t,d)},$$slots:{default:!0}}),r(L),o(k,B)},$$slots:{default:!0}})};A(W,v=>{e(y)&&v(X)})}r(h),u((v,k)=>{F=ue(D,1,"status-dot svelte-dal0p1",null,F,v),c(R,k),c(V,e(y)?"▼":"▶")},[()=>({online:e(a).isOnline,offline:!e(a).isOnline}),K]),o(U,h),ce()}re(["click"]);export{ke as O};
