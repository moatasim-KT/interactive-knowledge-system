import{d as S,k as U,l as W,p as k,c as h,a,f as N,s as F,m as g}from"./vendor.js";import{p as R,i as q}from"./services.js";import{e as b}from"./utils.js";import{I as D,B as z,L as C,C as H,a as B}from"./components-ui.js";/* empty css                                                   */import"@sveltejs/kit/internal";import"./components-knowledge.js";import"./components-interactive.js";import"idb";import{E as M}from"./ErrorBoundary.js";import"clsx";import{webContentActions as v}from"./webContentState.svelte.js";function tt(i,f){S();let{allowBatchImport:p=!0,onImportSuccess:x,onImportError:m}=f,u="",c="",s=!1,o=null,t={total:0,completed:0,failed:0,overallProgress:0,currentStage:"Idle"},n=null,w=!1,_=!1;async function E(){if(o=null,!u.trim()){o="URL cannot be empty.";return}if(!A(u)){o="Invalid URL format.";return}s=!0,t={total:1,completed:0,failed:0,overallProgress:0,currentStage:"Starting"};const l=await b.handleAsync(()=>R.startProcessing([u],{skipProcessing:w,enableAiEnhancements:_}),{operation:"single-import",component:"WebContentImporter",metadata:{url:u}},{showToast:!0,retryable:!0,maxRetries:2,onError:e=>{o=b.getUserFriendlyMessage(e,{operation:"single-import",component:"WebContentImporter"}),m?.(o)}});l.success&&(n=l.data.id),s=!1}async function L(){o=null;const l=c.split(`
`).map(r=>r.trim()).filter(r=>r&&A(r));if(l.length===0){o="No valid URLs found for batch import.";return}s=!0,t={total:l.length,completed:0,failed:0,overallProgress:0,currentStage:"Starting Batch"};const e=await b.handleAsync(()=>R.startBatchProcessing(l,{skipProcessing:w,enableAiEnhancements:_}),{operation:"batch-import",component:"WebContentImporter",metadata:{urlCount:l.length}},{showToast:!0,retryable:!0,maxRetries:1,onError:r=>{o=b.getUserFriendlyMessage(r,{operation:"batch-import",component:"WebContentImporter"}),m?.(o)}});e.success&&(n=e.data.id),s=!1}function A(l){try{return new URL(l),!0}catch{return!1}}let I=!0,T;function P(l){M(l,{context:{},showDetails:!1,enableRetry:!0,children:e=>{if(e.out.push('<div class="web-content-importer svelte-whuurx"><div class="importer-section svelte-whuurx"><h3 class="section-title svelte-whuurx">Import Web Content</h3> <div class="url-input-section svelte-whuurx"><label for="single-url" class="svelte-whuurx">Import Single URL:</label> <div class="url-input-container svelte-whuurx">'),D(e,{id:"single-url",type:"url",placeholder:"Enter URL to import (e.g., https://example.com/article)",disabled:s,class:"flex-1",get value(){return u},set value(r){u=r,I=!1}}),e.out.push("<!----> "),z(e,{onclick:E,disabled:s||!u.trim(),children:r=>{s&&t.total===1?(r.out.push("<!--[-->"),C(r,{size:"sm",class:"mr-2"}),r.out.push("<!----> Importing...")):(r.out.push("<!--[!-->"),r.out.push("Import")),r.out.push("<!--]-->")},$$slots:{default:!0}}),e.out.push("<!----></div></div> "),p){e.out.push("<!--[-->"),e.out.push(`<div class="divider svelte-whuurx">OR</div> <div class="batch-input-section svelte-whuurx"><label for="batch-urls" class="svelte-whuurx">Batch Import URLs (one per line):</label> <textarea id="batch-urls" placeholder="Enter multiple URLs, one per line" rows="8"${h("disabled",s,!0)} class="svelte-whuurx">`);const r=a(c);r&&e.out.push(`${r}`),e.out.push("</textarea> "),z(e,{onclick:L,disabled:s||!c.trim(),children:d=>{s&&n?(d.out.push("<!--[-->"),C(d,{size:"sm",class:"mr-2"}),d.out.push("<!----> Batch Importing...")):(d.out.push("<!--[!-->"),d.out.push("Batch Import")),d.out.push("<!--]-->")},$$slots:{default:!0}}),e.out.push("<!----></div>")}else e.out.push("<!--[!-->");e.out.push(`<!--]--> <div class="import-options svelte-whuurx"><h3 class="svelte-whuurx">Import Options</h3> <div class="options-grid svelte-whuurx"><label class="option-item"><input type="checkbox"${h("checked",w,!0)}${h("disabled",s,!0)}/> <span>Skip advanced processing (faster import)</span></label> <label class="option-item"><input type="checkbox"${h("checked",_,!0)}${h("disabled",s,!0)}/> <span>Enable AI content enhancements</span></label></div></div> `),s||t.completed>0||t.failed>0?(e.out.push("<!--[-->"),e.out.push(`<div class="import-progress svelte-whuurx"><h3>Import Progress</h3> <div class="progress-bar svelte-whuurx"><div class="progress-fill svelte-whuurx"${N(`width: ${F(t.overallProgress)}%;`)}></div></div> <p class="progress-status svelte-whuurx">${a(t.currentStage)} (${a(t.completed)} / ${a(t.total)} completed, ${a(t.failed)} failed)</p> <div class="progress-stats svelte-whuurx"><span class="stat success svelte-whuurx">Success: ${a(t.completed)}</span> <span class="stat error svelte-whuurx">Failed: ${a(t.failed)}</span> <span class="stat svelte-whuurx">Total: ${a(t.total)}</span></div></div>`)):e.out.push("<!--[!-->"),e.out.push("<!--]--> "),o?(e.out.push("<!--[-->"),e.out.push(`<div class="error-message svelte-whuurx">‚ö†Ô∏è ${a(o)}</div>`)):e.out.push("<!--[!-->"),e.out.push("<!--]--></div></div>")}})}do I=!0,T=U(i),P(T);while(!I);W(i,T),k()}function et(i,f){S();let{contentId:p,autoAnalyze:x=!1}=f;i.out.push('<div class="web-content-analyzer svelte-d883hr"><div class="analyzer-header svelte-d883hr"><h2 class="svelte-d883hr">Content Analysis &amp; Transformation</h2> '),i.out.push("<!--[!-->"),i.out.push('<p class="svelte-d883hr">Select content to analyze for interactive opportunities</p>'),i.out.push("<!--]--></div> "),i.out.push("<!--[!-->"),i.out.push('<div class="no-content-selected svelte-d883hr"><div class="empty-state svelte-d883hr"><span class="empty-icon svelte-d883hr">üîç</span> <h3 class="svelte-d883hr">No Content Selected</h3> <p class="svelte-d883hr">Select content from your imported sources to analyze for interactive opportunities.</p></div></div>'),i.out.push("<!--]--></div>"),k()}function st(i,f){S();let{contentId:p,defaultType:x="auto",domain:m=""}=f,u=x,c=!1,s=null;async function o(){if(!p){v.addNotification({type:"warning",message:"No content selected"});return}c=!0,v.setTransformationAnalyzing(!0);const t=await b.handleAsync(()=>q.transform(String(p),{type:u,domain:m}),{operation:"transform",component:"WebContentTransformer",metadata:{contentId:p,selected_type:u,domain:m}},{showToast:!0,retryable:!0,maxRetries:1});t.success&&t.data&&(s=t.data,v.setCurrentTransformation(t.data),v.addTransformationToHistory(t.data),v.addNotification({type:"success",message:`Transformed (${u}) successfully`})),c=!1,v.setTransformationAnalyzing(!1)}H(i,{class:"transformer",variant:"outlined",children:t=>{t.out.push(`<div class="header svelte-ugxg1i"><h3>Transform Content</h3> <div class="controls svelte-ugxg1i"><select${h("disabled",c,!0)} class="svelte-ugxg1i">`),t.select_value=u,t.out.push(`<option value="auto"${g(t,"auto")}>Auto</option><option value="visualization"${g(t,"visualization")}>Visualization</option><option value="simulation"${g(t,"simulation")}>Simulation</option><option value="chart"${g(t,"chart")}>Chart</option><option value="quiz"${g(t,"quiz")}>Quiz</option>`),t.select_value=void 0,t.out.push(`</select> <input type="text" placeholder="Domain (optional)"${h("value",m)}${h("disabled",c,!0)} class="svelte-ugxg1i"/> `),z(t,{onclick:o,disabled:c||!p,children:n=>{c?(n.out.push("<!--[-->"),C(n,{size:"sm",class:"mr-2"}),n.out.push("<!----> Transforming...")):(n.out.push("<!--[!-->"),n.out.push("Run Transformation")),n.out.push("<!--]-->")},$$slots:{default:!0}}),t.out.push("<!----></div></div> "),s?(t.out.push("<!--[-->"),t.out.push('<div class="result"><div class="stats svelte-ugxg1i">'),B(t,{variant:"secondary",children:n=>{n.out.push(`<!---->Blocks: ${a(s.interactiveBlocks?.length||0)}`)},$$slots:{default:!0}}),t.out.push("<!----> "),B(t,{variant:"secondary",children:n=>{n.out.push(`<!---->Type: ${a(s.metadata?.transformationType)}`)},$$slots:{default:!0}}),t.out.push("<!----></div></div>")):t.out.push("<!--[!-->"),t.out.push("<!--]-->")},$$slots:{default:!0}}),k()}export{tt as W,et as a,st as b};
