import{p as V,d as j,a as s,b as W,c as I,s as P,e as y,k as E,l as K,n as k}from"../../chunks/vendor.js";import{a as b,b as r,g as F,c as H}from"../../chunks/components-knowledge.js";import"clsx";import{R as L}from"../../chunks/ResponsiveLayout.js";import{G as Q}from"../../chunks/Grid.js";import{R as G,C as f,P as B,B as g,I as q,T as D,a as T,b as U}from"../../chunks/components-ui.js";import"../../chunks/utils.js";/* empty css                                                              */import"../../chunks/components-interactive.js";import{s as N}from"../../chunks/services.js";import"idb";import{E as M}from"../../chunks/ErrorBoundary.js";function J(i,z){j(),V()}function X(i,z){j();let u=N.getSyncStatus(),m=N.getOfflineStats();function c(d){if(!d)return"Never";const h=new Date().getTime()-d.getTime(),v=Math.floor(h/6e4),x=Math.floor(v/60),o=Math.floor(x/24);return o>0?`${o}d ago`:x>0?`${x}h ago`:v>0?`${v}m ago`:"Just now"}function _(){return u.networkStatus.isOnline?u.isSyncing?"text-blue-600":u.queueSize>0?"text-yellow-600":"text-green-600":"text-red-600"}function O(){return u.networkStatus.isOnline?u.isSyncing?"ğŸ”„":u.queueSize>0?"â³":"âœ…":"ğŸ”´"}function S(){return u.networkStatus.isOnline?u.isSyncing?"Syncing...":u.queueSize>0?`${u.queueSize} pending`:"Up to date":"Offline"}if(i.out.push(`<div class="sync-status svelte-mu12xm"><div class="sync-header svelte-mu12xm"><div class="status-indicator svelte-mu12xm"><span class="status-icon svelte-mu12xm">${s(O())}</span> <span${W(`status-text ${P(_())}`,"svelte-mu12xm")}>${s(S())}</span></div> <div class="sync-actions svelte-mu12xm"><button class="sync-button svelte-mu12xm"${I("disabled",!u.canSync,!0)} title="Sync now">ğŸ”„ Sync</button></div></div> <div class="sync-details svelte-mu12xm"><div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Network:</span> <span class="detail-value svelte-mu12xm">${s(u.networkStatus.isOnline?"Online":"Offline")} `),u.networkStatus.connectionType?(i.out.push("<!--[-->"),i.out.push(`(${s(u.networkStatus.connectionType)})`)):i.out.push("<!--[!-->"),i.out.push(`<!--]--></span></div> <div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Last sync:</span> <span class="detail-value svelte-mu12xm">${s(c(u.lastSync))}</span></div> `),u.queueSize>0?(i.out.push("<!--[-->"),i.out.push(`<div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Queue:</span> <span class="detail-value svelte-mu12xm">${s(u.queueSize)} operations</span></div>`)):i.out.push("<!--[!-->"),i.out.push("<!--]--> "),u.pendingOptimisticUpdates>0?(i.out.push("<!--[-->"),i.out.push(`<div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Pending:</span> <span class="detail-value svelte-mu12xm">${s(u.pendingOptimisticUpdates)} optimistic updates</span></div>`)):i.out.push("<!--[!-->"),i.out.push("<!--]--></div> "),m.total>0){i.out.push("<!--[-->");const d=y(Object.entries(m.byType));i.out.push(`<div class="offline-stats svelte-mu12xm"><h4 class="svelte-mu12xm">Offline Queue</h4> <div class="stats-grid svelte-mu12xm"><div class="stat-item svelte-mu12xm"><span class="stat-label svelte-mu12xm">Total:</span> <span class="stat-value svelte-mu12xm">${s(m.total)}</span></div> <!--[-->`);for(let w=0,h=d.length;w<h;w++){let[v,x]=d[w];i.out.push(`<div class="stat-item svelte-mu12xm"><span class="stat-label svelte-mu12xm">${s(v)}:</span> <span class="stat-value svelte-mu12xm">${s(x)}</span></div>`)}i.out.push("<!--]--></div> "),m.oldestOperation?(i.out.push("<!--[-->"),i.out.push(`<div class="detail-row svelte-mu12xm"><span class="detail-label svelte-mu12xm">Oldest:</span> <span class="detail-value svelte-mu12xm">${s(c(m.oldestOperation))}</span></div>`)):i.out.push("<!--[!-->"),i.out.push('<!--]--> <button class="clear-button svelte-mu12xm" title="Clear offline data">ğŸ—‘ï¸ Clear Offline Data</button></div>')}else i.out.push("<!--[!-->");i.out.push("<!--]--></div>"),V()}function ce(i,z){j();let{children:u}=z;const m=()=>H(),c=()=>F();N.initialize();const _={id:"sample-1",title:"Introduction to TypeScript",type:"module",metadata:{difficulty:2,estimatedTime:30,prerequisites:[],tags:["typescript","programming","basics"]},progress:{completed:!1,lastAccessed:new Date}};b.addKnowledgeNode(_);const O={id:"ml-fundamentals",title:"Machine Learning Fundamentals",type:"module",metadata:{difficulty:3,estimatedTime:45,prerequisites:["basic-math","programming-basics"],tags:["machine-learning","ai","neural-networks","data-science","interactive"]},progress:{completed:!1,lastAccessed:new Date}};b.addKnowledgeNode(O);let S=!0,d="";function w(){const o=document.documentElement,C=o.getAttribute("data-theme")==="dark"?"light":"dark";o.setAttribute("data-theme",C),localStorage.setItem("theme",C)}if(typeof window<"u"){const o=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",o)}let h=!0,v;function x(o){M(o,{children:A=>{L(A,{get sidebarOpen(){return S},set sidebarOpen(t){S=t,h=!1},header:function(t){t.out.push('<div class="flex items-center justify-between p-4"><div class="flex items-center gap-4"><h1 class="text-xl font-bold text-text-primary">Interactive Knowledge System</h1></div> <div class="flex items-center gap-4"><div class="hidden md:block">'),q(t,{type:"search",placeholder:"Search knowledge base...",size:"sm",class:"w-64",get value(){return d},set value(l){d=l,h=!1}}),t.out.push('<!----></div> <div class="flex items-center gap-3">'),D(t,{content:r.sync.isOnline?"Connected to server":"Working offline",children:l=>{T(l,{variant:r.sync.isOnline?"success":"error",size:"sm",class:"animate-fade-in",children:e=>{e.out.push(`<div${W("w-2 h-2 rounded-full mr-1",void 0,{"bg-success-500":r.sync.isOnline,"bg-error-500":!r.sync.isOnline})}></div> ${s(r.sync.isOnline?"Online":"Offline")}`)},$$slots:{default:!0}})},$$slots:{default:!0}}),t.out.push("<!----> "),r.sync.isSyncing?(t.out.push("<!--[-->"),T(t,{variant:"primary",size:"sm",class:"animate-pulse",children:l=>{l.out.push('<div class="w-3 h-3 mr-1 animate-spin"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path></svg></div> Syncing')},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push("<!--]--></div> "),D(t,{content:"Toggle theme",children:l=>{g(l,{variant:"ghost",size:"sm",onclick:w,class:"hover:scale-105 transition-transform",children:e=>{e.out.push('<svg class="w-4 h-4 transition-transform duration-300" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg>')},$$slots:{default:!0}})},$$slots:{default:!0}}),t.out.push("<!----></div></div>")},sidebar:function(t){const l=y(m().slice(0,8));t.out.push('<div class="flex flex-col h-full"><div class="p-4 border-b border-border md:hidden">'),q(t,{type:"search",placeholder:"Search...",size:"sm",get value(){return d},set value(e){d=e,h=!1}}),t.out.push('<!----></div> <nav class="p-4 border-b border-border"><h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wide mb-3">Navigation</h3> <div class="space-y-1">'),g(t,{variant:r.ui.currentView==="dashboard"?"primary":"ghost",size:"sm",fullWidth:!0,onclick:()=>b.setCurrentView("dashboard"),class:"justify-start",children:e=>{e.out.push("<!---->ğŸ“Š Dashboard")},$$slots:{default:!0}}),t.out.push("<!----> "),g(t,{variant:r.ui.currentView==="content"?"primary":"ghost",size:"sm",fullWidth:!0,onclick:()=>b.setCurrentView("content"),class:"justify-start",children:e=>{e.out.push("<!---->ğŸ“š Content")},$$slots:{default:!0}}),t.out.push("<!----> "),g(t,{variant:r.ui.currentView==="progress"?"primary":"ghost",size:"sm",fullWidth:!0,onclick:()=>b.setCurrentView("progress"),class:"justify-start",children:e=>{e.out.push("<!---->ğŸ“ˆ Progress")},$$slots:{default:!0}}),t.out.push('<!----></div></nav> <div class="p-4 border-b border-border">'),X(t),t.out.push('<!----></div> <div class="flex-1 p-4 overflow-y-auto"><h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wide mb-3">Quick Access</h3> '),g(t,{variant:"ghost",size:"sm",fullWidth:!0,onclick:()=>k(),class:"justify-start mb-2",children:e=>{e.out.push("<!---->ğŸ  Knowledge Base")},$$slots:{default:!0}}),t.out.push('<!----> <div class="space-y-1"><!--[-->');for(let e=0,a=l.length;e<a;e++){let n=l[e];f(t,{interactive:!0,padding:"sm",class:"text-sm animate-slide-in-left transition-all hover:scale-[1.02] hover:-translate-y-0.5 group",onclick:()=>{b.setCurrentNode(n),k(`/knowledge/${n.id}`),window.innerWidth<1024&&(S=!1)},children:p=>{p.out.push(`<div class="flex items-center justify-between"><div class="flex items-center gap-2 min-w-0"><span class="text-base transition-transform group-hover:scale-110">${s(n.type==="folder"?"ğŸ“":n.type==="module"?"ğŸ“š":"ğŸ“„")}</span> <span class="truncate font-medium">${s(n.title)}</span></div> <div class="flex items-center gap-2">`),n.progress?.completed?(p.out.push("<!--[-->"),T(p,{variant:"success",size:"sm",class:"animate-scale-in",children:R=>{R.out.push("<!---->âœ“")},$$slots:{default:!0}})):(p.out.push("<!--[!-->"),n.progress?.score?(p.out.push("<!--[-->"),B(p,{value:n.progress.score,size:"sm",class:"w-12",variant:"default"})):p.out.push("<!--[!-->"),p.out.push("<!--]-->")),p.out.push("<!--]--></div></div>")},$$slots:{default:!0}})}t.out.push("<!--]--></div> "),m().length>8?(t.out.push("<!--[-->"),g(t,{variant:"outline",size:"sm",fullWidth:!0,onclick:()=>k(),class:"mt-3",children:e=>{e.out.push(`<!---->View All (${s(m().length-8)} more)`)},$$slots:{default:!0}})):t.out.push("<!--[!-->"),t.out.push("<!--]--></div></div>")},children:t=>{J(),t.out.push("<!---->  "),G(t,{maxWidth:"full",padding:"md",class:"mobile:px-3",children:l=>{M(l,{children:e=>{r.ui.currentView==="dashboard"?(e.out.push("<!--[-->"),e.out.push('<div class="space-y-6"><div class="flex items-center justify-between"><h2 class="text-2xl font-bold text-text-primary">Dashboard</h2></div> '),Q(e,{cols:{mobile:1,sm:2,lg:4},gap:{mobile:3,sm:4,lg:6},children:a=>{f(a,{variant:"elevated",padding:"lg",class:"animate-slide-in-up hover:scale-105 transition-all duration-300 group",children:n=>{n.out.push(`<div class="text-center"><div class="text-3xl font-bold text-primary-600 mb-2 group-hover:animate-pulse">${s(c().totalModules)}</div> <div class="text-sm text-text-secondary">Total Modules</div></div>`)},$$slots:{default:!0}}),a.out.push("<!----> "),f(a,{variant:"elevated",padding:"lg",class:"animate-slide-in-up hover:scale-105 transition-all duration-300 group",children:n=>{n.out.push(`<div class="text-center"><div class="text-3xl font-bold text-success-600 mb-2 group-hover:animate-bounce">${s(c().completedModules)}</div> <div class="text-sm text-text-secondary">Completed</div></div>`)},$$slots:{default:!0}}),a.out.push("<!----> "),f(a,{variant:"elevated",padding:"lg",class:"animate-slide-in-up hover:scale-105 transition-all duration-300 group",children:n=>{n.out.push(`<div class="text-center"><div class="text-3xl font-bold text-warning-600 mb-2 group-hover:animate-wiggle">${s(c().completionRate.toFixed(1))}%</div> <div class="text-sm text-text-secondary">Completion Rate</div> <div class="mt-2">`),B(n,{value:c().completionRate,variant:"warning",size:"sm",animated:!0,striped:!0}),n.out.push("<!----></div></div>")},$$slots:{default:!0}}),a.out.push("<!----> "),f(a,{variant:"elevated",padding:"lg",class:"animate-slide-in-up hover:scale-105 transition-all duration-300 group",children:n=>{n.out.push(`<div class="text-center"><div class="text-3xl font-bold text-error-600 mb-2 group-hover:animate-heartbeat">${s(c().currentStreak)}</div> <div class="text-sm text-text-secondary">Day Streak</div> `),c().currentStreak>0||n.out.push("<!--[!-->"),n.out.push("<!--]--></div>")},$$slots:{default:!0}}),a.out.push("<!---->")}}),e.out.push("<!----></div>")):(e.out.push("<!--[!-->"),r.ui.currentView==="content"?(e.out.push("<!--[-->"),e.out.push('<div class="space-y-6"><h2 class="text-2xl font-bold text-text-primary">Content</h2> '),r.content.currentNode?(e.out.push("<!--[-->"),f(e,{variant:"elevated",padding:"lg",children:a=>{a.out.push(`<div class="space-y-4"><h3 class="text-xl font-semibold">${s(r.content.currentNode.title)}</h3> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"><div><span class="text-text-secondary">Type:</span> <span class="ml-2 font-medium capitalize">${s(r.content.currentNode.type)}</span></div> <div><span class="text-text-secondary">Difficulty:</span> <span class="ml-2 font-medium">${s(r.content.currentNode.metadata.difficulty)}/5</span></div> <div><span class="text-text-secondary">Time:</span> <span class="ml-2 font-medium">${s(r.content.currentNode.metadata.estimatedTime)}min</span></div> <div><span class="text-text-secondary">Tags:</span> <span class="ml-2 font-medium">${s(r.content.currentNode.metadata.tags.join(", ")||"None")}</span></div></div> `),g(a,{variant:"primary",onclick:()=>b.markModuleCompleted(r.content.currentNode.id,85),children:n=>{n.out.push("<!---->Mark as Completed (85% score)")},$$slots:{default:!0}}),a.out.push("<!----></div>")},$$slots:{default:!0}})):(e.out.push("<!--[!-->"),f(e,{padding:"lg",children:a=>{a.out.push('<div class="text-center py-8"><div class="text-4xl mb-4">ğŸ“š</div> <h3 class="text-lg font-medium mb-2">No Content Selected</h3> <p class="text-text-secondary mb-4">Select a node from the knowledge tree to view its content.</p> '),g(a,{variant:"primary",onclick:()=>k(),children:n=>{n.out.push("<!---->Browse Knowledge Base")},$$slots:{default:!0}}),a.out.push("<!----></div>")},$$slots:{default:!0}})),e.out.push("<!--]--></div>")):(e.out.push("<!--[!-->"),r.ui.currentView==="progress"?(e.out.push("<!--[-->"),e.out.push('<div class="space-y-6"><h2 class="text-2xl font-bold text-text-primary">Progress</h2> '),f(e,{variant:"elevated",padding:"lg",children:a=>{a.out.push(`<h3 class="text-lg font-semibold mb-4">Learning Statistics</h3> <div class="space-y-3"><div class="flex justify-between"><span class="text-text-secondary">Total Modules:</span> <span class="font-medium">${s(c().totalModules)}</span></div> <div class="flex justify-between"><span class="text-text-secondary">Completed:</span> <span class="font-medium text-success-600">${s(c().completedModules)}</span></div> <div class="flex justify-between"><span class="text-text-secondary">Average Score:</span> <span class="font-medium">${s(c().averageScore.toFixed(1))}%</span></div> <div class="flex justify-between"><span class="text-text-secondary">Current Streak:</span> <span class="font-medium text-warning-600">${s(c().currentStreak)} days</span></div></div>`)},$$slots:{default:!0}}),e.out.push("<!----></div>")):e.out.push("<!--[!-->"),e.out.push("<!--]-->")),e.out.push("<!--]-->")),e.out.push("<!--]-->")},$$slots:{default:!0}})}}),t.out.push("<!----> "),M(t,{children:l=>{u?.(l),l.out.push("<!---->")},$$slots:{default:!0}}),t.out.push("<!---->")},$$slots:{header:!0,sidebar:!0,default:!0}})}}),o.out.push("<!----> "),U(o,{position:"top-right"}),o.out.push("<!----> "),o.out.push("<!--[!-->"),o.out.push("<!--]-->")}do h=!0,v=E(i),x(v);while(!h);K(i,v),V()}export{ce as default};
