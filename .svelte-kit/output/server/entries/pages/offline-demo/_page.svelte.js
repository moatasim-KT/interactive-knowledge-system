import{c as z,d as A,a as u,p as q,k as Q,l as j,o as G,m as I,e as H}from"../../../chunks/vendor.js";import{o as v,n as _}from"../../../chunks/services.js";import{C as S,a as h,I as F,B as n,L as m}from"../../../chunks/components-ui.js";import"../../../chunks/utils.js";/* empty css                                                                  */function J(o,N){z();let i={isOnline:!0};function a(){return"Initializing..."}o.out.push(`<div class="offline-status-indicator svelte-dal0p1"><div class="status-badge svelte-dal0p1"><div${A("status-dot svelte-dal0p1",void 0,{online:i.isOnline,offline:!1})}></div> <span class="status-text svelte-dal0p1">${u(a())}</span> <span class="toggle-icon svelte-dal0p1">${u("â–¶")}</span></div> `),o.out.push("<!--[!-->"),o.out.push("<!--]--></div>"),q()}function y(o,N){z();let i=!1,a=[],p="",g=75,w="light",O={id:"demo-content-"+Date.now(),title:"Demo Content",blocks:[{id:"block-1",type:"text",content:{html:"<p>This is demo content created offline.</p>"},metadata:{created:new Date,modified:new Date,version:1}}],metadata:{author:"Demo User",created:new Date,modified:new Date,version:1,difficulty:3,estimatedTime:10,prerequisites:[],tags:["demo","offline"],language:"en"},relationships:{prerequisites:[],dependents:[],related:[]},analytics:{views:0,completions:0,averageScore:0,averageTime:0}};function l(s,e,t){a=[...a,{test:s,result:e,success:t}]}async function k(){i=!0;try{const s={...O,id:"test-content-"+Date.now(),title:p||"Test Content",metadata:{...O.metadata,created:new Date,modified:new Date}},e=await v.createContent(s);l("Create Content",`Success - Operation ID: ${e}`,!0)}catch(s){l("Create Content",`Failed: ${s}`,!1)}finally{i=!1}}async function D(){i=!0;try{const s={userId:"demo-user",moduleId:"demo-module",status:"in-progress",score:g,timeSpent:1200,lastAccessed:new Date,attempts:1,bookmarked:!1,notes:"Testing offline progress update"},e=await v.updateProgress("demo-module",s);l("Update Progress",`Success - Operation ID: ${e}`,!0)}catch(s){l("Update Progress",`Failed: ${s}`,!1)}finally{i=!1}}async function T(){i=!0;try{const s={preferences:{theme:w,learningStyle:"visual",difficulty:4,language:"en",notifications:!0,autoSave:!0}},e=await v.updateSettings(s);l("Update Settings",`Success - Operation ID: ${e}`,!0)}catch(s){l("Update Settings",`Failed: ${s}`,!1)}finally{i=!1}}async function C(){i=!0;try{const{storage:s}=await import("../../../chunks/components-knowledge.js").then(d=>d.i),e={id:"storage-test",title:"Storage Test",blocks:[],metadata:{author:"Test",created:new Date,modified:new Date,version:1,difficulty:3,estimatedTime:5,prerequisites:[],tags:["test"],language:"en"},relationships:{prerequisites:[],dependents:[],related:[]},analytics:{views:0,completions:0,averageScore:0,averageTime:0}};await s.put("modules",e);const t=await s.get("modules","storage-test");t&&t.title==="Storage Test"?l("Offline Storage","Success - Data stored and retrieved",!0):l("Offline Storage","Failed - Data not retrieved correctly",!1)}catch(s){l("Offline Storage",`Failed: ${s}`,!1)}finally{i=!1}}async function U(){i=!0;try{const s=_.getNetworkStatus(),e=_.isOnline();l("Network Detection",`Online: ${e}, Type: ${s.connectionType||"unknown"}`,!0)}catch(s){l("Network Detection",`Failed: ${s}`,!1)}finally{i=!1}}async function P(){try{window.dispatchEvent(new Event("offline")),l("Simulate Offline","Offline event dispatched",!0)}catch(s){l("Simulate Offline",`Failed: ${s}`,!1)}}async function R(){try{window.dispatchEvent(new Event("online")),l("Simulate Online","Online event dispatched",!0)}catch(s){l("Simulate Online",`Failed: ${s}`,!1)}}async function x(){a=[],await C(),await U(),await k(),await D(),await T()}function B(){a=[]}function E(){if(!v.isAvailable())return{total:0,success:0,failed:0};const s=v.getStatistics();return{queueSize:s.queueSize||0,pendingUpdates:s.pendingUpdates||0,isOnline:s.isOnline,storageAvailable:s.storageAvailable}}const r=E();let f=!0,b;function L(s){G(s,e=>{e.title="<title>Offline Functionality Demo</title>"}),J(s),s.out.push('<!----> <div class="offline-demo svelte-1lbs4um"><div class="header svelte-1lbs4um"><h1 class="svelte-1lbs4um">Offline Functionality Demo</h1> <p class="svelte-1lbs4um">Test and demonstrate offline capabilities of the Interactive Knowledge System.</p></div> <div class="demo-grid svelte-1lbs4um">'),S(s,{class:"status-card",padding:"lg",children:e=>{e.out.push('<h2>System Status</h2> <div class="status-grid svelte-1lbs4um"><div class="status-item svelte-1lbs4um"><span class="label svelte-1lbs4um">Network:</span> '),h(e,{variant:r.isOnline?"success":"error",children:t=>{t.out.push(`<!---->${u(r.isOnline?"Online":"Offline")}`)},$$slots:{default:!0}}),e.out.push('<!----></div> <div class="status-item svelte-1lbs4um"><span class="label svelte-1lbs4um">Storage:</span> '),h(e,{variant:r.storageAvailable?"success":"error",children:t=>{t.out.push(`<!---->${u(r.storageAvailable?"Available":"Unavailable")}`)},$$slots:{default:!0}}),e.out.push('<!----></div> <div class="status-item svelte-1lbs4um"><span class="label svelte-1lbs4um">Queue Size:</span> '),h(e,{variant:r.queueSize>0?"warning":"default",children:t=>{t.out.push(`<!---->${u(r.queueSize)}`)},$$slots:{default:!0}}),e.out.push('<!----></div> <div class="status-item svelte-1lbs4um"><span class="label svelte-1lbs4um">Pending Updates:</span> '),h(e,{variant:r.pendingUpdates>0?"warning":"default",children:t=>{t.out.push(`<!---->${u(r.pendingUpdates)}`)},$$slots:{default:!0}}),e.out.push("<!----></div></div>")},$$slots:{default:!0}}),s.out.push("<!----> "),S(s,{class:"controls-card",padding:"lg",children:e=>{e.out.push('<h2>Test Controls</h2> <div class="control-section svelte-1lbs4um"><h3 class="svelte-1lbs4um">Content Operations</h3> <div class="input-group svelte-1lbs4um">'),F(e,{placeholder:"Content title",label:"Content Title",get value(){return p},set value(t){p=t,f=!1}}),e.out.push("<!----> "),n(e,{onclick:k,disabled:i,children:t=>{i?(t.out.push("<!--[-->"),m(t,{size:"sm"})):t.out.push("<!--[!-->"),t.out.push("<!--]--> Create Content")},$$slots:{default:!0}}),e.out.push('<!----></div></div> <div class="control-section svelte-1lbs4um"><h3 class="svelte-1lbs4um">Progress Operations</h3> <div class="input-group svelte-1lbs4um">'),F(e,{type:"number",min:"0",max:"100",label:"Progress Score",get value(){return g},set value(t){g=t,f=!1}}),e.out.push("<!----> "),n(e,{onclick:D,disabled:i,children:t=>{i?(t.out.push("<!--[-->"),m(t,{size:"sm"})):t.out.push("<!--[!-->"),t.out.push("<!--]--> Update Progress")},$$slots:{default:!0}}),e.out.push('<!----></div></div> <div class="control-section svelte-1lbs4um"><h3 class="svelte-1lbs4um">Settings Operations</h3> <div class="input-group svelte-1lbs4um"><select class="theme-select svelte-1lbs4um">'),e.select_value=w,e.out.push(`<option value="light"${I(e,"light")}>Light</option><option value="dark"${I(e,"dark")}>Dark</option>`),e.select_value=void 0,e.out.push("</select> "),n(e,{onclick:T,disabled:i,children:t=>{i?(t.out.push("<!--[-->"),m(t,{size:"sm"})):t.out.push("<!--[!-->"),t.out.push("<!--]--> Update Settings")},$$slots:{default:!0}}),e.out.push('<!----></div></div> <div class="control-section svelte-1lbs4um"><h3 class="svelte-1lbs4um">System Tests</h3> <div class="button-group svelte-1lbs4um">'),n(e,{onclick:C,disabled:i,children:t=>{t.out.push("<!---->Test Storage")},$$slots:{default:!0}}),e.out.push("<!----> "),n(e,{onclick:U,disabled:i,children:t=>{t.out.push("<!---->Test Network")},$$slots:{default:!0}}),e.out.push('<!----></div></div> <div class="control-section svelte-1lbs4um"><h3 class="svelte-1lbs4um">Network Simulation</h3> <div class="button-group svelte-1lbs4um">'),n(e,{onclick:P,variant:"outlined",children:t=>{t.out.push("<!---->Simulate Offline")},$$slots:{default:!0}}),e.out.push("<!----> "),n(e,{onclick:R,variant:"outlined",children:t=>{t.out.push("<!---->Simulate Online")},$$slots:{default:!0}}),e.out.push('<!----></div></div> <div class="control-section svelte-1lbs4um"><h3 class="svelte-1lbs4um">Batch Operations</h3> <div class="button-group svelte-1lbs4um">'),n(e,{onclick:x,disabled:i,children:t=>{i?(t.out.push("<!--[-->"),m(t,{size:"sm"})):t.out.push("<!--[!-->"),t.out.push("<!--]--> Run All Tests")},$$slots:{default:!0}}),e.out.push("<!----> "),n(e,{onclick:B,variant:"outlined",children:t=>{t.out.push("<!---->Clear Results")},$$slots:{default:!0}}),e.out.push("<!----></div></div>")},$$slots:{default:!0}}),s.out.push("<!----> "),S(s,{class:"results-card",padding:"lg",children:e=>{if(e.out.push("<h2>Test Results</h2> "),a.length===0)e.out.push("<!--[-->"),e.out.push('<p class="no-results svelte-1lbs4um">No test results yet. Run some tests to see results here.</p>');else{e.out.push("<!--[!-->");const t=H(a);e.out.push('<div class="results-list svelte-1lbs4um"><!--[-->');for(let d=0,K=t.length;d<K;d++){let c=t[d];e.out.push(`<div${A("result-item svelte-1lbs4um",void 0,{success:c.success,failure:!c.success})}><div class="result-header svelte-1lbs4um"><span class="test-name svelte-1lbs4um">${u(c.test)}</span> `),h(e,{variant:c.success?"success":"error",children:M=>{M.out.push(`<!---->${u(c.success?"Success":"Failed")}`)},$$slots:{default:!0}}),e.out.push(`<!----></div> <div class="result-details svelte-1lbs4um">${u(c.result)}</div></div>`)}e.out.push("<!--]--></div>")}e.out.push("<!--]-->")},$$slots:{default:!0}}),s.out.push("<!----></div></div>")}do f=!0,b=Q(o),L(b);while(!f);j(o,b),q()}export{y as default};
