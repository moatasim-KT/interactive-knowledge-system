import"clsx";/* empty css                                                                 */import"@sveltejs/kit/internal";import{k as R,l as T,p as B,d as I,b as z,a as r,e as x,c as M}from"../../../chunks/vendor.js";import"../../../chunks/components-knowledge.js";import"../../../chunks/components-interactive.js";import{c as N}from"../../../chunks/utils.js";import{a as S}from"../../../chunks/services.js";import{I as w,B as _,L as P,C as D,a as b}from"../../../chunks/components-ui.js";import"idb";function j(g,G){I();const f=N("content-source-manager");let m=[],n=!0,a=null,i="",v="web-content",p="",s=null,k=!1;async function C(){n=!0,a=null;try{m=(await S.listSources()).sources}catch(e){a=e instanceof Error?e.message:"Failed to load sources",f.error("Failed to load sources:",e)}finally{n=!1}}async function F(){if(!i){alert("URL cannot be empty");return}n=!0,a=null;try{const e=p.split(",").map(u=>u.trim()).filter(u=>u.length>0),t=await S.addSource({url:i,category:v,tags:e});t.isDuplicate?alert(`Source already exists: ${t.source.title}`):(i="",v="web-content",p="",await C())}catch(e){a=e instanceof Error?e.message:"Failed to add source",f.error("Failed to add source:",e)}finally{n=!1}}async function U(e){if(confirm("Are you sure you want to delete this source?")){n=!0,a=null;try{await S.removeSource(e),await C(),s?.id===e&&(s=null)}catch(t){a=t instanceof Error?t.message:"Failed to delete source",f.error("Failed to delete source:",t)}finally{n=!1}}}function E(){s=null}function L(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}let d=!0,q;function A(e){if(e.out.push(`<div class="content-source-manager svelte-qrddt2"><h2 class="svelte-qrddt2">Content Sources</h2> <div class="add-source-section svelte-qrddt2"><h3 class="svelte-qrddt2">Add New Source</h3> <div${z("drop-zone svelte-qrddt2",void 0,{dragging:k})} role="button" tabindex="0">Drag and drop URLs here to import</div> <div class="input-group svelte-qrddt2">`),w(e,{type:"url",placeholder:"Enter URL",get value(){return i},set value(t){i=t,d=!1}}),e.out.push("<!----> "),w(e,{type:"text",placeholder:"Category (e.g., 'news', 'blog')",get value(){return v},set value(t){v=t,d=!1}}),e.out.push("<!----> "),w(e,{type:"text",placeholder:"Tags (comma-separated)",get value(){return p},set value(t){p=t,d=!1}}),e.out.push("<!----> "),_(e,{onclick:F,variant:"primary",disabled:n,children:t=>{t.out.push("<!---->Add Source")},$$slots:{default:!0}}),e.out.push("<!----></div></div> "),a?(e.out.push("<!--[-->"),e.out.push(`<div class="error-message svelte-qrddt2">Error: ${r(a)}</div>`)):e.out.push("<!--[!-->"),e.out.push("<!--]--> "),n)e.out.push("<!--[-->"),e.out.push('<div class="loading-state svelte-qrddt2">'),P(e,{}),e.out.push("<!----> <p>Loading content sources...</p></div>");else{if(e.out.push("<!--[!-->"),m.length===0)e.out.push("<!--[-->"),e.out.push('<div class="empty-state svelte-qrddt2"><p>No content sources added yet.</p></div>');else{e.out.push("<!--[!-->");const t=x(m);e.out.push('<div class="sources-grid svelte-qrddt2"><!--[-->');for(let u=0,h=t.length;u<h;u++){let c=t[u];e.out.push('<div class="source-card svelte-qrddt2" role="button" tabindex="0">'),D(e,{children:o=>{o.out.push(`<h4 class="svelte-qrddt2">${r(c.title)}</h4> <p class="source-url svelte-qrddt2">${r(c.url)}</p> <div class="source-meta svelte-qrddt2">`),b(o,{variant:"secondary",children:l=>{l.out.push(`<!---->${r(c.metadata.category)}`)},$$slots:{default:!0}}),o.out.push("<!----> "),b(o,{variant:"secondary",children:l=>{l.out.push(`<!---->${r(c.status)}`)},$$slots:{default:!0}}),o.out.push('<!----></div> <div class="source-actions svelte-qrddt2">'),_(o,{variant:"danger",size:"sm",onclick:l=>{l.stopPropagation(),U(c.id)},children:l=>{l.out.push("<!---->Delete")},$$slots:{default:!0}}),o.out.push("<!----></div>")},$$slots:{default:!0}}),e.out.push("<!----></div>")}e.out.push("<!--]--></div>")}e.out.push("<!--]-->")}e.out.push("<!--]--> "),s?(e.out.push("<!--[-->"),e.out.push('<div class="source-details-overlay svelte-qrddt2" role="dialog" tabindex="0"><div class="source-details-modal svelte-qrddt2">'),D(e,{children:t=>{if(t.out.push(`<h3 class="svelte-qrddt2">${r(s.title)}</h3> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">URL:</strong> <a${M("href",s.url)} target="_blank" rel="noopener noreferrer">${r(s.url)}</a></p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Domain:</strong> ${r(s.domain)}</p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Category:</strong> ${r(s.metadata.category)}</p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Status:</strong> ${r(s.status)}</p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Imported:</strong> ${r(L(s.importDate))}</p> <p class="svelte-qrddt2"><strong class="svelte-qrddt2">Last Checked:</strong> ${r(L(s.lastChecked))}</p> `),s.metadata.description?(t.out.push("<!--[-->"),t.out.push(`<p class="svelte-qrddt2"><strong class="svelte-qrddt2">Description:</strong> ${r(s.metadata.description)}</p>`)):t.out.push("<!--[!-->"),t.out.push("<!--]--> "),s.metadata.tags&&s.metadata.tags.length>0){t.out.push("<!--[-->");const u=x(s.metadata.tags);t.out.push('<p class="svelte-qrddt2"><strong class="svelte-qrddt2">Tags:</strong> <!--[-->');for(let h=0,c=u.length;h<c;h++){let o=u[h];b(t,{variant:"secondary",children:l=>{l.out.push(`<!---->${r(o)}`)},$$slots:{default:!0}})}t.out.push("<!--]--></p>")}else t.out.push("<!--[!-->");t.out.push("<!--]--> "),_(t,{onclick:E,variant:"secondary",children:u=>{u.out.push("<!---->Close")},$$slots:{default:!0}}),t.out.push("<!---->")},$$slots:{default:!0}}),e.out.push("<!----></div></div>")):e.out.push("<!--[!-->"),e.out.push("<!--]--></div>")}do d=!0,q=R(g),A(q);while(!d);T(g,q),B()}function y(g){j(g)}export{y as default};
